if(typeof Crypto=="undefined"||!Crypto.util){(function(){var n=window.Crypto={},q=n.util={rotl:function(f,j){return f<<j|f>>>32-j},rotr:function(f,j){return f<<32-j|f>>>j},endian:function(f){if(f.constructor==Number){return q.rotl(f,8)&16711935|q.rotl(f,24)&4278255360}for(var j=0;j<f.length;j++){f[j]=q.endian(f[j])}return f},randomBytes:function(f){for(var j=[];f>0;f--){j.push(Math.floor(Math.random()*256))}return j},bytesToWords:function(f){for(var j=[],b=0,a=0;b<f.length;b++,a+=8){j[a>>>5]|=f[b]<<24-a%32}return j},wordsToBytes:function(f){for(var j=[],b=0;b<f.length*32;b+=8){j.push(f[b>>>5]>>>24-b%32&255)}return j},bytesToHex:function(f){for(var j=[],b=0;b<f.length;b++){j.push((f[b]>>>4).toString(16));j.push((f[b]&15).toString(16))}return j.join("")},hexToBytes:function(f){for(var j=[],b=0;b<f.length;b+=2){j.push(parseInt(f.substr(b,2),16))}return j},bytesToBase64:function(f){if(typeof btoa=="function"){return btoa(p.bytesToString(f))}for(var j=[],b=0;b<f.length;b+=3){for(var a=f[b]<<16|f[b+1]<<8|f[b+2],e=0;e<4;e++){b*8+e*6<=f.length*8?j.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-e)&63)):j.push("=")}}return j.join("")},base64ToBytes:function(f){if(typeof atob=="function"){return p.stringToBytes(atob(f))}f=f.replace(/[^A-Z0-9+\/]/ig,"");for(var j=[],b=0,a=0;b<f.length;a=++b%4){a!=0&&j.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f.charAt(b-1))&Math.pow(2,-2*a+8)-1)<<a*2|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f.charAt(b))>>>6-a*2)}return j}};n=n.charenc={};n.UTF8={stringToBytes:function(f){return p.stringToBytes(unescape(encodeURIComponent(f)))},bytesToString:function(f){return decodeURIComponent(escape(p.bytesToString(f)))}};var p=n.Binary={stringToBytes:function(f){for(var j=[],b=0;b<f.length;b++){j.push(f.charCodeAt(b)&255)}return j},bytesToString:function(f){for(var j=[],b=0;b<f.length;b++){j.push(String.fromCharCode(f[b]))}return j.join("")}}})()}(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary,b=n.SHA1=function(a,e){var g=q.wordsToBytes(b._sha1(a));return e&&e.asBytes?g:e&&e.asString?j.bytesToString(g):q.bytesToHex(g)};b._sha1=function(a){if(a.constructor==String){a=f.stringToBytes(a)}var e=q.bytesToWords(a),g=a.length*8;a=[];var k=1732584193,l=-271733879,o=-1732584194,r=271733878,x=-1009589776;e[g>>5]|=128<<24-g%32;e[(g+64>>>9<<4)+15]=g;for(g=0;g<e.length;g+=16){for(var i=k,t=l,w=o,s=r,u=x,h=0;h<80;h++){if(h<16){a[h]=e[g+h]}else{var m=a[h-3]^a[h-8]^a[h-14]^a[h-16];a[h]=m<<1|m>>>31}m=(k<<5|k>>>27)+x+(a[h]>>>0)+(h<20?(l&o|~l&r)+1518500249:h<40?(l^o^r)+1859775393:h<60?(l&o|l&r|o&r)-1894007588:(l^o^r)-899497514);x=r;r=o;o=l<<30|l>>>2;l=k;k=m}k+=i;l+=t;o+=w;r+=s;x+=u}return[k,l,o,r,x]};b._blocksize=16;b._digestsize=20})();(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary;n.HMAC=function(b,a,e,g){if(a.constructor==String){a=f.stringToBytes(a)}if(e.constructor==String){e=f.stringToBytes(e)}if(e.length>b._blocksize*4){e=b(e,{asBytes:true})}var k=e.slice(0);e=e.slice(0);for(var l=0;l<b._blocksize*4;l++){k[l]^=92;e[l]^=54}b=b(k.concat(b(e.concat(a),{asBytes:true})),{asBytes:true});return g&&g.asBytes?b:g&&g.asString?j.bytesToString(b):q.bytesToHex(b)}})();(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary;n.PBKDF2=function(b,a,e,g){function k(u,h){return n.HMAC(l,h,u,{asBytes:true})}if(b.constructor==String){b=f.stringToBytes(b)}if(a.constructor==String){a=f.stringToBytes(a)}for(var l=g&&g.hasher||n.SHA1,o=g&&g.iterations||1,r=[],x=1;r.length<e;){for(var i=k(b,a.concat(q.wordsToBytes([x]))),t=i,w=1;w<o;w++){t=k(b,t);for(var s=0;s<i.length;s++){i[s]^=t[s]}}r=r.concat(i);x++}r.length=e;return g&&g.asBytes?r:g&&g.asString?j.bytesToString(r):q.bytesToHex(r)}})();(function(n){function q(b,a){var e=b._blocksize*4;return e-a.length%e}var p=n.pad={},f=function(b){for(var a=b.pop(),e=1;e<a;e++){b.pop()}};p.NoPadding={pad:function(){},unpad:function(){}};p.ZeroPadding={pad:function(b,a){var e=b._blocksize*4,g=a.length%e;if(g!=0){for(g=e-g;g>0;g--){a.push(0)}}},unpad:function(){}};p.iso7816={pad:function(b,a){var e=q(b,a);for(a.push(128);e>1;e--){a.push(0)}},unpad:function(b){for(;b.pop()!=128;){}}};p.ansix923={pad:function(b,a){for(var e=q(b,a),g=1;g<e;g++){a.push(0)}a.push(e)},unpad:f};p.iso10126={pad:function(b,a){for(var e=q(b,a),g=1;g<e;g++){a.push(Math.floor(Math.random()*256))}a.push(e)},unpad:f};p.pkcs7={pad:function(b,a){for(var e=q(b,a),g=0;g<e;g++){a.push(e)}},unpad:f};n=n.mode={};var j=n.Mode=function(b){if(b){this._padding=b}};j.prototype={encrypt:function(b,a,e){this._padding.pad(b,a);this._doEncrypt(b,a,e)},decrypt:function(b,a,e){this._doDecrypt(b,a,e);this._padding.unpad(a)},_padding:p.iso7816};f=(n.ECB=function(){j.apply(this,arguments)}).prototype=new j;f._doEncrypt=function(b,a){for(var e=b._blocksize*4,g=0;g<a.length;g+=e){b._encryptblock(a,g)}};f._doDecrypt=function(b,a){for(var e=b._blocksize*4,g=0;g<a.length;g+=e){b._decryptblock(a,g)}};f.fixOptions=function(b){b.iv=[]};f=(n.CBC=function(){j.apply(this,arguments)}).prototype=new j;f._doEncrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;k+=g){if(k==0){for(var l=0;l<g;l++){a[l]^=e[l]}}else{for(l=0;l<g;l++){a[k+l]^=a[k+l-g]}}b._encryptblock(a,k)}};f._doDecrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;k+=g){var l=a.slice(k,k+g);b._decryptblock(a,k);for(var o=0;o<g;o++){a[k+o]^=e[o]}e=l}};f=(n.CFB=function(){j.apply(this,arguments)}).prototype=new j;f._padding=p.NoPadding;f._doEncrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){var l=k%g;l==0&&b._encryptblock(e,0);a[k]^=e[l];e[l]=a[k]}};f._doDecrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){var l=k%g;l==0&&b._encryptblock(e,0);var o=a[k];a[k]^=e[l];e[l]=o}};f=(n.OFB=function(){j.apply(this,arguments)}).prototype=new j;f._padding=p.NoPadding;f._doEncrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){k%g==0&&b._encryptblock(e,0);a[k]^=e[k%g]}};f._doDecrypt=f._doEncrypt;n=(n.CTR=function(){j.apply(this,arguments)}).prototype=new j;n._padding=p.NoPadding;n._doEncrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;){var l=e.slice(0);b._encryptblock(l,0);for(var o=0;k<a.length&&o<g;o++,k++){a[k]^=l[o]}if(++e[g-1]==256){e[g-1]=0;if(++e[g-2]==256){e[g-2]=0;if(++e[g-3]==256){e[g-3]=0;++e[g-4]}}}}};n._doDecrypt=n._doEncrypt})(Crypto);(function(){function n(h,m){for(var d=0,c=0;c<8;c++){if(m&1){d^=h}var v=h&128;h=h<<1&255;if(v){h^=27}m>>>=1}return d}for(var q=Crypto,p=q.util,f=q.charenc.UTF8,j=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],b=[],a=0;a<256;a++){b[j[a]]=a}var e=[],g=[],k=[],l=[],o=[],r=[];for(a=0;a<256;a++){e[a]=n(a,2);g[a]=n(a,3);k[a]=n(a,9);l[a]=n(a,11);o[a]=n(a,13);r[a]=n(a,14)}var x=[0,1,2,4,8,16,32,64,128,27,54],i=[[],[],[],[]],t,w,s,u=q.AES={encrypt:function(h,m,d){d=d||{};var c=d.mode||new q.mode.OFB;c.fixOptions&&c.fixOptions(d);h=h.constructor==String?f.stringToBytes(h):h;var v=d.iv||p.randomBytes(u._blocksize*4);m=m.constructor==String?q.PBKDF2(m,v,32,{asBytes:true}):m;u._init(m);c.encrypt(u,h,v);h=d.iv?h:v.concat(h);return d&&d.asBytes?h:p.bytesToBase64(h)},decrypt:function(h,m,d){d=d||{};var c=d.mode||new q.mode.OFB;c.fixOptions&&c.fixOptions(d);h=h.constructor==String?p.base64ToBytes(h):h;var v=d.iv||h.splice(0,u._blocksize*4);m=m.constructor==String?q.PBKDF2(m,v,32,{asBytes:true}):m;u._init(m);c.decrypt(u,h,v);return d&&d.asBytes?h:f.bytesToString(h)},_blocksize:4,_encryptblock:function(h,m){for(var d=0;d<u._blocksize;d++){for(var c=0;c<4;c++){i[d][c]=h[m+c*4+d]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[c][d]}}for(var v=1;v<w;v++){for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=j[i[d][c]]}}i[1].push(i[1].shift());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].unshift(i[3].pop());for(c=0;c<4;c++){d=i[0][c];var y=i[1][c],z=i[2][c],A=i[3][c];i[0][c]=e[d]^g[y]^z^A;i[1][c]=d^e[y]^g[z]^A;i[2][c]=d^y^e[z]^g[A];i[3][c]=g[d]^y^z^e[A]}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[v*4+c][d]}}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=j[i[d][c]]}}i[1].push(i[1].shift());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].unshift(i[3].pop());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[w*4+c][d]}}for(d=0;d<u._blocksize;d++){for(c=0;c<4;c++){h[m+c*4+d]=i[d][c]}}},_decryptblock:function(h,m){for(var d=0;d<u._blocksize;d++){for(var c=0;c<4;c++){i[d][c]=h[m+c*4+d]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[w*4+c][d]}}for(var v=1;v<w;v++){i[1].unshift(i[1].pop());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].push(i[3].shift());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=b[i[d][c]]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[(w-v)*4+c][d]}}for(c=0;c<4;c++){d=i[0][c];var y=i[1][c],z=i[2][c],A=i[3][c];i[0][c]=r[d]^l[y]^o[z]^k[A];i[1][c]=k[d]^r[y]^l[z]^o[A];i[2][c]=o[d]^k[y]^r[z]^l[A];i[3][c]=l[d]^o[y]^k[z]^r[A]}}i[1].unshift(i[1].pop());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].push(i[3].shift());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=b[i[d][c]]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[c][d]}}for(d=0;d<u._blocksize;d++){for(c=0;c<4;c++){h[m+c*4+d]=i[d][c]}}},_init:function(h){t=h.length/4;w=t+6;u._keyexpansion(h)},_keyexpansion:function(h){s=[];for(var m=0;m<t;m++){s[m]=[h[m*4],h[m*4+1],h[m*4+2],h[m*4+3]]}for(m=t;m<u._blocksize*(w+1);m++){h=[s[m-1][0],s[m-1][1],s[m-1][2],s[m-1][3]];if(m%t==0){h.push(h.shift());h[0]=j[h[0]];h[1]=j[h[1]];h[2]=j[h[2]];h[3]=j[h[3]];h[0]^=x[m/t]}else{if(t>6&&m%t==4){h[0]=j[h[0]];h[1]=j[h[1]];h[2]=j[h[2]];h[3]=j[h[3]]}}s[m]=[s[m-t][0]^h[0],s[m-t][1]^h[1],s[m-t][2]^h[2],s[m-t][3]^h[3]]}}}})();(function($){$(function(){function equalHeight(group){var tallest=0;group.each(function(){var thisHeight=$(this).height();if(thisHeight>tallest){tallest=thisHeight}});group.height(tallest)}$(function(){equalHeight($(".equal-height-dialog"))});$(function(){equalHeight($(".equal-height-upsell"))});$(function(){equalHeight($(".equal-height-ot-column"))});$(function(){equalHeight($(".platinum-align"))});$(function(){equalHeight($(".pp-column-content"))});$(function(){equalHeight($(".pp-column h2"))});$(function(){equalHeight($("div.card-detail ul"))});$(function(){equalHeight($(".olb-dsp-savings-overview-module .header-content a strong"))});$(function(){equalHeight($(".olb-dsp-cds-overview-module .package-row .header-col"))})})})(jQuery);(function($){var x=function(o){return o!==undefined&&o!==null},H=$("head"),Z={},K={callback:"C",url:location.href};$.jsonp=function(d){d=$.extend({},K,d);if(x(d.beforeSend)){var t=0;d.abort=function(){t=1};if(d.beforeSend(d,d)===false||t){return d}}var _="",y="success",n="error",u=x(d.url)?d.url:_,p=x(d.data)?d.data:_,s=(typeof p)=="string",k=function(f){setTimeout(f,1)},S,P,i,j,U;p=s?p:$.param(p);x(d.callbackParameter)&&(p+=(p==_?_:"&")+escape(d.callbackParameter)+"=?");!d.cache&&!d.pageCache&&(p+=[(p==_?_:"&"),"_xx",(new Date()).getTime(),"=",1].join(_));S=u.split("?");if(p!=_){P=p.split("?");j=S.length-1;j&&(S[j]+="&"+P.shift());S=S.concat(P)}i=S.length-2;i&&(S[i]+=d.callback+S.pop());U=S.join("?");if(d.pageCache&&x(Z[U])){k(function(){if(x(Z[U].e)){x(d.error)&&d.error(d,n);x(d.complete)&&d.complete(d,n)}else{var v=Z[U].s;x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y)}});return d}var f=$("<iframe />");H.append(f);var F=f[0],W=F.contentWindow||F.contentDocument,D=W.document;if(!x(D)){D=W;W=D.getParentNode()}var w,e=function(_,m){d.pageCache&&!x(m)&&(Z[U]={e:1});w();m=x(m)?m:n;x(d.error)&&d.error(d,m);x(d.complete)&&d.complete(d,m)},t=0,C=d.callback,E=C=="E"?"X":"E";D.open();W[C]=function(v){t=1;d.pageCache&&(Z[U]={s:v});k(function(){w();x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y)})};W[E]=function(s){(!s||s=="complete")&&!t++&&k(e)};w=function(){W[E]=undefined;W[C]=undefined;try{delete W[E]}catch(_){}try{delete W[C]}catch(_){}D.open();D.write(_);D.close();f.remove()};k(function(){D.write(['<html><head><script src="',U,'" onload="',E,'()" onreadystatechange="',E,'(this.readyState)"><\/script></head><body onload="',E,'()"></body></html>'].join(_));D.close()});d.timeout>0&&setTimeout(function(){!t&&e(_,"timeout")},d.timeout);d.abort=w;return d};$.jsonp.setup=function(o){$.extend(K,o)}})(jQuery);var XEngineWidgetFramework=XEngineWidgetFramework||function(){function XEngineWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,widgetReponseType){var ranWidgetCallbackOnTimer_l;var widgetCallbackTimeoutId_l;var widgetCallbackJsonTimeoutId_l;var debug_l="false";var snippetLoadImage='<div class="ajax-loading-container"><div class="ajax-loading-image-med"></div></div>';initializeWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,widgetReponseType);function initializeWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,widgetReponseType){debug("in initializeWidget......"+widgetAction+":url:"+pageLocation+":params:"+params+":divId:"+divId+":isCRE2Widget:"+isCRE2Widget+"defaultDivId"+defaultDivId+"widgetTimeout"+widgetTimeout);var widgetUrl="";var isWidget="true";if(isCRE2Widget!==""&&isCRE2Widget==="false"){isWidget="false"}if(widgetAction==""||widgetAction==undefined){widgetUrl=pageLocation+".go"}else{widgetUrl=widgetAction}var jsHttp=new BofaJsHttp(widgetUrl);jsHttp.addQueryParam("divId",divId);jsHttp.addQueryParam("isWidget",isWidget);if(params!=""){jsHttp.addQueryParam("params",params);try{var paramObject=JSON.parse(params,function(key,value){if(value&&typeof value==="string"){jsHttp.addQueryParam(key,value);return value}})}catch(e){debug("exception="+e)}}jsHttp.addQueryParam("request_locale",locale);jsHttp.addQueryParam("deviceId",deviceId);jsHttp.addQueryParam("pageLocation",pageLocation);var newUrlStr=jsHttp.createUrlString();debug("URLStirng = "+newUrlStr);if(widgetTimeout==undefined||widgetTimeout==null||widgetTimeout==""){widgetTimeout=20000}sendJsonWidgetRequest(newUrlStr,divId,widgetTimeout,defaultDivId,widgetReponseType)}function sendJsonWidgetRequest(url,divId,widgetTimeout,defaultDivId,widgetReponseType){debug("defaultDivId"+defaultDivId);$(function(){$("#"+divId).html(snippetLoadImage)});widgetCallbackTimeoutId_l=setTimeout(function(){callbackOnWidgetRequestTimeout(defaultDivId,divId)},widgetTimeout);widgetCallbackJsonTimeoutId_l=setTimeout(function(){callWidgetJSON(url,divId,widgetReponseType)},5)}function callWidgetJSON(url,divId,widgetReponseType){debug("in call to callWidgetJSON");var surl=url;if(widgetReponseType==undefined||widgetReponseType==null||widgetReponseType==""||widgetReponseType.toLowerCase()!="json"){surl=surl+"&callback=?"}debug("Sending JSON request to "+surl);$.getJSON(surl,function(data){handleWidgetResponse(data,divId)})}function callbackOnWidgetRequestTimeout(defaultDivId,divId){debug("callbackOnWidgetRequestTimeout");$(function(){$("#"+divId).html("")});ranWidgetCallbackOnTimer_l=true;clearTimeouts();widget_show(defaultDivId)}function widget_show(id){debug("in show: "+id);if(document.getElementById(id)!=undefined){document.getElementById(id).style.display="inline"}}function clearTimeouts(){if(widgetCallbackJsonTimeoutId_l!=undefined){window.clearTimeout(widgetCallbackJsonTimeoutId_l)}if(widgetCallbackTimeoutId_l!=undefined){window.clearTimeout(widgetCallbackTimeoutId_l)}}function handleWidgetResponse(data,divId){debug("....inside handleWidgetResponse:divId="+divId+" ,data:"+data);if(ranWidgetCallbackOnTimer_l!=true){ranWidgetCallbackOnTimer_l=false}if(ranWidgetCallbackOnTimer_l==true){clearTimeouts();return}clearTimeouts();if(data&&data.widgetData){if(data.widgetData.cssList){loadAllCssJsFiles(data.widgetData.cssList,"css")}if(data.widgetData.jsList){loadAllCssJsFiles(data.widgetData.jsList,"js")}if(data.widgetData.htmlSrc){$(function(){$("#"+divId).html(unescape(data.widgetData.htmlSrc))});return}}}function debug(text){if(debug_l=="true"){alert(text)}}}return{callWidget:function(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout){debug("in callWidget..."+widgetAction+":url:"+pageLocation+":params:"+params+":divId:"+divId+":isCRE2Widget:"+isCRE2Widget+":defaultDivId:"+defaultDivId+":widgetTimeout:"+widgetTimeout);return new XEngineWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,"")},callWidget:function(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,widgetReponseType){debug("in callWidget..."+widgetAction+":url:"+pageLocation+":params:"+params+":divId:"+divId+":isCRE2Widget:"+isCRE2Widget+":defaultDivId:"+defaultDivId+":widgetTimeout:"+widgetTimeout+":widgetReponseType:"+widgetReponseType);return new XEngineWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout,widgetReponseType)}}}();var debug_g;var widgetActionArray_g=new Array();var widgetPageLocationArray_g=new Array();var widgetDivIdArray_g=new Array();var widgetDefaultContentArray_g=new Array();var callbackTimeoutId_g;var callbackJsonTimeoutId_g;var ranCallbackOnTimer_g;var callbackWidgetTimeoutId_g;var ranCallbackOnWidgetTimer_g;var receivedAdCounter_g=0;var ranWidgetCallbackOnTimer_g;var widgetCallbackTimeoutId_g;var widgetCallbackJsonTimeoutId_g;var snippetLoadImage='<div class="ajax-loading-container"><div class="ajax-loading-image-med"></div></div>';function callWidget(widgetAction,pageLocation,params,divId,locale,deviceId,isCRE2Widget,defaultDivId,widgetTimeout){debug("in initializeWidget......"+widgetAction+":url:"+pageLocation+":params:"+params+":divId:"+divId+":isCRE2Widget:"+isCRE2Widget+"defaultDivId"+defaultDivId+"widgetTimeout"+widgetTimeout);var widgetUrl="";var isWidget="true";if(isCRE2Widget!==""&&isCRE2Widget==="false"){isWidget="false"}if(widgetAction==""||widgetAction==undefined){widgetUrl=pageLocation+".go"}else{widgetUrl=widgetAction}var jsHttp=new BofaJsHttp(widgetUrl);jsHttp.addQueryParam("divId",divId);jsHttp.addQueryParam("isWidget",isWidget);if(params!=""){jsHttp.addQueryParam("params",params);try{var paramObject=JSON.parse(params,function(key,value){if(value&&typeof value==="string"){jsHttp.addQueryParam(key,value);return value}})}catch(e){debug("exception="+e)}}jsHttp.addQueryParam("request_locale",locale);jsHttp.addQueryParam("deviceId",deviceId);jsHttp.addQueryParam("pageLocation",pageLocation);var newUrlStr=jsHttp.createUrlString();debug("URLStirng = "+newUrlStr);if(widgetTimeout==undefined||widgetTimeout==null||widgetTimeout==""){widgetTimeout=20000}sendJsonWidgetRequest(newUrlStr,divId,widgetTimeout,defaultDivId)}function sendJsonWidgetRequest(url,divId,widgetTimeout,defaultDivId){debug("defaultDivId"+defaultDivId);$(function(){$("#"+divId).html(snippetLoadImage)});widgetCallbackTimeoutId_g=setTimeout(function(){callbackOnWidgetRequestTimeout(defaultDivId,divId)},widgetTimeout);widgetCallbackJsonTimeoutId_g=setTimeout(function(){callWidgetJSON(url,divId)},5)}function callWidgetJSON(url,divId){debug("in call to callWidgetJSON");var surl=url+"&callback=?";debug("Sending JSON request to "+surl);$.getJSON(surl,function(data){handleWidgetResponse(data,divId)})}function callbackOnWidgetRequestTimeout(defaultDivId,divId){debug("callbackOnWidgetRequestTimeout");$(function(){$("#"+divId).html("")});ranWidgetCallbackOnTimer_g=true;clearTimeouts();widget_show(defaultDivId)}function widget_show(id){debug("in show: "+id);if(document.getElementById(id)!=undefined){document.getElementById(id).style.display="inline"}}function clearTimeouts(){if(widgetCallbackJsonTimeoutId_g!=undefined){window.clearTimeout(widgetCallbackJsonTimeoutId_g)}if(widgetCallbackTimeoutId_g!=undefined){window.clearTimeout(widgetCallbackTimeoutId_g)}}function handleWidgetResponse(data,divId){debug("....inside handleWidgetResponse:divId="+divId+" ,data:"+data);if(ranWidgetCallbackOnTimer_g!=true){ranWidgetCallbackOnTimer_g=false}if(ranWidgetCallbackOnTimer_g==true){clearTimeouts();return}clearTimeouts();if(data&&data.widgetData){if(data.widgetData.cssList){loadAllCssJsFiles(data.widgetData.cssList,"css")}if(data.widgetData.jsList){loadAllCssJsFiles(data.widgetData.jsList,"js")}if(data.widgetData.htmlSrc){$(function(){$("#"+divId).html(unescape(data.widgetData.htmlSrc))});return}}}function sendJsonRequest(url,divId,widgetTimeout){debug("divId:"+divId);var divIdStr=divId;var divIdStr_l=divId;tc_location=window.document.location.href;if(tc_location.toLowerCase().match("page_msg=signoff")!=null){divIdStr_l=divIdStr_l.replace(/BOA_HOME_SIGNOFF_SERVICE/g,"BOA_HOME_SIGNON_SERVICE");divIdStr_l=divIdStr_l.replace(/BOA_SB_HOME_SIGNOFF_SERVICE/g,"BOA_SB_HOME_SIGNON_SERVICE");divIdStr_l=divIdStr_l.replace(/BOA_HOME_SIGNOFF_HERO/g,"BOA_HOME_SIGNON_HERO");divIdStr_l=divIdStr_l.replace(/BOA_SB_HOME_SIGNOFF_HERO/g,"BOA_SB_HOME_SIGNON_HERO");var divIdStr=divIdStr_l;url=url+"&page_msg=signoff";debug("new divId:"+divIdStr)}if(widgetTimeout==undefined){widgetTimeout=20000}debug("widgetTimeout="+widgetTimeout);callbackWidgetTimeoutId_g=setTimeout(widgetTimeoutCallBackFunction,widgetTimeout);$("#"+divIdStr).widgetSnippetLoader({url:url,data:({}),type:"GET",dataType:"jsonp",timeout:widgetTimeout,timeoutCallback:widgetTimeoutCallBackFunction,errorCallback:widgetErrorCallBackFunction,jsonpCallback:null,errorMessage:"We could not retrieve your information at this time. Please try again later.",callbackFunction:handleResponse})}function widgetTimeoutCallBackFunction(){ranCallbackOnWidgetTimer_g=true;debug("widgetTimeoutCallBackFunction")}function widgetErrorCallBackFunction(XMLHTTPRequest,textStatus,errorThrown){ranCallbackOnWidgetTimer_g=true;debug("widgetErrorCallBackFunction")}function displayDefaultContent(){if(callbackWidgetTimeoutId_g!=undefined){window.clearTimeout(callbackWidgetTimeoutId_g)}debug("display default content since no response from server");for(var i=0;i<widgetDivIdArray_g.length;i++){var divId="widget_"+widgetDivIdArray_g[i];debug("display default ad in divid:"+divId);debug("default ad html:"+widgetDefaultContentArray[widgetDivIdArray[i]]);document.getElementById(divId).innerHTML=unescape(widgetDefaultContentArray[widgetDivIdArray[i]])}DynContentComplete="yes"}function handleResponse(data,divId,options){debug("....inside handleResponse:divId="+divId+" ,data:"+data);if(ranCallbackOnWidgetTimer_g!=true){ranCallbackOnWidgetTimer_g=false}if(callbackWidgetTimeoutId_g!=undefined){window.clearTimeout(callbackWidgetTimeoutId_g)}if(data&&data.widgetData){if(data.widgetData.cssList){loadAllCssJsFiles(data.widgetData.cssList,"css")}if(data.widgetData.jsList){loadAllCssJsFiles(data.widgetData.jsList,"js")}if(data.widgetData.htmlSrc){$(function(){divId.html(unescape(data.widgetData.htmlSrc))});receivedAdCounter_g++;if(receivedAdCounter_g==4){DynContentComplete="yes";debug("set the dynacontentcomplete flag to true ")}return}}}function BofaJsHttp(endPointUrl){this.queryParamList=new Array();this.queryParamListExists=false;this.addQueryParam=function(name,value){if(name=="widgetUrl"){this.queryParamList[escape(name)]=value}else{if(value!=undefined&&value.indexOf("+")>0){this.queryParamList[escape(name)]=value.replace(/\+/g,encodeURIComponent("+"))}else{this.queryParamList[escape(name)]=escape(value)}}this.queryParamListExists=true};this.createUrlString=function(){this.queryString="";var Result="";var First=true;if(endPointUrl.indexOf("?")>0){First=false}for(var Key in this.queryParamList){this.queryString+=((First)?"?":"&")+Key+"="+this.queryParamList[Key];First=false}Result=endPointUrl+this.queryString;return Result}}function initializeTC(){debug_g=javascriptDebugEnabled;var tcTimeout=touchClarityTimeout;widgetActionArray_g=widgetActionArray;widgetPageLocationArray_g=widgetPageLocationArray;widgetDivIdArray_g=widgetDivIdArray;widgetDefaultContentArray_g=widgetDefaultContentArray;callbackTimeoutId_g=setTimeout(callbackOnTimeout,tcTimeout);callbackJsonTimeoutId_g=setTimeout(callTouchClarity,5)}function callTouchClarity(){var tCUrl=touchClarityUrl+getAdditionalRequestParams();var tCUrlTemp=tCUrl;tc_location=window.document.location.href;if(tc_location.toLowerCase().match("page_msg=signoff")!=null){tCUrlTemp=tCUrlTemp.replace(/BOA_HOME_SIGNON_SERVICE/g,"BOA_HOME_SIGNOFF_SERVICE");tCUrlTemp=tCUrlTemp.replace(/BOA_SB_HOME_SIGNON_SERVICE/g,"BOA_SB_HOME_SIGNOFF_SERVICE");tCUrlTemp=tCUrlTemp.replace(/BOA_HOME_SIGNON_HERO/g,"BOA_HOME_SIGNOFF_HERO");tCUrlTemp=tCUrlTemp.replace(/BOA_SB_HOME_SIGNON_HERO/g,"BOA_SB_HOME_SIGNOFF_HERO");var tCUrl=tCUrlTemp;widgetPageLocationArray_g.BOA_HOME_SIGNOFF_HERO="/homepage/BOA_HOME_SIGNOFF_HERO";widgetActionArray_g.BOA_HOME_SIGNOFF_HERO="";widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_01="/homepage/BOA_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_01="";widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_02="/homepage/BOA_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_02="";widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_03="/homepage/BOA_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_03="";widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_HERO="/homepage/BOA_SB_HOME_SIGNOFF_HERO";widgetActionArray_g.BOA_SB_HOME_SIGNOFF_HERO="";widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_01="/homepage/BOA_SB_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_01="";widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_02="/homepage/BOA_SB_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_02="";widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_03="/homepage/BOA_SB_HOME_SIGNOFF_SERVICE";widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_03=""}tCUrl=tCUrl+"&callback=?";debug("Touch Clarity Request URL= "+tCUrl);$.getJSON(tCUrl,callback)}function callbackOnTimeout(){debug("timed out");ranCallbackOnTimer_g=true;intializeTCTimeOutContent()}function callback(data){debug("in callback");if(ranCallbackOnTimer_g!=true&&data!=undefined){ranCallbackOnTimer_g=false;fetchTouchClarityHtml(data)}else{if(ranCallbackOnTimer_g==undefined||data==undefined){ranCallbackOnTimer_g=true;intializeTCTimeOutContent()}}}function intializeTCTimeOutContent(){debug("display default content");if(callbackJsonTimeoutId_g!=undefined){window.clearTimeout(callbackJsonTimeoutId_g)}if(callbackTimeoutId_g!=undefined){window.clearTimeout(callbackTimeoutId_g)}for(var i=0;i<widgetDivIdArray_g.length;i++){var divId="widget_"+widgetDivIdArray_g[i];debug("divId="+divId);debug("html text="+unescape(widgetDefaultContentArray[widgetDivIdArray[i]]));document.getElementById(divId).innerHTML=unescape(widgetDefaultContentArray[widgetDivIdArray[i]])}DynContentComplete="yes"}function fetchTouchClarityHtml(jsonObj){debug("process vendor data");if(callbackJsonTimeoutId_g!=undefined){window.clearTimeout(callbackJsonTimeoutId_g)}if(callbackTimeoutId_g!=undefined){window.clearTimeout(callbackTimeoutId_g)}if(jsonObj!=undefined&&jsonObj!=null&&jsonObj.ccid!=undefined&&jsonObj.ccid!=null){for(var i=0;i<jsonObj.ccid.length;i++){var ccModule=jsonObj.ccid[i];debug("ccModule..."+ccModule);if(ccModule!=undefined){var jsonParamsForDs="";if(ccModule.ds!=""||ccModule.ds!=undefined){jsonParamsForDs='{"dataSources":'+convertToJSONString(ccModule)+"}"}var touchClarityUrl="";debug("WidgetActionArray.."+widgetActionArray_g[ccModule.id]+"---"+widgetPageLocationArray_g[ccModule.id]);if(widgetActionArray_g[ccModule.id]==""||widgetActionArray_g[ccModule.id]==undefined){touchClarityUrl=widgetPageLocationArray_g[ccModule.id]+".go"}else{touchClarityUrl=widgetActionArray_g[ccModule.id]+".go"}var jsTouchClarityHttp=new BofaJsHttp(touchClarityUrl);jsTouchClarityHttp.addQueryParam("isTargetedAd","true");if(jsonParamsForDs!=""||jsonParamsForDs!=undefined){jsTouchClarityHttp.addQueryParam("params",jsonParamsForDs)}if(widgetPageLocationArray_g[ccModule.id]!=undefined){jsTouchClarityHttp.addQueryParam("pageLocation",widgetPageLocationArray_g[ccModule.id])}else{jsTouchClarityHttp.addQueryParam("pageLocation","")}jsTouchClarityHttp.addQueryParam("targetAdId",ccModule.id);var newUrlStr=jsTouchClarityHttp.createUrlString();debug("Created widget URLString = "+newUrlStr+", for divId="+divId);var divId="widget_"+ccModule.id;sendJsonRequest(newUrlStr,divId)}}}return}function convertToJSONString(jsonDataSource){var convertedJSONString="[{";for(var i=0;i<jsonDataSource.ds.length;i++){var jsonDS=jsonDataSource.ds[i];var name=jsonDS.name;var id=jsonDS.id;var coid=jsonDS.coid;convertedJSONString+='name:"'+jsonDS.name+'",id:"'+jsonDS.id+'",coid:"'+jsonDS.coid+'"'}convertedJSONString+="}]";debug("Final Json string is:"+convertedJSONString);return convertedJSONString}function getAdditionalRequestParams(){var moreParamsString="";tc_location=window.document.location.href;tc_referrer=document.referrer;moreParamsString=escape("&r="+tc_referrer);return moreParamsString}function trimValue(value){var temp=value;var obj=/^(\s*)([\W\w]*)(\b\s*$)/;if(obj.test(temp)){temp=temp.replace(obj,"$2")}var obj=/ +/g;temp=temp.replace(obj," ");if(temp==" "){temp=""}temp=temp.replace(/\n/g," ");temp=temp.replace(/\s/g," ");return temp}function debug(text){if(debug_g=="true"){alert(text)}}function boaMboxCreate(){var tmpStr=boaMboxCreate.arguments[0];if(tmpStr==""||tmpStr==undefined){return}tc_location=window.document.location.href;if(tc_location.toLowerCase().match("page_msg=signoff")!=null){tmpStr=tmpStr.replace(/BOA_HOME_SIGNON_SERVICE/g,"BOA_HOME_SIGNOFF_SERVICE");tmpStr=tmpStr.replace(/BOA_SB_HOME_SIGNON_SERVICE/g,"BOA_SB_HOME_SIGNOFF_SERVICE");tmpStr=tmpStr.replace(/BOA_HOME_SIGNON_HERO/g,"BOA_HOME_SIGNOFF_HERO");tmpStr=tmpStr.replace(/BOA_SB_HOME_SIGNON_HERO/g,"BOA_SB_HOME_SIGNOFF_HERO")}argStr="";for(var i=0;i<boaMboxCreate.arguments.length;i++){if(i==0){argVal=tmpStr}else{argVal=boaMboxCreate.arguments[i]}argStr=argStr+"'"+argVal+"'";if(i<boaMboxCreate.arguments.length-1){argStr+=","}}debug(argStr);eval("mboxCreate("+argStr+")")}function createBOAOnClickBE(trackingId,mboxName,offerCode){logBusinessEvent(trackingId,mboxName,"click",offerCode)}function createBOAImpressionBE(trackingId,mboxName,offerCode){logBusinessEvent(trackingId,mboxName,"impression",offerCode)}function createBOAImpression(coid,offerCode,mboxId,ost,tolaTemplateValue){var inputKeys=["coid","offerCode","channelName","ost","tolaTemplateValue","testimonialValue","mvtArgumentList"];var inputTolaData=getTolaData(inputKeys,createBOAImpression.arguments);var ajaxCallTimeout;if(typeof(ecloTolaWidgetTimeout)!=="undefined"){ajaxCallTimeout=parseInt(ecloTolaWidgetTimeout)}else{ajaxCallTimeout=10000}inputTolaData.isBusinessEventEnabled=isBusinessEventEnabled;renderTola(inputTolaData,ajaxCallTimeout)}function showTola(response,mboxId){var tolaContainer=$(".TargetedAd:first");if(tolaContainer!=="undefined"){var mboxClickId="#mboxClick-"+mboxId;var mboxNameClass=".mbox-name-"+mboxId;try{if(tolaContainer.find(mboxClickId)!=="undefined"&&tolaContainer.find(mboxClickId).length){tolaContainer.find(mboxClickId).append(response)}else{if(tolaContainer.find(mboxNameClass)!=="undefined"&&tolaContainer.find(mboxNameClass).length){tolaContainer.find(mboxNameClass).append(response)}else{tolaContainer.append(response)}}tolaContainer.hide();if(tolaContainer.find("#tntAltMediaModule").length){tolaContainer.find(mboxClickId).show();tolaContainer.show();boa.tola.widget.setCtaButtonAlignment()}}catch(e){tolaContainer.html("")}}}function renderTola(inputTolaData,ajaxCallTimeout){var mboxId="";if(typeof inputTolaData!="undefined"){mboxId=inputTolaData.channelName}$.ajax({type:"POST",url:"/myaccounts/ao/getTolaTemplate.go",timeout:ajaxCallTimeout,data:inputTolaData,success:function(response,textStatus){if(typeof response!=="undefined"&&response!==null){showTola(response,mboxId)}},error:function(response,textStatus,errorThrown){}})}function getTolaData(inputKeys,mboxArgs){var inputTolaData={};var mvtArgs=[];for(var i=0;i<4;i++){if(mboxArgs[i]!="undefined"){inputTolaData[inputKeys[i]]=mboxArgs[i]}}for(var i=4;i<mboxArgs.length;i++){if(mboxArgs[i]!="undefined"){if(!isNaN(mboxArgs[i])){inputTolaData.tolaTemplateValue=mboxArgs[i]}else{if(mboxArgs[i].toLowerCase().indexOf("testimonial")>-1){inputTolaData.testimonialValue=mboxArgs[i]}else{mvtArgs.push(mboxArgs[i])}}}else{break}}inputTolaData.mvtArgumentList=mvtArgs;return inputTolaData}function getMVTparams(mvtParams){var argsList=[];for(var i=5;i<mvtParams.length;i++){if(mvtParams[i]!="undefined"){argsList.push(mvtParams[i])}else{break}}return argsList}function logBusinessEvent(ADT,mboxName,eventType,offerCode){var newEventUrl="";if(isBusinessEventEnabled!=undefined&&isBusinessEventEnabled==true){if(eventUrl!=""){if(eventUrl.indexOf("?")>0){newEventUrl=eventUrl+"&"}else{newEventUrl=eventUrl+"?"}newEventUrl=newEventUrl+"ADT="+ADT+"&mboxName="+mboxName+"&eventType="+eventType+"&offerCode="+offerCode;$.ajax({type:"POST",url:newEventUrl,timeout:5000,async:false})}}}(function($){$.fn.widgetSnippetLoader=function(options){var $targetModule=this;var opts=$.extend({},$.fn.widgetSnippetLoader.defaults,options);if(typeof(opts.url)==="undefined"||opts.url===null||opts.url.length===0){widgetSnippetError("widgetSnippetLoader error: Invalid URL.  Abort.");return}if(opts.type!=="GET"&&opts.type!=="POST"){widgetSnippetError("widgetSnippetLoader error: Invalid request type.  Abort.");return}var snippetLoadImage='<div class="ajax-loading-container"><div class="'+opts.loadingImageClass+'"></div></div>';$.ajax({url:opts.url,dataType:opts.dataType,jsonpCallback:opts.jsonpCallback,crossDomain:true,cache:false,data:opts.data,type:opts.type,timeout:opts.timeout,beforeSend:function(){$targetModule.html(snippetLoadImage)},error:function(XMLHTTPRequest,textStatus,errorThrown){widgetSnippetError("widgetSnippetLoader error.  textStatus: "+textStatus+" errorThrown: "+errorThrown);if(textStatus==="timeout"&&opts.timeoutCallback!==null&&$.isFunction(opts.timeoutCallback)===true){opts.timeoutCallback(textStatus,errorThrown)}if(opts.errorCallback!==null&&$.isFunction(opts.errorCallback)===true){opts.errorCallback(textStatus,errorThrown)}},success:function(data){if(typeof(data)==="undefined"||data.length===0){widgetSnippetError("widgetSnippetLoader error.  Response is empty")}else{if(opts.callbackFunction!==null&&$.isFunction(opts.callbackFunction)===true){opts.callbackFunction(data,$targetModule,opts)}else{processResponse(data)}}},complete:function(XMLHTTPRequest,textStatus){}});function processResponse(data){if(opts.datatype==="html"){$targetModule.html(data)}else{if(opts.dataType==="jsonp"){if(data&&data.widgetData){if(data.widgetData.htmlSrc){$targetModule.html(unescape(data.widgetData.htmlSrc));return}}}else{widgetSnippetError("widgetSnippetLoader error.  datatype not html, client should implement custom callback function to parse json")}}}function widgetSnippetError(errorMessage){var snippetLoadErrorDiv='<div class="error-page-level hide"><div class="error-corner top-left"></div><div class="error-corner top-right"></div><div class="error-content">'+opts.errorMessage+'</div><div class="error-corner bottom-left"></div><div class="error-corner bottom-right"></div><div id="widgetSnippetErrorCode" class="hide"></div></div>';$targetModule.html(snippetLoadErrorDiv).find("#widgetSnippetErrorCode").append(errorMessage);if(opts.errorMessage!=null&&opts.errorMessage.length!==0){$targetModule.find(".error-page-level").removeClass("hide")}boaTLAddCustomEvent(errorMessage,"widgetSnippetError")}function debug($obj){}}})(jQuery);$.fn.widgetSnippetLoader.defaults={url:null,data:({}),type:"GET",dataType:"html",timeout:20000,loadingImageClass:"ajax-loading-image-med",errorMessage:null,callbackFunction:null,timeoutCallback:null,errorCallback:null,jsonpCallback:"jsonpCallback"};function jsonpCallback(){}function removejscssfile(filename,filetype){var targetelement=(filetype=="js")?"script":(filetype=="css")?"link":"none";var targetattr=(filetype=="js")?"src":(filetype=="css")?"href":"none";var allsuspects=document.getElementsByTagName(targetelement);for(var i=allsuspects.length;i>=0;i--){if(allsuspects[i]&&allsuspects[i].getAttribute(targetattr)!=null&&allsuspects[i].getAttribute(targetattr).indexOf(filename)!=-1){allsuspects[i].parentNode.removeChild(allsuspects[i])}}}function loadjscssfile(filename,filetype){if(filetype=="js"){var fileref=document.createElement("script");fileref.setAttribute("type","text/javascript");fileref.setAttribute("src",filename)}else{if(filetype=="css"){var fileref=document.createElement("link");fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");fileref.setAttribute("href",filename)}}if(typeof fileref!=undefined){document.getElementsByTagName("head")[0].appendChild(fileref)}}function loadAllCssJsFiles(cssjsList,type){for(var i=0;i<cssjsList.length;i++){removejscssfile(cssjsList[i],type);loadjscssfile(cssjsList[i],type)}}function checkDuplicateCsJsFile(fileNm,type){if(fileNm.indexOf("http")==0){var ind=fileNm.indexOf("/",ind+1);ind=fileNm.indexOf("/",ind+1);ind=fileNm.indexOf("/",ind+1);var newFileName=fileNm.substring(ind);return findjscssfile(newFileName,type)}}function findjscssfile(filename,filetype){var targetelement=(filetype=="js")?"script":(filetype=="css")?"link":"none";var targetattr=(filetype=="js")?"src":(filetype=="css")?"href":"none";var allsuspects=document.getElementsByTagName(targetelement);for(var i=allsuspects.length;i>=0;i--){if(allsuspects[i]&&allsuspects[i].getAttribute(targetattr)!=null&&allsuspects[i].getAttribute(targetattr).indexOf(filename)!=-1){return true}}return false}var boaCSValidate={fieldFormat:{phone:"XXX-XXX-XXXX",date_mm_yyyy:"mm/yyyy"},errorMessage:{},fn:{init:function(){boaCSValidate.fn.formatPhoneNumber()},validateFields:function(objref,message,label){var $this=$(objref);$("#boaBubbleHelpContainer").remove();$(objref).after("<div id='boaBubbleHelpContainer' style='position: relative; height: 1px; width: 1px; float:none; z-index:100;'><div id='boaBubbleHelp' class='boa-bubble-help'><div id='boaBubbleHelpContent' style='float:none;'></div><div id='boaBubbleHelpArrow' style='float:none'></div></div></div>");var boaBubbleHelp=$("#boaBubbleHelp");var boaBubbleHelpContent=$("#boaBubbleHelpContent");boaBubbleHelpContent.empty().append(message);var position={p:"absolute",t:-($(objref).height()+(boaBubbleHelp.height()+20)),l:($(objref).width()/2)-(boaBubbleHelp.width()/2)+($(objref).offset().left-boaBubbleHelp.offset().left)};boaBubbleHelp.css({position:position.p,top:position.t,left:position.l});$this.attr("haserror","true").attr("hasbubbleerror","true");var $errorLabel;if(typeof label!=="undefined"&&label.length>0){$errorLabel=label}else{$errorLabel=$("label[for='"+$this.attr("id")+"']")}$errorLabel.addClass("error-label");if($errorLabel.find("span.bubble-error-label").length===0){var errorLabelText='<span class="ada-hidden bubble-error-label"></span>'+$errorLabel.html()+' <span class="ada-hidden bubble-error-label"> '+message+"</span>";$errorLabel.html(errorLabelText)}boaTLUIFieldValidationError(message)},validateClear:function(objref,label){var $this=$(objref);$this.attr("haserror","false");var $errorLabel;if(typeof label!=="undefined"&&label.length>0){$errorLabel=label}else{$errorLabel=$("label[for='"+$this.attr("id")+"']")}$errorLabel.removeClass("error-label").find("span.bubble-error-label").remove();if($this.attr("hasbubbleerror")==="true"){$this.attr("hasbubbleerror","false");$("#boaBubbleHelpContainer").remove()}},formatPhoneNumber:function(){$(".phoneNumberFormat").live("keyup",function(){var $this=$(this);$this.val($this.val().replace(/[^0-9]/g,"").replace(/(\d\d\d)(\d\d\d)(\d)/,"$1-$2-$3"));var $val=$this.val();if($val.length>3&&$val.length<7&&$val.charAt(3)!="-"){$this.val($val.substring(0,3)+"-"+$val.substring(3))}$this.attr("isvalid",($val.length!=12)?false:true)})},npiInputToggle:function(link,options){var defaults={debug:false,autoHide:false,autoHideTime:5000};var $thisLink=$(link);options=$.extend({},defaults,options);var fieldID=$thisLink.attr("data-input-id");var fieldType=$thisLink.attr("data-input-type");fieldType=fieldType.length>0?$thisLink.attr("data-input-type"):"password";var $passwordField=$("#"+fieldID);var $fieldLabel=$("label[for="+fieldID+"]");var $textField=$("#text_"+fieldID);if(fieldType==="password"){if($textField.length===0){var cssclass=$passwordField.attr("class");var style=$passwordField.attr("style");var size=$passwordField.attr("size");var maxlength=$passwordField.attr("maxlength");var disabled=$passwordField.attr("disabled");var tabindex=$passwordField.attr("tabindex");var accesskey=$passwordField.attr("accesskey");var value=$passwordField.attr("value");var placeholder=$passwordField.attr("placeholder");textFieldTemplate=' <input name="text_'+fieldID+'" id="text_'+fieldID+'" type="text" '+(cssclass!=""?'class="'+cssclass+'"':"")+(style!=""?'style="'+style+'"':"")+(size!=""?'size="'+size+'"':"")+(maxlength!=-1?'maxlength="'+maxlength+'"':"")+(disabled!=""?'disabled="'+disabled+'"':"")+(placeholder!=undefined?'placeholder="'+placeholder+'"':"")+'autocomplete="off" />';$passwordField.after(textFieldTemplate);$textField=$("#text_"+fieldID)}$thisLink.attr("data-input-type","text").html("Hide value");$passwordField.addClass("hide");$textField.val($passwordField.val()).removeClass("hide");$fieldLabel.attr("for","text_"+fieldID);if(options.autoHide===true){$thisLink.attr("data-auto-hide","true");window.setTimeout(function(){if($thisLink.attr("data-auto-hide")==="true"){$thisLink.attr("data-auto-hide","");$thisLink.click()}},options.autoHideTime)}}else{$thisLink.attr("data-input-type","password").html("Show value").attr("data-auto-hide","");$textField.addClass("hide");$passwordField.val($textField.val()).removeClass("hide").focus();$fieldLabel.attr("for",fieldID)}}}};$(document).ready(boaCSValidate.fn.init);if(!cGB){var cGB=true;if(!cm_ClientID){var cm_ClientID="60010394"}if(!cm_HOST){var cm_HOST="testdata.coremetrics.com/cm?"}if(!cm_ClientTS){var dt=new Date();var cm_ClientTS=dt.getTime()}if(!cm_TrackLink){var cm_TrackLink="A"}if(!cm_DelayHandlerReg){var cm_DelayHandlerReg="F"}if(!cm_SkipHandlerReg){var cm_SkipHandlerReg=""}if(!cm_TrackTime){var cm_TrackTime=false}if(!cm_TrackImpressions){var cm_TrackImpressions="S"}if(!cm_SecureTags||cm_SecureTags==null){var cm_SecureTags="|2|3|"}if(!cm_FirstPartyDetect){var cm_FirstPartyDetect=false}if(!cm_DownloadExtensions){var cm_DownloadExtensions=null}if(!cm_UseUTF8){var cm_UseUTF8=false}if(!cm_FormError){var cm_FormError=""}if(!cm_FormPageID){var cm_FormPageID=false}if(cm_UseCookie==null){var cm_UseCookie=true}if(!cm_TimeoutSecs){var cm_TimeoutSecs=15}if(!cm_OffsiteImpressionsEnabled){var cm_OffsiteImpressionsEnabled=false}if(!cm_AvidHost){var cm_AvidHost="data.cmcore.com/cookie-id.js?fn=cmSetAvid"}var cm_AvidLoadTimedOut=false;if(!cmUA){var cmUA=new Object();cmUA.MSIE=2083}if(!cmDefaultLimit){var cmDefaultLimit=8197}if(cGQ==null){var cGQ=true}if(!cGO){var cGO=1024}if(!cGR){var cGR=600000}if(!encodeURIComponent){var encodeURIComponent=null}var cG8;var cG8Index;var cG6=document;var cGT;var cG7=new _cG7();cG6.cmTagCtl=cG7;var CI=cmStartTagSet;var CJ=cmSendTagSet;var cG1=0;var cm_CheckOnSubmit=false;var cG0=new Array("vn1","vn2","st","pi","rs","ec","rf","ul");var cmLastPageID=null;var cGA=null;var cmMigrationDisabled=0;var cmMigrationFrom1p_CM=1;var cmMigrationFrom1p_SA=2;var cmValidFlag_SessionContinue=1;var cmValidFlag_NewSession=2;var cmValidFlag_NewVisitor=4;var cmValidFlag_SessionReset=32;var cmSACookieName="sauid";var cmSpecCookieNames="";var cmSpecCookieValues="";var cmSpecCookiesCount=0;if(!cG4){var cG4=5000}if(!cG5){var cG5=200}var cG2=new Object();var cG3=new Object();var cGM=navigator.appVersion;var cGN=navigator.userAgent;var cGS=cGN.indexOf("Opera")>=0;var cGU=cGN.indexOf("Safari")>=0;var cmT2=-1;var cmT3=-1;var cGC="";var cGD="";var cGE="";var cGF="";var cGG="";var cGH="";var cmSubmitFlag=false;var cmFormC1="submitbuttonreset";var cmFormC2="textpasswordtextarea";var cmFormC3="select-oneselect-multiple";var cGI="";var cGJ="";var cGK="";var cGL="";var chost=null;var cci=null;CI();var dt=new Date();var cmYearOffset=0;if(dt.getFullYear){cmYearOffset=dt.getFullYear()}else{cmYearOffset=dt.getYear();if(cmYearOffset<1900){cmYearOffset+=1900}}dt.setYear(cmYearOffset+15);var cmCookieExpDate=dt.toGMTString();if(cm_UseCookie){var pi=cI("cmRS","pi","");if(pi!=""){cmLastPageID=pi}chost=cm_HOST;cm_HOST=cI("cmRS","ho",chost);cci=cm_ClientID;cm_ClientID=cI("cmRS","ci",cci);var cT3=cI("cmRS","t3","");if(cT3!=""){cGA=cT3}var cT1=cI("cmRS","t1","");if(cT1!=""&&(!cGA||cm_ClientTS-cGA<cGR)){cmAddShared("st",cT1);var ul=cI("cmRS","ul","");var rf=cI("cmRS","rf","");var cT2=cI("cmRS","t2","");var cT4=cI("cmRS","t4","");if(cm_TrackTime){cN(cT1,cT2,cT3,cT4,true,pi)}var hr=cI("cmRS","hr","");if(hr!=""){var ti=cI("cmRS","lti","");if(cm_ClientTS-ti<cGR){var nm=cI("cmRS","ln","");cM(cT1,ti,nm,hr,true,pi,ul,rf)}}var cV6=cI("cmRS","ac","");var cV7=cI("cmRS","fd","");if((cV6!="")||(cV7!="")){var ti=cI("cmRS","fti","");if(cm_ClientTS-ti<cGR){var cV9=cI("cmRS","fn","");var cV0=cI("cmRS","fu","");cL(cT1,ti,cV9,cV6,cV0,cV7,true,pi,ul,rf)}}var cError=unescape(cI("cmRS","uer",""));CH(cT1,cT3,cError,true,pi)}CC("cmRS")}if(!cGS&&(cF(4)||CD(5))){this.onload=cK(this,"onload",this.onload,"cY(e)",cY);this.onunload=cK(this,"onunload",this.onunload,"cZ(e)",cZ);if(cm_DelayHandlerReg.indexOf("L")==-1){window.cX("main")}if(cm_DelayHandlerReg.indexOf("F")==-1){cU()}}CJ(1);if(cm_OffsiteImpressionsEnabled){var cm_Avid=cI("CMAVID");if(cm_Avid==null){document.write("<script src='"+C8(null)+"//"+cm_AvidHost+"' language='javascript1.1' type='text/javascript'><\/script>");var cm_AvidLoadTimer=setTimeout("cm_AvidLoadTimedOut=true",2000)}}if(chost){cm_HOST=chost}if(cci){cm_ClientID=cci}}var cI=cI;var cE=cE;function cmStartTagSet(){if(cG8){return}cG8=new Array();cG8[0]=new _cm();cG8Index=1}function cmAddShared(nm,val){if(cG8){cG8[0][nm]=val}}function cmSendTagSet(){var request;var cG8_tmp=cG8;while((request=C7(arguments[0]))!=null){c9(request,cG8_tmp[0].ci)}cG8=null}function _CQ(pl,host,qs){this.pl=pl;this.hosts=host.split(",");if(qs){this.qs=qs}this.cM5=CR}function CR(){var a=arguments;var h=a[0]?a[0]:this.hosts[0];return this.pl+"//"+h+(this.qs?this.qs:"")}function _cG7(){this.cM0=new Object();this.uls=new Object();this.rfs=new Object();this.cTI=new Array();this.cPE=0;this.normalizeURL=c2;this.normalizeFIELDS=c21;this.normalizeFORM=c22;this.getPageID=c1;this.getPluginPageID=cmGetPluginPageID}function cmGetPluginPageID(cVA){splitClientIDs=cm_ClientID.split(";");finalClientID=cVA;for(var n=0;n<splitClientIDs.length;n++){if(splitClientIDs[n]==cVA){finalClientID=cm_ClientID;break}}return this.getPageID(finalClientID)}function c1(cVA){var pi=cG7.cM0[cVA];return pi?pi:""}function CS(cVA){var ul=cG7.uls[cVA];if(!ul){ul=window.location.href}return ul?ul:""}function CT(cVA){var rf=cG7.rfs[cVA];if(!rf){rf=cG6.referrer}return rf?rf:""}function CP(href){var h=cGT;if(!h){h=cGT=cG7.normalizeURL(window.location.href,false)}var a=href.indexOf("#");if(a>=0&&a<=h.length){var ha=h.indexOf("#");if(ha<0){ha=h.length}if(href.substring(0,a)==h.substring(0,ha)){return href.substring(a)}}return href}function c21(fields){return fields}function c22(form){return form}function c2(url,isHref){if(isHref){url=CP(url);var pfx=window.location.protocol+"//"+window.location.host;if(url.indexOf(pfx)==0){url=url.substring(pfx.length)}}return cD(url)}function c4(){for(var b in cmUA){if(cGM.indexOf(b)!=-1){return cmUA[b]}}return cmDefaultLimit}function C0(n){if(cG7){if(cG7.cTI&&cG7.cTI[n]){cG7.cTI[n].cmLD=true}cG7.cPE--;if(cG7.onResponse){cG7.onResponse(n)}}dontExit=false}function CN(n){if(cG7){cG7.cPE--;var img=null;if(cG7.cTI&&cG7.cTI[n]){img=cG7.cTI[n];img.cmLD=true}if(cG7.onError&&(!img||!img.cmTO)){cG7.onError(3,img)}}}function c6(host,n){if(cG3){cG3[host]=true}C0(n)}function CO(n){if(cG7&&cG7.cTI&&cG7.cTI[n]&&!(cG7.cTI[n].cmLD)){var img=cG7.cTI[n];img.cmTO=img.src;if(cG7.onError){cG7.onError(4,img.cmTO)}}}function c8(host){if(!cG3||cG3[host]){return true}var dt=new Date();if((dt.getTime()-cG2[host])>cG4){return true}return false}function CV(host,url,cVBH){if(!cVBH){cVBH=cm_ClientID}if((!cG2[host]||c8(host))&&(cm_OffsiteImpressionsEnabled==false||cm_Avid!=null||cm_AvidLoadTimedOut)){var img=new Image();var i=cG1;cG7.cTI[cG1++]=img;if(!cG2[host]){var dt=new Date();cG2[host]=dt.getTime();img.onload=new Function("if(c6)c6('"+host+"',"+i+");")}else{img.onload=new Function("if(C0)C0("+i+");")}img.onerror=new Function("if(CN)CN("+i+");");if(cm_OffsiteImpressionsEnabled&&cm_Avid!=null&&cm_Avid!="none"){url+="&avid="+cm_Avid}var limit=c4();if(url.length>limit){url=url.substring(0,limit-6)+"&err=O"}if(cG7.onTagSent){cG7.onTagSent(url,i)}img.src=url;img.ci=cVBH;setTimeout("if(CO)CO("+i+");",cm_TimeoutSecs*1000)}else{setTimeout('if(CV)CV("'+host+'","'+url+'","'+cVBH+'");',cG5)}}function c9(img){if(cI("CMDisabled")){return}var limit=c4();for(var h=0;h<img.hosts.length;h++){var url=img.cM5(img.hosts[h]);if(url.length>limit){url=url.substring(0,limit-6)+"&err=O"}cG7.cPE++;CV(img.hosts[h],url)}}function cC(){if(!this.ul){if(this.tid=="8"||(this.tid=="9"||this.tid=="10")){this.ul=window.location.protocol+"//"+window.location.hostname}else{this.ul=window.location.href}}if(cG8){cG8[cG8Index++]=this}else{var request=this.getImgSrc(arguments[0],1);c9(request,this.ci);return request}}function cmLogError(e){}function C4(src,tgt,compact){if(!compact){if(!src.rf){if(!document.referrer){tgt.rf=""}else{tgt.rf=document.referrer}}else{if(src!=tgt){tgt.rf=src.rf}}if(!src.ul||src.ul==""||src.ul=="(none)"){tgt.ul=window.location.href}else{if(src!=tgt){tgt.ul=src.ul}}var ul=cG7.normalizeURL(tgt.ul,false);if(ul!=""){tgt.ul=ul}}}function C5(tgt,compact){if(cm_FirstPartyDetect&&!compact){if(cI("cmRS")||cI("TestSess")){tgt.ts="Y"}else{CB("TestSess","Y");tgt.ts=cI("TestSess")}tgt.tp=cI("TestPerm");if(tgt.tp!="Y"){dt.setHours(dt.getHours()+5);CB("TestPerm","Y",dt.toGMTString());tgt.tp=cI("TestPerm")}}}function C6(tag,cV3,skipJSFParams){var qs="";if(tag.tid){qs+="tid="+tag.tid}var isPV=(tag.tid==1||(tag.pc&&tag.pc.charAt(0)=="Y"));if(!tag.lp&&isPV){tag.lp=cmLastPageID}for(var cOb in tag){if(!tag[cOb]||tag[cOb]==""||tag[cOb].constructor==Function||cOb=="qs"||cOb=="tid"){continue}if(cV3&&cV3[cOb]==tag[cOb]){continue}if(qs!=""){qs+="&"}qs+=cD(cOb)+"="+cE(cD(tag[cOb]))}if(!tag.rs&&tag.ci){if(tag.pi&&isPV){cG7.cM0[tag.ci]=tag.pi}if(tag.ul){cG7.uls[tag.ci]=tag.ul}if(tag.rf){cG7.rfs[tag.ci]=tag.rf}}if(cV3&&cm_SecureTags.indexOf("|"+tag.tid+"|")!=-1){cV3.protocol="https:"}return qs}function C8(cV3){var cm_pl=location.protocol;if(cV3&&cV3.protocol){cm_pl=cV3.protocol}if(cm_pl!="http:"&&cm_pl!="https:"){cm_pl="http:"}return cm_pl}function c0(){var a=arguments;C4(this,this,a[0]);C5(this,a[0]);var cV3=new Object();var qs=C6(this,cV3);var req=new _CQ(C8(cV3),cm_HOST,qs);return a[1]?req:req.cM5()}function C7(){var cV3,first,p,a,pl,lim,len,l,i,tq;if(!cG8||cG8.length<2){return null}cV3=cG8[0];first=cG8[1];cV3.ci=first.ci;for(i=2;i<cG8.length;i++){if(cV3.ci.indexOf(cG8[i].ci)==-1){cV3.ci+=";"+cG8[i].ci}}for(i=0;i<cG0.length;i++){p=cG0[i];if(!cV3[p]){cV3[p]=first[p]}}a=arguments;C4(first,cV3,a[0]);C5(cV3,a[0]);pl=C8(cV3);img=new _CQ(pl,cm_HOST);img.qs=C6(cV3);lim=c4();len=0;for(var h=0;h<img.hosts.length;h++){l=pl.length+img.hosts[h].length+img.qs.length;if(l>len){len=l}}for(i=1;i<cG8.length;i++){tq=C6(cG8[i],cV3,true);if(i>1&&len+tq.length+1>lim){for(j=1;j<cG8.length-i+1;j++){cG8[j]=cG8[j+i-1]}cG8.length=cG8.length-i+1;break}len+=tq.length+1;img.qs+="&"+tq}if(i==cG8.length){cG8=null}return img}function _cm(){var i,a=arguments;this.ci=cm_ClientID;for(i=0;i<a.length;i++){this[a[i]]=a[++i]}this.write=cC;this.getImgSrc=c0;this.writeImg=cC;this.st=cm_ClientTS;this.vn1="4.2.7.1BOA";if(cF(5.5)||!cF(0)){var ec=(cm_UseUTF8&&encodeURIComponent)||cGU?"utf-8":cG6.charset;if(!ec){ec=cG6.defaultCharset}if(!ec){ec=cG6.characterSet}this.ec=ec}}function cD(s){var z="";s=z+(!s?"":s);return s.split("'").join(z).split('"').join(z).split("\r").join(z).split("\n").join(z)}function cE(s){var i=0,j;while(s.charAt(i)==" "&&i!=s.length){i++}j=s.length-1;while(s.charAt(j)==" "&&j!=0){j--}s=s.substring(i,j+1);if(cm_UseUTF8&&encodeURIComponent){s=encodeURIComponent(s)}else{s=preEscape(s);s=escape(s);var regularExpression=new RegExp("%25u00","g");s=s.replace(regularExpression,"%u00")}s=s.split("+").join("%2B");return s}function preEscape(str){for(var i=160;i<256;i++){var regularExpression=new RegExp(String.fromCharCode(i),"g");str=str.replace(regularExpression,"%u00"+i.toString(16))}return str}function cF(ver){var i=cGM.indexOf("MSIE");if(i!=-1){return(parseFloat(cGM.substring(i+5))>=ver)}return false}function CD(ver){return(cGN.indexOf("Gecko")!=-1&&parseInt(cGM)>=ver)}function cI(nm,skey,cV5){var dc=cG6.cookie;var cV4=cJ(nm,dc,";");if(!skey||!cV4){if(!cV4&&cV5!=null){return cV5}return cV4}cV4=cJ(skey,cV4,"&");if(!cV4&&cV5!=null){return cV5}return unescape(cV4)}function CL(){var cookies,dc,nv,i,c=0;dc=cG6.cookie;if(dc){cookies=dc.split(";");c=cookies.length;for(i=0;i<cookies.length;i++){nv=cookies[i].split("=");if(nv.length<2||nv[1]==null||nv[1]==""){c--}}}return c}function CB(nm,val,expires,domain){var err,len,v,dc=cG6.cookie;err=null;len=val.length+1;if(!cI(nm)){len+=nm.length}if(len>4096){err=1}else{if(dc){if(CL()>=50){err=2}else{if(dc.length+len+2>4096){err=1}}}}if(err){if(cG7.onError){cG7.onError(err,name)}return false}v=nm+"="+val+";path=/";if(domain){v+=";domain="+domain}if(expires){v+=";expires="+expires}cG6.cookie=v;return true}function cmSetSubCookie(nm,skey,value,expires,domain){var currentCookieVal=cI(nm);var newCookieVal;if(!currentCookieVal){newCookieVal=skey+"="+value}else{var sep="&";var pfx=skey+"=";var begin=currentCookieVal.indexOf(pfx);if(begin>=0){if(begin>0&&currentCookieVal.charAt(begin-1)!=sep){begin=currentCookieVal.indexOf(sep+pfx);if(begin>=0){begin++}}}if(begin>=0){var valueOffset=begin+skey.length+1;var end=currentCookieVal.indexOf(sep,valueOffset);if(end<0){end=currentCookieVal.length}newCookieVal=currentCookieVal.substring(0,valueOffset)+value+currentCookieVal.substring(end)}else{newCookieVal=currentCookieVal+sep+skey+"="+value}}CB(nm,newCookieVal,expires,domain)}function CC(nm,domain){var v=cI(nm);if(v!=null){var dt=new Date();dt.setYear(1973);var v=nm+"=;path=/;expires="+dt.toGMTString();if(domain){v+=";domain="+domain}cG6.cookie=v}return v}function cJ(nm,src,sep){var pfx,s,begin,end,obj=null;pfx=nm+"=";s=sep+" ";begin=src.indexOf(s+pfx);if(begin==-1){s=sep;begin=src.indexOf(s+pfx)}if(begin==-1){begin=src.indexOf(pfx);if(begin!=0){return null}}else{begin+=s.length}end=src.indexOf(s,begin);if(end==-1){end=src.length}return src.substring(begin+pfx.length,end)}function cK(elt,type,handle,fName,f){if(handle){var event=handle.toString();if(event.indexOf(fName)==-1){if(cGU&&event.indexOf("function(")==0){if(type=="onload"){fName=event.substring(event.indexOf("{"),event.length)+";"+fName+";"}else{fName=fName+";"+event.substring(event.indexOf("{"),event.length)}}else{elt["_c_"+type]=handle;if(type=="onload"){fName="if(!e)var e=null;var ret=this._c_"+type+"("+(cF(5)?"":"e")+");"+fName+";return ret;"}else{fName="if(!e)var e=null;"+fName+";return this._c_"+type+"("+(cF(5)?"":"e")+");"}}var newfunc=new Function("e",fName);return newfunc}else{return handle}}else{return f}}function CG(e){var e;if(cF(4)){if(window.event){e=window.event.srcElement}else{e=e.target}}else{if(e){if(CD(5)){e=e.currentTarget}else{e=e.target}}}return e}function CU(cm,cVBH,pi,dest,ref){var ul,rf;cm.pi=pi?pi:c1(cVBH);if(cGQ){if(dest||ref){cm.ul=dest?dest:"";cm.rf=ref?ref:""}else{ul=CS(cVBH);rf=CT(cVBH);if(cm.pi==""||ul.indexOf("cm_")>0||(rf!=""&&rf.indexOf(window.location.protocol+"//"+window.location.host)!=0)){cm.ul=ul;cm.rf=rf}}}}function cL(t1,t3,fname,cVB,url,field,resent,pi,dest,ref){var cm=new _cm("tid","10");CU(cm,cm.ci,pi,dest,ref);cm.st=t1;cm.ti=t3;cm.fo=fname;cm.ac=cVB;cm.hr=url;cm.fi=cG7.normalizeFIELDS(field);cm.fi=cm.fi.replace(/undefined/g,"99");if(resent){cm.rs="Y"}cm.write(1)}function cM(t1,ti,name,href,resent,pi,dest,ref){var cm=new _cm("tid","8");CU(cm,cm.ci,pi,dest,ref);cm.st=t1;cm.ti=ti;cm.nm=name;cm.hr=href;var cm_crIndex=href.indexOf("cm_cr=");var cm_meIndex=href.indexOf("cm_me=");if(cm_crIndex>-1){var tempIndex=href.indexOf("&",cm_crIndex);if(tempIndex==-1){cm.cm_cr=href.substring(cm_crIndex+6)}else{cm.cm_cr=href.substring(cm_crIndex+6,tempIndex)}}if(cm_meIndex>-1){var tempIndex=href.indexOf("&",cm_meIndex);if(tempIndex==-1){cm.cm_me=href.substring(cm_meIndex+6)}else{cm.cm_me=href.substring(cm_meIndex+6,tempIndex)}}if(resent){cm.rs="Y"}cm.write(1)}function cN(t1,t2,cx,t4,resent,pi){var cm=new _cm("tid","11");cm.pi=pi?pi:c1(cm.ci);cm.st=t1;cm.lc=t2;cm.lx=t4;cm.cx=cx;if(resent){cm.rs="Y"}cm.write(1)}function CM(href){var n,len,a,q;if((n=href.indexOf("?"))==-1){n=href.lastIndexOf("/")}if(n!=-1){len=href.indexOf("#",n);if(len==-1){len=href.length}while(n!=-1&&n<len){n=href.indexOf("cm_",n);if(n!=-1){a=href.indexOf("&",n);if(a==-1){a=len}q=href.indexOf("=",n);if(q!=-1&&q<a){this[href.substring(n,q)]=href.substring(q+1,a)}n=a}}}}function CK(href,trackSP,trackRE,trackCR,trackME){var cm,link,sp,re,cr,me;if((trackSP||trackRE)&&href){cm=new _cm("tid","9");link=new CM(CP(href));if(trackSP){sp=cm.cm_sp_o=link.cm_sp_o;if(!sp){sp=cm.cm_sp=link.cm_sp}}if(trackRE){re=cm.cm_re_o=link.cm_re_o;if(!re){re=cm.cm_re=link.cm_re}}if(trackCR){if(href.indexOf("#")==-1){cr=cm.cm_cr=link.cm_cr}}if(trackME){me=cm.cm_me=link.cm_me}if(sp||re||cr||me){cm.pi=c1(cm.ci);cm.st=cm_ClientTS;cm.write(1)}}}function CH(t1,ti,msg,resent,pi){if(msg!=cGL){var cm=new _cm("tid","12");cm.pi=pi?pi:c1(cm.ci);cm.st=t1;cm.ti=ti;if(resent){cm.rs="Y"}cm.er=msg;cm.write(1);cGL=cm_FormError}}function cmFormBlurRecord(e){if(e.cmFormEleMemValue!=cmFormElementValue(e)&&e.cmFormEleMemValue!=null){cmFormReportInteraction(e)}e.form.cmEleValue=-1}function cmFormElementOnclickEvent(){var q;try{var cFE=cmFormElementValue(this);if((cmFormC1.indexOf(this.type)>=0)||(this.cmFormEleMemValue!=cFE)){if(this.type=="radio"){for(q=0;q<this.form.elements.length;q++){if(this.form.elements[q].cM2==this.cM2){this.form.elements[q].cmFormEleMemValue=null}}}this.cmFormEleMemValue=cFE;cmFormReportInteraction(this)}}catch(e){cmLogError(e)}try{if(this.cX){return this.cX()}}catch(e){cmLogError(e)}}function cmFormElementOnfocusEvent(){try{this.form.cmEleValue=this.cM2;this.cmFormEleMemValue=cmFormElementValue(this)}catch(e){cmLogError(e)}try{if(this.cmOnFocus){return this.cmOnFocus()}}catch(e){cmLogError(e)}}function cmFormElementOnblurEvent(){try{cmFormBlurRecord(this)}catch(e){cmLogError(e)}try{if(this.cmOnBlur){return this.cmOnBlur()}}catch(e){cmLogError(e)}}function cmFormElementOnchangeEvent(){try{cmFormReportInteraction(this)}catch(e){cmLogError(e)}try{if(this.cmOnChange){return this.cmOnChange()}}catch(e){cmLogError(e)}}function cmFormElementValue(e){var x;if(e.type=="checkbox"){return e.checked}else{if((cmFormC3.indexOf(e.type)>=0)&&e.options){var sel_val="";for(x=0;x<e.options.length;x++){if(e.options[x].selected==true){sel_val=sel_val+e.options[x].index}}return sel_val}else{if(cmFormC2.indexOf(e.type)>=0||e.type=="file"||e.type=="radio"){return e.value}else{return null}}}}function cO(cVC,cVB){var dt,url="",x,cFa;cVB=cVC+":"+cVB;if(cVC!=-1){if(cG6.forms[cVC]){var cF=cG6.forms[cVC],cFa=cF.attributes;url=cF.action?cF.action:cFa.action.nodeValue?cFa.action.nodeValue:cFa.getNamedItem("action").value?cFa.getNamedItem("action").value:""}}cGD=cG6.cmTagCtl.normalizeFORM(cGD);var pgID=c1(cm_ClientID);if(cm_FormPageID&&pgID!=""){var frmAr=cGD.split(";");cGD="";for(x=0;x<frmAr.length-1;x++){cGD+=pgID.split(":").join("").split(";").join("")+"_"+frmAr[x]+";"}cm_FormPageID=false}if(cV(url)&&(cVC!="-1"||(cVC=="-1"&&cmSubmitFlag==false))){dt=new Date();cGH=dt.getTime();cGF=cVB;cGE=cG7.normalizeURL(url,true);cL(cm_ClientTS,cGH,cGD,cGF,cGE,cGC,false);cGG=cGC;cGC=""}else{cGF=""}}function cmFormOnresetEvent(){var x;try{cO(this.cM1,"R")}catch(e){cmLogError(e)}try{for(x=0;x<cG6.forms[this.cM1].elements.length;x++){cG6.forms[this.cM1].elements[x].cmFormEleMemValue=false}}catch(e){cmLogError(e)}try{if(this.cQ){return this.cQ()}}catch(e){cmLogError(e)}}function cmFormOnsubmitEvent(){try{if(this.cmEleValue>-1){cmFormBlurRecord(this.elements[this.cmEleValue])}}catch(e){cmLogError(e)}try{if(this.cM1>=0&&this.cmSubmitIndex==false){cmSubmitFlag=true;this.cmSubmitIndex=true;cO(this?this.cM1:-1,"S");CE()}}catch(e){cmLogError(e)}try{if(this.cP){return this.cP()}}catch(e){cmLogError(e)}}function cmFormReportInteraction(e){var cmElementName=cG6.cmTagCtl.normalizeFIELDS(e.name?e.name:e.id?e.id:"");var cmTempFieldSeq=cGC+e.form.cM1+":"+e.cM2+":"+cmElementName.split(":").join("|").split(";").join("|")+";";if(cmTempFieldSeq.length<1000){cGC=cmTempFieldSeq}}function cmFormSubmit(){try{if(this.cmEleValue>-1){cmFormBlurRecord(this.elements[this.cmEleValue])}}catch(e){cmLogError(e)}try{if(this.cM1>=0&&this.cmSubmitIndex==false){cmSubmitFlag=true;this.cmSubmitIndex=true;cO(this?this.cM1:-1,"S");CE()}}catch(e){cmLogError(e)}try{this.cmSubmit()}catch(e){cmLogError(e)}}cG6.cmTagCtl.normalizeFORM=function(form){return form};cG6.cmTagCtl.normalizeFIELDS=function(field){return field};function cU(){if(cm_SkipHandlerReg.indexOf("F")==-1){var i,form,cV9,j,e,rdname,ei;for(i=0;i<cG6.forms.length;i++){form=cG6.forms[i];ei=0;if(!form.cM1&&!form.cmEleValue&&!form.cmSubmitIndex){form.cM1=i;form.cmEleValue=-1;form.cmSubmitIndex=false;form.radiogroup={key:"value"};try{if(cF(5)&&!cF(8)){var cm_FA=form.attributes;cV9=cm_FA.name?cm_FA.name.nodeValue:cm_FA.id?cm_FA.id.nodeValue:"UNDEFINED"}else{if(form.attributes.getNamedItem){cV9=form.attributes.getNamedItem("name").value}else{cV9=form.name}}}catch(e){cV9="UNDEFINED";cmLogError(e)}cGD+=cV9+":"+i+";";try{form.cmSubmit=form.submit;form.submit=cmFormSubmit}catch(e){cmLogError(e)}try{if(form.onsubmit&&typeof(form.onsubmit)=="function"){form.cP=form.onsubmit}form.onsubmit=cmFormOnsubmitEvent}catch(e){cmLogError(e)}try{if(form.onreset&&typeof(form.onreset)=="function"){form.cQ=form.onreset}form.onreset=cmFormOnresetEvent}catch(e){cmLogError(e)}for(j=0;j<form.elements.length;j++){e=form.elements[j];if(!e.cM1&&!e.cM2&&!e.cmFormEleMemValue){e.cM1=i;e.cM2=ei;e.cmFormEleMemValue=null;ei++;if(e.type=="radio"){rdname=e.name?e.name:e.id?e.id:"";if(rdname!=""){if(form.radiogroup[rdname]){e.cM2=form.radiogroup[rdname]}else{form.radiogroup[rdname]=e.cM2}}}if(cmFormC1.indexOf(e.type)>=0||e.type=="checkbox"||e.type=="radio"){try{if(e.onclick&&typeof(e.onclick)=="function"){e.cX=e.onclick}e.onclick=cmFormElementOnclickEvent}catch(e){cmLogError(e)}}if(cmFormC2.indexOf(e.type)>=0||cmFormC3.indexOf(e.type)>=0){try{if(e.onfocus&&typeof(e.onfocus)=="function"){e.cmOnFocus=e.onfocus}e.onfocus=cmFormElementOnfocusEvent;if(e.onblur&&typeof(e.onblur)=="function"){e.cmOnBlur=e.onblur}e.onblur=cmFormElementOnblurEvent}catch(e){cmLogError(e)}}if(e.type=="file"){try{if(e.onchange&&typeof(e.onchange)=="function"){e.cmOnChange=e.onchange}e.onchange=cmFormElementOnchangeEvent}catch(e){cmLogError(e)}}}}}}}}function cV(path){if(cm_TrackLink==true||cm_TrackLink=="A"){return true}else{if(cm_TrackLink=="E"&&path.indexOf("/")!=0){return true}var de;if((de=cm_DownloadExtensions)!=null){var p=path.lastIndexOf(".");if(p!=-1){var ext=path.substring(p);for(var e=0;e<de.length;e++){if(ext==de[e]){return true}}}}return false}}function cW(e){CI();var e=CG(e);if(e){C9(e)}CA(1);CJ(1);CE()}function C9(e){cGI="";cGJ="";cGK="";var type=e.tagName.toUpperCase();if(type=="AREA"){cGJ=e.href?e.href:e.id?e.id:"";var p=e.parentElement?e.parentElement:e.parentNode;if(p!=null){cGI=p.name?p.name:p.id?p.id:""}}else{while(type!="A"&&type!="HTML"){if(!e.parentElement){e=e.parentNode}else{e=e.parentElement}if(e){type=e.tagName.toUpperCase()}}if(type=="A"){cGJ=e.href?e.href:"";cGI=e.getAttribute("data-bactmln")?e.getAttribute("data-bactmln"):e.name?e.name:e.id?e.id:""}}var man_cm_re=e.getAttribute("manual_cm_re");if(man_cm_re){cGJ=cGJ+((cGJ.indexOf("?")>-1)?"&":"?")+"cm_re="+man_cm_re}var man_cm_sp=e.getAttribute("manual_cm_sp");if(man_cm_sp){cGJ=cGJ+((cGJ.indexOf("?")>-1)?"&":"?")+"cm_sp="+man_cm_sp}cGJ=cG7.normalizeURL(cGJ,true);if(cV(cGJ)==true){var dt=new Date();cGK=dt.getTime();cM(cm_ClientTS,cGK,cGI,cGJ,false)}else{cGJ=""}}function cX(phase){CI();var i,lnk,imp,trackSP,trackRE,trackCR,trackME;imp=cm_TrackImpressions;trackSP=(imp.indexOf("S")!=-1);trackRE=(imp.indexOf("R")!=-1);trackCR=(imp.indexOf("C")!=-1);trackME=(imp.indexOf("C")!=-1);for(i=0;i<cG6.links.length;i++){lnk=cG6.links[i];if(cm_SkipHandlerReg.indexOf("L")==-1){if(!CD(5)){lnk.onclick=cK(lnk,"onclick",lnk.onclick,"cW(e)",cW)}else{if(!lnk.cM4){lnk.addEventListener("click",cW,false);lnk.cM4=1}}}if(phase=="onload"){var tempLinkHref=lnk.href;if(lnk.getAttribute("manual_cm_re")){if(lnk.href.indexOf("?")>-1){tempLinkHref=tempLinkHref+"&cm_re="+lnk.getAttribute("manual_cm_re")}else{tempLinkHref=tempLinkHref+"?cm_re="+lnk.getAttribute("manual_cm_re")}}if(lnk.getAttribute("manual_cm_sp")){if(lnk.href.indexOf("?")>-1){tempLinkHref=tempLinkHref+"&cm_sp="+lnk.getAttribute("manual_cm_sp")}else{tempLinkHref=tempLinkHref+"?cm_sp="+lnk.getAttribute("manual_cm_sp")}}if(!lnk.cmImpressionSent){CK(tempLinkHref,trackSP,trackRE,trackCR,trackME);lnk.cmImpressionSent=1}}}CJ(1)}function cY(e){var dt=new Date();cmT2=dt.getTime();CH(cm_ClientTS,cmT2,cm_FormError,false);if(!cGS&&(cF(4)||CD(5))){window.cX("onload");cU()}cGB=null}function cZ(e){cG3=null;CI();var delay=false;if(cGC!=""){cO(-1,"U");delay=true}CA(0);CH(cm_ClientTS,cmT3,cm_FormError,false);CJ(1);if(delay){dontExit=true;var d1=new Date();var d2=new Date();for(;dontExit&&(d2-d1<1000);){d2=new Date()}}CE();if(cm_UseCookie&&cG7.cPE==0){var pi=escape(c1(cm_ClientID));CB("cmRS","t3="+cmT3+"&pi="+pi)}if(cG7.onUnload){cG7.onUnload()}if(cF(5)&&!cF(5.5)&&window.parent!=window){cG7.cTI=null}else{if(!cGU){for(var i=0;i<cG7.cTI.length;i++){cG7.cTI[i].onload=null;cG7.cTI[i].onerror=null}}}}function CA(force){var dt=new Date();var cx=dt.getTime();if(cm_TrackTime&&(cmT3==-1||force==1||(cx-cmT3)>10000)){cN(cm_ClientTS,cmT2,cx,cGA,false)}cmT3=cx}function CE(){if(cm_UseCookie){var cVF,cVG,pg,cVD,cVE="";cVF=cGA?"&t4="+cGA:"";cVG=(cGJ!="")?"&lti="+cGK+"&ln="+escape(cGI)+"&hr="+escape(cGJ):"";pg=new Object();CU(pg,cm_ClientID);var jsfpdata="";cVD="&t1="+cm_ClientTS+"&t2="+cmT2+"&t3="+cmT3+cVF+cVG+"&fti="+cGH+"&fn="+escape(cGD)+"&ac="+cGF+"&fd="+escape(cGG)+"&uer="+escape(cm_FormError)+"&fu="+escape(cGE)+"&pi="+escape(pg.pi)+"&ho="+escape(cm_HOST)+"&ci="+escape(cm_ClientID);if(pg.ul&&pg.rf&&pg.ul.length+pg.rf.length<cGO){cVE="&ul="+escape(pg.ul)+"&rf="+escape(pg.rf)}if(!CB("cmRS",cVD+cVE+jsfpdata)){if(!CB("cmRS",cVD+jsfpdata)){CB("cmRS","t3="+cmT3+"&pi="+escape(pg.pi)+jsfpdata)}}}}function cmSetAvid(id){clearTimeout(cm_AvidLoadTimer);if(id){cm_Avid=id}else{cm_Avid="none"}CB("CMAVID",cm_Avid);cm_AvidLoadTimedOut=false}function cmJSFConvertSAtoCM(value){var len=value.length;var lenSA=22;var lenCM=23;if(len<19){return null}if(value.charAt(0)!="U"&&value.charAt(0)!="u"){return null}if(len<lenSA){value=value+value.substring(len-(lenSA-len),len)}var result="99";result=result+value.substring(1,lenCM-1);return result}function debugReadCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}_cm.prototype.addTP=function(){var tp=new cmTP(new cmApp());for(var o in tp){if(tp[o]==null||tp[o]==""||tp[o].toString().indexOf("function ")==0){continue}this[o]=cE(cD(tp[o]))}return this};function cmApp(){var n=navigator,b=n.appName,c=this;if(b=="Netscape"){c.b="ns"}else{if(b=="Microsoft Internet Explorer"){c.b="ie"}else{c.b=b}}c.v=parseInt(n.appVersion)}function cmTP(c){var n=navigator,w=window.screen;this.jv=cmJv;if(c.b=="ns"&&c.v>=3){for(var i=0;i<n.plugins.length;i++){eval("this.np"+i+"=n.plugins["+i+"].name")}}if(c.v>3){if(c.v>=4&&(c.b=="ns"||c.b=="ie")){this.je=(n.javaEnabled()==true)?"y":"n"}if(c.b=="ie"){this.ce=n.cookieEnabled;this.cp=n.cpuClass}this.sw=w.width;this.sh=w.height;this.pd=w.colorDepth;if(this.pd==0){this.pd=w.pixelDepth}var fs=w.fontSmoothingEnabled;if(fs){this.fs=fs?"y":"n"}}var tz=new Date();if(tz.getTimezoneOffset()==0){this.tz="0"}else{this.tz=tz.getTimezoneOffset()/60}}document.hitImage=new Array();var cm_hitImageIndex=0,cm_pageID="",cmRandom,cmAppName,cmAppStepName,cmAppStepNumber,cmAppCategory,cmJv="1.0",cm_FormPageID=true;if(typeof(isNaN)=="function"){cmJv="1.1"}if(typeof(isFinite)=="function"){cmJv="1.2"}if(typeof(NaN)=="number"){cmJv="1.3"}if(typeof(decodeURI)=="function"){cmJv="1.5"}if(typeof(Array.forEach)=="function"){cmJv="1.6"}if(typeof(Iterator)=="object"){cmJv="1.7"}function cmSetProduction(){cm_ClientID="90010394";cm_HOST="sofa.bankofamerica.com/eluminate?"}function cmSetStaging(){cm_ClientID="90026697;60010394";cm_HOST="testdata.coremetrics.com/eluminate?"}function cmCreateConversionEventTag(_EID,_AT,_CID,_PT,_PID,_PRID,_AID,_RPID,_EATR){cmMakeTag(["tid","14","vn2","e4.0","cid",_EID,"cat",_AT,"ccid",_CID,"cpt",_PT,"cx1",_PID,"cx2",_PRID,"cx3",_AID,"cx4",_RPID,"cm_exAttr",cmAttr(_EATR)])}function cmCreateCustomError(pgID,appName,appStpNum,appStpName,errCd,catID,errMsg){cmMakeTag(["tid","7","li","207","ps1",pgID,"ps2",appName,"ps3",appStpNum,"ps4",appStpName,"ps5",errCd,"ps6",catID,"ps7",errMsg])}function cmCreateErrorTag(pgID,catID,attr){if(!pgID){pgID=getDefaultPageID(templateName)}cmMakeTag(["tid","404","pi",pgID,"pc","Y","cg",catID,"ul",document.URL,"cm_exAttr",cmAttr(attr)])}function cmCreateImpressionTag(_pi,_SP,_RE){cmMakeTag(["tid","9","vn2","e4.0","pi",_pi,"cm_sp",_SP,"cm_re",_RE,"st",cm_ClientTS])}function cmCreateManualLinkClickTag(_hr,_nm,_PID){if(cmCreateLinkTag==null&&cM!=null){var cmCreateLinkTag=cM}if(cmCreateLinkTag!=null){var dt=new Date();cmLnkT3=dt.getTime();cmCreateLinkTag(cm_ClientTS,cmLnkT3,_nm,_hr,false,_PID)}}function cmCreateManualPageviewTag(_PID,_CID,_DURL,_RURL,_EATR){cmMakeTag(["tid","1","pi",_PID,"cg",_CID,"ul",_DURL,"rf",_RURL,"cm_exAttr",cmAttr(_EATR)])}function cmCreatePageElementTag(_EID,_ECID,_EATR){cmMakeTag(["tid","15","vn2","e4.0","eid",_EID,"ecat",_ECID,"pflg",0,"cm_exAttr",cmAttr(_EATR)])}function cmCreatePageviewTag(_PID,_TN,_SSTR,_CID,_H,_ER,_ERM,_T,_F,_ADL,_APPI,_ADB,_SRES,_SESSID,_APNM,_APSNUM,_APSNM,_ATR,_SBCPM,_RURL,_DURL){if(!_PID){_PID=getDefaultPageID(_TN)}var cm_grabAdValues=cmGrabCOIDs();if(_ATR!=null){var cm_tempATR=_ATR.split("-_-");_ATR=cm_tempATR[0]+"-_-"+cm_grabAdValues+"-_--_--_--_--_--_--_--_--_--_--_--_--_-"}else{_ATR="-_-"+cm_grabAdValues+"-_--_--_--_--_--_--_--_--_--_--_--_--_-"}cmMakeTag(cmHTE(_H,_T,_ER,["tid","1","pi",_PID,"se",_SSTR,"cg",_CID,"pv5",_ERM,"pv6",_ADL,"pv7",_APPI,"pv8",_ADB,"sr",_SRES,"pv10",_SESSID,"pv1",_APNM,"pv2",_APSNUM,"pv3",_APSNM,"pv9",_SBCPM,"cm_exAttr",cmAttr(_ATR),"refURL",_RURL,"destURL",_DURL]))}function cmCreateProductDetailsTag(pgID,prID,appID,org,pid,gc,pat,sc,mc,cmpID){cmMakeTag(["tid","7","li","300","ps1",pgID,"ps2",prID,"ps3",appID,"ps4",org,"ps5",pid,"ps6",gc,"ps7",pat,"ps8",sc,"ps9",mc,"ps10",cmpID])}function cmCreateProductviewTag(_PRID,_PRNM,_CID,_SSTR,_H,_ER,_ERM,_T,_ADL,_ADB,_PCNT,_PTYP){if(_PRNM==null){_PRNM=""}if(!_PCNT&&_PCNT!==null&&_PCNT!==undefined){pc="N"}else{pc="Y"}if(_PTYP){_CID+=":"+_PTYP;li=350;ps1=_PRID;ps2=_PRNM;ps3=_CID;ps4=_PTYP}else{li=null;ps1=null;ps2=null;ps3=null;ps4=null}cmMakeTag(cmHTE(_H,_T,_ER,["tid","5","pr",_PRID,"pm",_PRNM,"cg",_CID,"pi","PRODUCT: "+_PRNM+" ("+_PRID+")","se",_SSTR,"pv5",_ERM,"pv6",_ADL,"pv8",_ADB,"li",li,"ps1",ps1,"ps2",ps2,"ps3",ps3,"ps4",ps4,"pc",pc]))}function cmCreateRegistrationTag(_PID,_TN,_CUID,_OCU,_ST,_AIN,_CID,_FRM,_ADL,_ADB,_HLNK,_OLNK,_PCNT,_ACTNM,_EF7,_EF8,_EF9,_EF10,_EF13,_EF14,_EF15){if(!_PID){_PID=getDefaultPageID(_TN)}if(!_PCNT&&_PCNT!==null&&_PCNT!==undefined){pc="N"}else{pc="Y"}_CUID=getCustIDVal();cmMakeTag(["tid","2","pi",_PID,"cd",_CUID,"sa",_ST,"cg",_CID,"pv6",_ADL,"pv8",_ADB,"rg1",_CUID,"rg2",_AIN,"rg11",_OCU,"li","101","ps1",_CUID,"ps2",_AIN,"ps3",_ST,"ps4",_OCU,"ps5",_FRM,"ps6",_HLNK,"ps7",_OLNK,"rg3",_FRM,"rg4",_HLNK,"rg5",_OLNK,"rg6",_ACTNM,"rg12",_ST,"pc",pc,"rg7",_EF7,"rg8",_EF8,"rg9",_EF9,"rg10",_EF10,"rg13",_EF13,"rg14",_EF14,"rg15",_EF15])}function cmCreateShopAction5Tag(prID,prName,catID,state,prType,sPF,attr,prQty){if(!prQty){prQty="1"}cmMakeTag(["tid","4","at","5","pr",prID,"pm",prName,"qt",prQty,"bp","1","cg",catID,"sx3",state,"sx14",prType,"sx15",sPF,"cm_exAttr",cmAttr(attr)]);deleteCookie("OrderIDcookie","/")}function cmCreateShopAction9Tag(prID,prName,custId,ordID,catID,ovDraft,fund,state,prType,sPF,instDec,attr,prQty){if(!ordID){ordID=autoOrderID()}if(!prQty){prQty="1"}custId=getCustIDVal();cmMakeTag(["tid","4","at","9","pr",prID,"pm",prName,"qt",prQty,"bp","1","cd",custId,"on",ordID,"cg",catID,"tr","1","sx1",ovDraft,"sx2",fund,"sx3",state,"sx14",prType,"sx15",sPF,"sx4",instDec,"cm_exAttr",cmAttr(attr)])}function cmMakeTag(__v){var cm=new _cm("vn2","e4.0"),i;for(i=0;i<__v.length;i+=2){var _n=__v[i];var _v=__v[i+1];if(_v&&_v!=null){cm[_n]=_v}}var datestamp=new Date();var stamp=(Math.floor(Math.random()*11111111))+datestamp.valueOf();cm.rnd=stamp;if(cI("cmTPSet")!="Y"&&cm.tid=="1"){cm.tid="6"}if(cm.tid=="6"&&cI("cmTPSet")!="Y"){if(window.location.href.toLowerCase().indexOf("bankofamerica.com")>-1){document.cookie="cmTPSet=Y; domain=bankofamerica.com; path=/"}else{document.cookie="cmTPSet=Y; path=/"}}if(cm.tid=="6"){cm.pc="Y";cm.addTP()}try{if(parent.cm_ref!=null){cm.rf=parent.cm_ref;if(cm.pc=="Y"){parent.cm_ref=document.URL}}}catch(err){}try{if(parent.cm_set_mmc){cm.ul=document.location.href+((document.location.href.indexOf("?")<0)?"?":"&")+parent.cm_mmc_params;if(cm.pc=="Y"){parent.cm_ref=cm.ul;parent.cm_set_mmc=false}}}catch(err){}if(cm.ul==null){cm.ul=window.location.href?window.location.href:document.URL?document.URL:"UNDEFINED"}var urli=cm.ul.toLowerCase().indexOf("cm_ref=");if(urli>=0){var stop=cm.ul.indexOf("&",urli+7);if(stop<0){stop=cm.ul.length}cm.rf=unescape(cm.ul.substring(urli+7,stop))}if(cm.refURL&&typeof(cm.refURL)=="string"){cm.rf=cm.refURL}if(cm.destURL&&typeof(cm.destURL)=="string"){cm.ul=cm.destURL}if(cm.tid=="1"||cm.tid=="6"){cm=cmFillAdStrings(cm)}if(this.manual_cm_mmc!=null&&cm.ul.indexOf("cm_mmc")<0&&cm.ul.indexOf("cm_ven")<0&&cm.tid!="9"){cm.ul+=((cm.ul.indexOf("&")==-1)?((cm.ul.indexOf("?")==-1)?"?":"&"):"&")+"cm_mmc="+this.manual_cm_mmc}cm.ul=cm.ul.replace(/cm_mmc/gi,"cm_mmc");cm.ul=cm.ul.replace(/cm_ven/gi,"cm_ven");cm.ul=cm.ul.replace(/cm_cat/gi,"cm_cat");cm.ul=cm.ul.replace(/cm_pla/gi,"cm_pla");cm.ul=cm.ul.replace(/cm_ite/gi,"cm_ite");if(cm.tid!="4"&&typeof(cm.cm_exAttr)!="undefined"){if(cm.tid=="6"||cm.tid=="1"){prefix="pv"}else{if(cm.tid=="14"){prefix="c"}else{if(cm.tid=="15"){prefix="e"}}}var attrNum=cm.cm_exAttr.length;if(attrNum>15){attrNum=15}for(i=0;i<attrNum;i++){Attval=prefix+"_a"+(i+1);cm[Attval]=cm.cm_exAttr[i]}cm.cm_exAttr=null}cm.writeImg()}function autoOrderID(){if((getCookie("OrderIDcookie")==undefined)||((getCookie("OrderIDcookie"))&&(getCookie("OrderIDcookie")==""))){orderID=cmGetDefaultOrderID();setCookie("OrderIDcookie",orderID,"/");return orderID}return getCookie("OrderIDcookie")}function cmAttr(attr){if(attr){return attr.split("-_-")}return null}function cmGetQS(name,str){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(str);if(results==null){return null}else{return results[1]}}function cmGrabCOIDs(){var getAnchors=document.getElementsByTagName("a");var anchorLen=getAnchors.length;var publishCOIDStr="";for(var i=0;i<anchorLen;i++){var grabHref=getAnchors[i].href;var grabSP=cmGetQS("cm_sp",grabHref);if(grabSP!=null){var splitSP=grabSP.split("-_-");if(splitSP.length<3){return null}var grabCOIDval=splitSP[2].split("_");if(window.location.href.indexOf(grabCOIDval[0])>-1){publishCOIDStr=publishCOIDStr}else{publishCOIDStr=publishCOIDStr+"|"+grabCOIDval[0]+"|"}}}return publishCOIDStr}function cmFillAdStrings(cm){var as=cmGetAdString();var l=as.length;if(l<=100){cm.pv11=as}else{cm.pv11=as.substring(0,100);if(l<=200){cm.pv12=as.substring(100,l)}else{cm.pv12=as.substring(100,200);if(l<=300){cm.pv13=as.substring(200,l)}else{cm.pv13=as.substring(200,300);if(l<=400){cm.pv14=as.substring(300,l)}else{cm.pv14=as.substring(300,400);cm.pv15=as.substring(400,l)}}}}return cm}function cmGetAdString(){var linkCt=document.links.length;var lurl;var i;var adString="";var ndx;var ad;for(i=0;i<linkCt;i++){lurl=document.links[i].href;ndx=lurl.lastIndexOf("adlink=");ndx2=lurl.lastIndexOf("/adtrack/");if((ndx>=0)&&(ndx2>0)){ad=lurl.substring(ndx+7,lurl.length).toLowerCase();if(ad.indexOf("&amp;")>=0){ad=ad.substring(0,ad.indexOf("&amp;"))}adString+="|"+ad+"|"}}return adString}function cmGetDefaultOrderID(){var dt=new Date();return dt.getTime()%10000000+""+Math.round(Math.random()*1000)}function cmHTE(h,t,e,v){v[v.length]="pv4";vl=v.length;if(h){v[vl]="HELP"}if(t){v[vl]="TOOL"}if(e){v[vl]="ERROR"}return v}function deleteCookie(name,path){if(getCookie(name)){document.cookie=name+"="+((path)?"; path="+path:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}}function getCookie(name){var dcookie=document.cookie,cname=name+"=",clen=dcookie.length,cbegin=0;while(cbegin<clen){var vbegin=cbegin+cname.length;if(dcookie.substring(cbegin,vbegin)==cname){var vend=dcookie.indexOf(";",vbegin);if(vend==-1){vend=clen}return unescape(dcookie.substring(vbegin,vend))}cbegin=dcookie.indexOf(" ",cbegin)+1;if(cbegin==0){break}}return null}function getDefaultPageID(tN){if(!tN){tN=""}var cmTitle=document.title;if(cmTitle.indexOf("Bank of America |")==0){cmTitle=cmTitle.substr(17)}else{if(cmTitle.indexOf("Banc of America Investment Services, Inc. |")==0){cmTitle=cmTitle.substr(43)}}if((tN=="interstitial : CA")||(tN=="interstitial : OOF")||(tN=="interstitial : NW")||(tN=="interstitial : MODEL")){return cmTitle+" :"+tN}else{return cmTitle+" ("+tN+")"}}function setCookie(name,value,path){document.cookie=name+"="+escape(value)+((path)?"; path="+path:"")}function getCustIDVal(){if(getCookie("CM_RegCustID")==null){var cm_NewRegCookieVal=getCookie("BOA_0020");if((cm_NewRegCookieVal==null)||(typeof(cm_NewRegCookieVal)=="undefined")){cm_NewRegCookieVal=getRegRandNum()}setBACRegCookie("CM_RegCustID",cm_NewRegCookieVal);return cm_NewRegCookieVal}else{var cm_ExistingCustIDVal=getCookie("CM_RegCustID");return cm_ExistingCustIDVal}}function setBACRegCookie(c_name,cookievalue){var exdate=new Date();exdate.setDate(exdate.getDate()+15000);var exdays=exdate.toUTCString();document.cookie=c_name+"="+cookievalue+";expires="+exdays+";path=/;domain=bankofamerica.com"}function getRegRandNum(){var dt=new Date();return dt.getTime()%10000000+""+Math.round(Math.random()*10000000)}function myNormalizeFORM(forms){return forms}function myNormalizeFIELDS(fields){return fields}function myNormalizeURL(url,isHref){return url}try{document.cmTagCtl.normalizeFIELDS=function(field){if(typeof(fieldAlias)=="object"){if(fieldAlias[field]){var cm_ENA=fieldAlias[field];return typeof(cm_ENA)=="string"&&cm_ENA!=""?cm_ENA:field}}return field}}catch(e){}try{defaultNormalize=document.cmTagCtl.normalizeURL;document.cmTagCtl.normalizeURL=function(url,isHref){var newURL=url,cmN;try{cmN=typeof(cm_NormalizeList)!="string"?"":cm_NormalizeList;if(isHref){if(newURL.indexOf("cid=")>-1){cmN="cid=;"+cmN}if(newURL.indexOf("/cid/")>-1){cmN="/cid/;"+cmN}if(newURL.indexOf("/ias/")>-1){cmN="/ias/;"+cmN}}if(cmN!=""){var blackList=cmN.split(";"),p;for(x=0;x<blackList.length;x++){p=blackList[x];if(p!=""&&newURL.indexOf(p)>-1){if(p.indexOf("=")>-1){if(newURL.indexOf("?")>-1&&newURL.indexOf("&")==-1){newURL=newURL.replace("?","")}var rg1=new RegExp(p+".*?(&|$)","i");newURL=newURL.replace(rg1,"")}if(p.indexOf("/")>-1){var rg2=new RegExp(p+".*(/|$)","i");newURL=newURL.replace(rg2,"")}}}if(defaultNormalize&&typeof(defaultNormalize)=="function"){newURL=defaultNormalize(newURL,isHref)}}}catch(e){}return newURL}}catch(e){}$(document).ready(function(){if(typeof onloader_cmCreatePageviewTag=="function"){function cmSetDD(){var testString=window.location.href;if(testString.toLowerCase().indexOf(".bankofamerica.com")>-1){testString=testString.toLowerCase();var tempArr=testString.split(".bankofamerica.com");var tempStr=tempArr[0];if(tempStr.indexOf("//")>-1){tempArr=tempStr.split("//");tempStr=tempArr[1];if(tempStr.indexOf(".")>-1){tempArr=tempStr.split(".");tempStr=tempArr[0];var tempStrPt2=tempArr[1]}if(tempStr.indexOf("www")>-1||tempStr.indexOf("secure")>-1){if(tempStr.indexOf("-")>-1){cmSetStaging()}else{if(tempStrPt2!=null){if(tempStrPt2.indexOf("ecnp")>-1){cmSetStaging()}}else{cmSetProduction()}}}else{if(tempStr.indexOf("-")>-1){if(tempStr.indexOf("sitekey")>-1){if(tempStr=="sitekey"){cmSetProduction()}else{cmSetStaging()}}else{cmSetStaging()}}else{if(tempStrPt2!=null){if(tempStrPt2.indexOf("ecnp")>-1){cmSetStaging()}}else{cmSetProduction()}}}}}}if(typeof cmSetStaging=="function"){cmSetDD()}onloader_cmCreatePageviewTag()}if(typeof onloader_cmCreateCustomErrors=="function"){onloader_cmCreateCustomErrors()}});var pipadPingCount=1;var warnTime;var getTimeoutDomain=window.location.protocol+"//"+window.location.host;var applicationName=window.location.pathname.split("/");var applicationPingURL="/"+applicationName[1]+"/ping";var vendorKeepAliveStatusURL="/myaccounts/ping-status";var vendorKeepAliveStatus=false;var fsdTimeoutSettings={pipadDomain:getTimeoutDomain||"https://secure.bankofamerica.com",fsdTimeoutSettings:false};var timeoutHandle;var countdownTime;$(document).ready(function(){if($("#timeout-bdf-module-fsdHeader-skin").length>0){if(typeof window.localStorage!="undefined"&&window.localStorage!==null&&window.localStorage!==null){var storageTestKey="sTest",storage=window.sessionStorage;try{storage.setItem(storageTestKey,"test");storage.removeItem(storageTestKey);fsdTimeoutSettings.thisSessionStorage=true;sessionStorage.setItem("globalTimeoutHtml",'<div id="timeout-bdf-module-fsdHeader-skin" class="hide">'+$("#timeout-bdf-module-fsdHeader-skin").html()+"</div>")}catch(e){if(e.code==DOMException.QUOTA_EXCEEDED_ERR&&storage.length==0){fsdTimeoutSettings.thisSessionStorage=false}}}var fsdTimeoutInterval=typeof timeoutOptionsInit!="undefined"?(typeof timeoutOptionsInit.timeoutInterval!="undefined"&&timeoutOptionsInit.timeoutInterval!=""?timeoutOptionsInit.timeoutInterval:10):10;var fsdInactiveTime=typeof timeoutOptionsInit!="undefined"?(typeof timeoutOptionsInit.inactiveTime!="undefined"&&timeoutOptionsInit.inactiveTime!=""?timeoutOptionsInit.inactiveTime:2):2;var _fsdNavTOInterval=fsdTimeoutInterval,_fsdNavInactiveTime=fsdInactiveTime;if(typeof fsdNavClientOptions!=="undefined"){if(typeof fsdNavClientOptions.timeoutInterval!=="undefined"){_fsdNavTOInterval=fsdNavClientOptions.timeoutInterval}if(typeof fsdNavClientOptions.inactiveTime!=="undefined"){_fsdNavInactiveTime=fsdNavClientOptions.inactiveTime}}var timeoutOptions={continueURL:applicationPingURL,timeoutURL:timeoutOptionsInit.timeoutURL,timeoutInterval:_fsdNavTOInterval,inactiveTime:_fsdNavInactiveTime,pipadPingInterval:5};warnTime=typeof timeoutOptions.inactiveTime!="undefined"?(timeoutOptions.inactiveTime.length>0?timeoutOptions.inactiveTime:2):2;countdownTime=warnTime;var _timeoutInterval=typeof timeoutOptions.timeoutInterval!="undefined"?(timeoutOptions.timeoutInterval.length>0?timeoutOptions.timeoutInterval:10):10;if(_timeoutInterval>20){_timeoutInterval=20;warnTime=4}var _warnRatio=(_timeoutInterval-warnTime)/_timeoutInterval;stopPipadPing=_timeoutInterval/timeoutOptions.pipadPingInterval;stopPipadPing=Math.floor(stopPipadPing);_pipadPingInterval=(timeoutOptions.pipadPingInterval)*60*1000;_timeoutInterval*=60;function setupTimeOut(){SessionTimeout.init(myWarnFunction,myTimeOut,_timeoutInterval,timeoutOptions.continueURL,_warnRatio)}function myWarnFunction(){vendorKeepAliveStatus=fsdvendorKeepAliveStatus();setTimeout(function(){if((fsdReadCookie("LPActive")!=null&&fsdReadCookie("LPActive")=="true")||vendorKeepAliveStatus){if(vendorKeepAliveStatus){vendorKeepAliveStatus=false}else{fsdcreateCookie("LPActive","false",0.002)}myHandleContinue();pipadPingCount=1;setTimeout(fsdKeepPipadSessionAlive,_pipadPingInterval)}else{fsdInvokeTimeoutModal.fsdTimeoutWarningPopup()}},900)}function myUrl(){window.location=fsdTimeoutSettings.pipadDomain+timeoutOptions.timeoutURL}function myTimeOut(){$("#timeoutDialog").dialog("close");myUrl()}if(typeof passPingURLParams!=="undefined"&&passPingURLParams){timeoutOptions.continueURL+="?extend=Y";if(typeof fsdNavClientOptions!=="undefined"&&typeof fsdNavClientOptions.sourceApplication!=="undefined"){timeoutOptions.continueURL+="&sourceapp="+fsdNavClientOptions.sourceApplication}}setupTimeOut();setTimeout(fsdKeepPipadSessionAlive,_pipadPingInterval)}});function fsdKeepPipadSessionAlive(){$.ajax({type:"POST",url:fsdTimeoutSettings.pipadDomain+applicationPingURL,success:function(){fsdPingPipad()},error:function(){}})}function myHandleContinue(){fsdExtendActiveCavSessions(SessionTimeout.continueUrl)}fsdInvokeTimeoutModal={initMask:function(){var timeoutMaskHeight=$(document).height();var timeoutMaskWidth=$(window).width();$("body").prepend('<div id="fsd-timeout-mask"></div>');$("#fsd-timeout-mask").css({width:timeoutMaskWidth,height:timeoutMaskHeight}).show().fadeTo("fast",0.5);$(document).keydown(function(e){if(e.keyCode==27){fsdInvokeTimeoutModal.modalDestroy()}})},modalDestroy:function(){$("#fsdTimeoutModal,#fsd-timeout-mask").remove()},fsdTimeoutWarningPopup:function(){var $dialogModal=$("#sa_edit_category_modal-modalClose");if($dialogModal!=undefined||$dialogModal!=""){$dialogModal.click()}fsdInvokeTimeoutModal.initMask();var winH=$(window).height();var winW=$(window).width()/2;$("body").prepend('<div id="fsdTimeoutModal" class="fsd-timeout-modal"></div>');var thisModal=$("#fsdTimeoutModal");$("#timeout-bdf-module-fsdHeader-skin #inactiveTime").html(warnTime);var modalContentClone=($("#timeout-bdf-module-fsdHeader-skin").clone()).show().css("display","block");thisModal.html(modalContentClone);thisModal.css({top:((winH)-(thisModal.height()))/2,left:((winW)-(thisModal.width())/2)});logoutTimer();thisModal.show();$("#fsd_timeoutwarning_layer_close",thisModal).focus();$(":tabbable",thisModal).keydown(function(event){if(event.keyCode!==9){return}var tabbables=$(":tabbable",thisModal),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false}else{if(event.target===first[0]&&event.shiftKey){last.focus(1);return false}}});$("#fsd_timeoutwarning_layer_close").click(function(){fsdInvokeTimeoutModal.modalDestroy()});$("#fsd_timeout_okBtn").click(function(){myHandleContinue();fsdInvokeTimeoutModal.modalDestroy();pipadPingCount=1;setTimeout(fsdKeepPipadSessionAlive,_pipadPingInterval)})}};function fsdPingPipad(){pipadPingCount++;if(pipadPingCount<stopPipadPing){setTimeout(fsdKeepPipadSessionAlive,_pipadPingInterval)}}function fsdcreateCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}document.cookie=name+"="+value+expires+"; path=/"}function fsdReadCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}function fsdCookieChatKeepAlive(){return fsdcreateCookie("LPActive","true")}window.addEventListener("bactm-tc-chat-interaction",fsdCookieChatKeepAlive);function fsdvendorKeepAliveStatus(){$.ajax({type:"GET",url:vendorKeepAliveStatusURL,cache:false,statusCode:{200:function(){vendorKeepAliveStatus=true},203:function(){}},error:function(){}});return vendorKeepAliveStatus}function fsdExtendActiveCavSessions(continueURL){var isContinueURLPresent=false;$.ajax({type:"GET",url:fsdTimeoutSettings.pipadDomain+"/myaccounts/ping/global.go",cache:false,success:function(response){try{$.each(response,function(key,value){$.get(fsdTimeoutSettings.pipadDomain+value,{_:$.now()});if(continueURL===value){isContinueURLPresent=true}});if(!isContinueURLPresent){$.get(fsdTimeoutSettings.pipadDomain+continueURL,{_:$.now()})}SessionTimeout.restartTimers()}catch(ex){console.log("ERROR in timeout bdf - fsdExtendActiveCavSessions() : "+ex.message)}}})}function logoutTimer(){var fsdModalLogoutDescriptor=document.getElementById("fsd-modal-logout-descriptor");if(fsdModalLogoutDescriptor!==null){fsdModalLogoutDescriptor.classList.remove("hide");clearInterval(timeoutHandle);var minuteInMilliseconds=60000;function countdownTimer(timeDifference){var countdownTime={minutes:0,seconds:0};var minutes=Math.floor((timeDifference%(1000*60*60))/(1000*60));var seconds=Math.floor((timeDifference%(1000*60))/1000);countdownTime.minutes=minutes;countdownTime.seconds=seconds;return countdownTime}var timeDiff=countdownTimer(countdownTime*minuteInMilliseconds);function countdown(timeDiff){var minutesTimer=timeDiff.minutes;var secondsTimer=timeDiff.seconds;function tick(){var timer=document.getElementById("logoutTimer");timer.innerHTML=minutesTimer.toString()+":"+(secondsTimer<10?"0":"")+String(secondsTimer);if(secondsTimer===0&&!(minutesTimer===0)){minutesTimer=minutesTimer-1;secondsTimer=60}if(secondsTimer>=0){timeoutHandle=setTimeout(tick,1000)}decrement();function decrement(){secondsTimer--;if(secondsTimer<0){secondsTimer=0}}}tick()}countdown(timeDiff)}}var opt="toolbar=no,directories=no,location=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no";var opt480=opt+",width=600,height=480";function englishOnlyPopUp(url){var iMyWidth;var iMyHeight;var urlToUse=url;if(null==urlToUse||undefined==urlToUse){urlToUse="/InterstitialManager.go"}iMyWidth=(window.screen.width/2)-(200+10);iMyHeight=(window.screen.height/2)-(100+50);if(window.showModalDialog){window.showModalDialog(url,self,"status,height=370,width=500,resizable=no,left="+iMyWidth+",top="+iMyHeight+",screenX="+iMyWidth+",screenY="+iMyHeight+",scrollbars=no,menubar=no,titlebar=no,toolbar=no,location=no")}else{window.open(urlToUse,self,"status,height=370,width=500,resizable=no,left="+iMyWidth+",top="+iMyHeight+",screenX="+iMyWidth+",screenY="+iMyHeight+",scrollbars=no,menubar=no,titlebar=no,toolbar=no,location=no,modal=yes")}}function SborOOLPopUp(link,contentId,appName){var redirectLink;redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href=";redirectLink=redirectLink+link;var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy")});$("#continue a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy");OOLCallback(true)});function OOLCallback(val){if(val){redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");window.open(redirectLink);val=false}return false}return false}function ORCCOutagePopUp(contentId){var options={size:"med",buttons:{}};$("#"+contentId).boaModal(options);$("#cancel a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy")});$("#Close").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy")});return false}function openHelp(url){window.open(url,"helpwindow",opt480)}function openHelpWindow(url,esLang,file){var locale;var urlValue;if(esLang=="true"){locale="es_US/"}else{locale="en_US/"}if(url.indexOf("http")==-1){urlValue="https://"+url+"/cmsContent/"+locale+file}else{urlValue=url+"/cmsContent/"+locale+file}openHelp(urlValue)}function openHelpHeaderModelWindow(url,locale,file){var urlValue;if(url=="IGNORE"){urlValue=file}else{urlValue=url+"/cmsContent/"+locale+"/"+file}openHelp(urlValue)}function openHelpHeaderNWWindow(url,file){var urlValue=url+"/"+file;openHelp(urlValue)}function openNWHelpWindow(url,file){var urlValue="https://"+url+"/"+file;openHelp(urlValue)}$(document).ready(function(){$(".olb-header-module a.arrow-link, .language-layer").mouseover(function(){showNestedLayer(".language-layer");hideNestedLayer("#SiteSearchForm")});$(".olb-header-module a.arrow-link, .language-layer").mouseout(function(){hideNestedLayer(".language-layer");showNestedLayer("#SiteSearchForm")});$(".olb-header-module a.arrow-link, .language-layer").keydown(function(e){if(e.keyCode==13||e.keyCode==144){showNestedLayer(".language-layer");hideNestedLayer("#SiteSearchForm");return false}});$(".olb-header-module a.arrow-link, .language-layer").find("div.change-lang a:last").focusout(function(e){hideNestedLayer(".language-layer");showNestedLayer("#SiteSearchForm")});if($(".bp-online-module .sign-up-skin").length>0||$(".electronic-commerce-disclosure-module .service-agree-skin").length>0||$(".dispute-select-reason-module .rc-selection-skin").length>0||$(".dispute-select-reason-module .card-info-skin").length>0||$(".dispute-credit-on-file-module").length>0||$(".dispute-confirmation-module .card-summary-skin").length>0||$(".dispute-submit-details-module .not-applied-skin").length>0){setTimeout(function(){if($("#olb-globals-header-container").length>0){var $subNavBox=$(".olb-header-module-fsdnav-skin li.fsdnav-profile-settings .fsdnav-sub-nav-box");$("div.fsdnav-subnav-fullrow",$subNavBox).remove();$subNavBox.css("padding-bottom","12px")}if($("#olb-globals-footer-container").length>0){$(".olb-footer-module-fsdnav-skin .fsd-footer-links a.fsd-locale-set").remove()}},5000)}var setSPOHoverWidth=$("a[name='onh_view_special_offers']").parents().find(".fsdnav-sub-nav-box").width()-5+"px";var setOAAHoverWidth=$("a[name='onh_new_accounts_open_an_account']").parents().find(".fsdnav-sub-nav-box").width()-5+"px";if((setSPOHoverWidth!==null)&&(typeof setSPOHoverWidth!=="undefined")){$("a[name='onh_view_special_offers']").parent().filter(".last").css("width",setSPOHoverWidth)}if((setOAAHoverWidth!==null)&&(typeof setOAAHoverWidth!=="undefined")){$("a[name='onh_new_accounts_open_an_account']").parent().filter(".last").css("width",setOAAHoverWidth)}});function MLOOLPopUp(accessToken,contentId,target){var MLlink="/myaccounts/interstitial/mlinterstitial.go?target="+target+"&app=ML&accessToken=";MLlink=MLlink+accessToken;var options={size:"small",buttons:{}};$("#mlContinue").show();$("#"+contentId).boaModal(options);$("#cancel a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy")});$("#mlContinue a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy");MLOOLCallback(true)});function MLOOLCallback(val){if(val){MLlink=MLlink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");window.location=MLlink}}return false}function OOLPopUpMLInterstitial(target,contentId,appName){var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){$(".modal-description").dialog("destroy");MLInterstitial(target);$("#continue a").unbind("click")});return false}function MLInterstitial(targetUrl){var redirectUrl;var oolsuppressionflag=false;if(isMerrillUserExpEnabled){var options={skin:"modal-flex",width:740};var logoType=isMLorMEExperienceCode;if(logoType==="ME"){$("#headerMLInterstitialPopup .ML-interstitial-main-content .ME-interstitialLogo").show();$("#headerMLInterstitialPopup .ML-interstitial-main-content .ML-interstitialLogo").hide()}else{if(logoType==="ML"){$("#headerMLInterstitialPopup .ML-interstitial-main-content .ML-interstitialLogo").show();$("#headerMLInterstitialPopup .ML-interstitial-main-content .ME-interstitialLogo").hide()}}$("#headerMLInterstitialPopup").boaFlexModal(options);var comptMode="",MLpopupCloseDiv=$("#headerMLInterstitialPopup-modalClose");if(MLpopupCloseDiv.length>0){MLpopupCloseDiv.remove()}redirectUrl=targetUrl+"&isMLInterstitialSuppressed=true"}else{redirectUrl=targetUrl}if(fsdDefaultSettings.fsdCurrLang=="es-us"){oolsuppressionflag=$("#OOLSuppression").attr("checked")||$("#fsd-OOLSuppression").attr("checked");redirectUrl=redirectUrl+"&OOLSuppVal="+oolsuppressionflag}if($("#fsd-OOLSuppression").attr("checked")){fsdCustData.fsdOOLEligibility="false"}setTimeout(function(){if(redirectUrl!==""){window.location.href=redirectUrl}},2000)}function OOLPopUp(link,contentId,appName){if(typeof(fsdNavClientOptions)!="undefined"&&fsdNavClientOptions.locale!=undefined&&(fsdNavClientOptions.locale).toLowerCase()=="es-us"&&fsdCustData.fsdOOLEligibility=="true"){var options={size:"small",buttons:{}};$("#continue").show();if(typeof contentId=="undefined"){$("#ool").boaModal(options)}else{$("#"+contentId).boaModal(options)}$("#cancelButton","#"+contentId).click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){var redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href="+encodeURIComponent(link);var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");if(appName=="coupons"){window.open(redirectLink)}else{window.location=redirectLink}$("#continue a").unbind("click")})}else{window.open(link)}return false}function OOLPopUpNewWindow(link,contentId,appName){if(typeof(fsdNavClientOptions)!="undefined"&&fsdNavClientOptions.locale!=undefined&&(fsdNavClientOptions.locale).toLowerCase()=="es-us"&&fsdCustData.fsdOOLEligibility=="true"){var options={size:"small",buttons:{}};$("#continue").show();if(typeof contentId=="undefined"){$("#ool").boaModal(options)}else{$("#"+contentId).boaModal(options)}$("#cancel a,#cancelBtn").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){var redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href="+encodeURIComponent(link);var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");window.open(redirectLink);$("#continue a").unbind("click")})}else{window.open(link)}return false}function OOLPopUpScheduleanappointment(link,contentId,appName){var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){var redirectLink;redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href=";redirectLink=redirectLink+encodeURIComponent(link);var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");if(appName=="overview"||appName=="offers"||appName=="coupons"||appName=="PIPADAO"||appName=="ADMIN_PAYMENTS"){redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked")}var newwin=window.open(redirectLink,"BankbyAppointment","directories=no,location=no,menubar=no,scrollbars=1,status=no,toolbar=no,resizable=yes,width=1030,height=750");newwin.focus();$("#continue a").unbind("click")});return false}function OOLPopUpCAS(link,contentId,appName){var redirectLink;redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href=";redirectLink=redirectLink+encodeURIComponent(link);var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy")});$("#continue a").click(function(){var $sasiModalDialog=$(".modal-description").dialog();$sasiModalDialog.dialog("close");$(".modal-description").dialog("destroy");redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");window.location=redirectLink});return false}function showNestedLayer(showLayer){if($(showLayer).hasClass("hide")){$(showLayer).removeClass("hide")}}function hideNestedLayer(hideLeayer){if(!$(hideLeayer).hasClass("hide")){$(hideLeayer).addClass("hide")}}if(typeof Crypto=="undefined"||!Crypto.util){(function(){var n=window.Crypto={},q=n.util={rotl:function(f,j){return f<<j|f>>>32-j},rotr:function(f,j){return f<<32-j|f>>>j},endian:function(f){if(f.constructor==Number){return q.rotl(f,8)&16711935|q.rotl(f,24)&4278255360}for(var j=0;j<f.length;j++){f[j]=q.endian(f[j])}return f},randomBytes:function(f){for(var j=[];f>0;f--){j.push(Math.floor(Math.random()*256))}return j},bytesToWords:function(f){for(var j=[],b=0,a=0;b<f.length;b++,a+=8){j[a>>>5]|=f[b]<<24-a%32}return j},wordsToBytes:function(f){for(var j=[],b=0;b<f.length*32;b+=8){j.push(f[b>>>5]>>>24-b%32&255)}return j},bytesToHex:function(f){for(var j=[],b=0;b<f.length;b++){j.push((f[b]>>>4).toString(16));j.push((f[b]&15).toString(16))}return j.join("")},hexToBytes:function(f){for(var j=[],b=0;b<f.length;b+=2){j.push(parseInt(f.substr(b,2),16))}return j},bytesToBase64:function(f){if(typeof btoa=="function"){return btoa(p.bytesToString(f))}for(var j=[],b=0;b<f.length;b+=3){for(var a=f[b]<<16|f[b+1]<<8|f[b+2],e=0;e<4;e++){b*8+e*6<=f.length*8?j.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-e)&63)):j.push("=")}}return j.join("")},base64ToBytes:function(f){if(typeof atob=="function"){return p.stringToBytes(atob(f))}f=f.replace(/[^A-Z0-9+\/]/ig,"");for(var j=[],b=0,a=0;b<f.length;a=++b%4){a!=0&&j.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f.charAt(b-1))&Math.pow(2,-2*a+8)-1)<<a*2|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f.charAt(b))>>>6-a*2)}return j}};n=n.charenc={};n.UTF8={stringToBytes:function(f){return p.stringToBytes(unescape(encodeURIComponent(f)))},bytesToString:function(f){return decodeURIComponent(escape(p.bytesToString(f)))}};var p=n.Binary={stringToBytes:function(f){for(var j=[],b=0;b<f.length;b++){j.push(f.charCodeAt(b)&255)}return j},bytesToString:function(f){for(var j=[],b=0;b<f.length;b++){j.push(String.fromCharCode(f[b]))}return j.join("")}}})()}(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary,b=n.SHA1=function(a,e){var g=q.wordsToBytes(b._sha1(a));return e&&e.asBytes?g:e&&e.asString?j.bytesToString(g):q.bytesToHex(g)};b._sha1=function(a){if(a.constructor==String){a=f.stringToBytes(a)}var e=q.bytesToWords(a),g=a.length*8;a=[];var k=1732584193,l=-271733879,o=-1732584194,r=271733878,x=-1009589776;e[g>>5]|=128<<24-g%32;e[(g+64>>>9<<4)+15]=g;for(g=0;g<e.length;g+=16){for(var i=k,t=l,w=o,s=r,u=x,h=0;h<80;h++){if(h<16){a[h]=e[g+h]}else{var m=a[h-3]^a[h-8]^a[h-14]^a[h-16];a[h]=m<<1|m>>>31}m=(k<<5|k>>>27)+x+(a[h]>>>0)+(h<20?(l&o|~l&r)+1518500249:h<40?(l^o^r)+1859775393:h<60?(l&o|l&r|o&r)-1894007588:(l^o^r)-899497514);x=r;r=o;o=l<<30|l>>>2;l=k;k=m}k+=i;l+=t;o+=w;r+=s;x+=u}return[k,l,o,r,x]};b._blocksize=16;b._digestsize=20})();(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary;n.HMAC=function(b,a,e,g){if(a.constructor==String){a=f.stringToBytes(a)}if(e.constructor==String){e=f.stringToBytes(e)}if(e.length>b._blocksize*4){e=b(e,{asBytes:true})}var k=e.slice(0);e=e.slice(0);for(var l=0;l<b._blocksize*4;l++){k[l]^=92;e[l]^=54}b=b(k.concat(b(e.concat(a),{asBytes:true})),{asBytes:true});return g&&g.asBytes?b:g&&g.asString?j.bytesToString(b):q.bytesToHex(b)}})();(function(){var n=Crypto,q=n.util,p=n.charenc,f=p.UTF8,j=p.Binary;n.PBKDF2=function(b,a,e,g){function k(u,h){return n.HMAC(l,h,u,{asBytes:true})}if(b.constructor==String){b=f.stringToBytes(b)}if(a.constructor==String){a=f.stringToBytes(a)}for(var l=g&&g.hasher||n.SHA1,o=g&&g.iterations||1,r=[],x=1;r.length<e;){for(var i=k(b,a.concat(q.wordsToBytes([x]))),t=i,w=1;w<o;w++){t=k(b,t);for(var s=0;s<i.length;s++){i[s]^=t[s]}}r=r.concat(i);x++}r.length=e;return g&&g.asBytes?r:g&&g.asString?j.bytesToString(r):q.bytesToHex(r)}})();(function(n){function q(b,a){var e=b._blocksize*4;return e-a.length%e}var p=n.pad={},f=function(b){for(var a=b.pop(),e=1;e<a;e++){b.pop()}};p.NoPadding={pad:function(){},unpad:function(){}};p.ZeroPadding={pad:function(b,a){var e=b._blocksize*4,g=a.length%e;if(g!=0){for(g=e-g;g>0;g--){a.push(0)}}},unpad:function(){}};p.iso7816={pad:function(b,a){var e=q(b,a);for(a.push(128);e>1;e--){a.push(0)}},unpad:function(b){for(;b.pop()!=128;){}}};p.ansix923={pad:function(b,a){for(var e=q(b,a),g=1;g<e;g++){a.push(0)}a.push(e)},unpad:f};p.iso10126={pad:function(b,a){for(var e=q(b,a),g=1;g<e;g++){a.push(Math.floor(Math.random()*256))}a.push(e)},unpad:f};p.pkcs7={pad:function(b,a){for(var e=q(b,a),g=0;g<e;g++){a.push(e)}},unpad:f};n=n.mode={};var j=n.Mode=function(b){if(b){this._padding=b}};j.prototype={encrypt:function(b,a,e){this._padding.pad(b,a);this._doEncrypt(b,a,e)},decrypt:function(b,a,e){this._doDecrypt(b,a,e);this._padding.unpad(a)},_padding:p.iso7816};f=(n.ECB=function(){j.apply(this,arguments)}).prototype=new j;f._doEncrypt=function(b,a){for(var e=b._blocksize*4,g=0;g<a.length;g+=e){b._encryptblock(a,g)}};f._doDecrypt=function(b,a){for(var e=b._blocksize*4,g=0;g<a.length;g+=e){b._decryptblock(a,g)}};f.fixOptions=function(b){b.iv=[]};f=(n.CBC=function(){j.apply(this,arguments)}).prototype=new j;f._doEncrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;k+=g){if(k==0){for(var l=0;l<g;l++){a[l]^=e[l]}}else{for(l=0;l<g;l++){a[k+l]^=a[k+l-g]}}b._encryptblock(a,k)}};f._doDecrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;k+=g){var l=a.slice(k,k+g);b._decryptblock(a,k);for(var o=0;o<g;o++){a[k+o]^=e[o]}e=l}};f=(n.CFB=function(){j.apply(this,arguments)}).prototype=new j;f._padding=p.NoPadding;f._doEncrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){var l=k%g;l==0&&b._encryptblock(e,0);a[k]^=e[l];e[l]=a[k]}};f._doDecrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){var l=k%g;l==0&&b._encryptblock(e,0);var o=a[k];a[k]^=e[l];e[l]=o}};f=(n.OFB=function(){j.apply(this,arguments)}).prototype=new j;f._padding=p.NoPadding;f._doEncrypt=function(b,a,e){var g=b._blocksize*4;e=e.slice(0);for(var k=0;k<a.length;k++){k%g==0&&b._encryptblock(e,0);a[k]^=e[k%g]}};f._doDecrypt=f._doEncrypt;n=(n.CTR=function(){j.apply(this,arguments)}).prototype=new j;n._padding=p.NoPadding;n._doEncrypt=function(b,a,e){for(var g=b._blocksize*4,k=0;k<a.length;){var l=e.slice(0);b._encryptblock(l,0);for(var o=0;k<a.length&&o<g;o++,k++){a[k]^=l[o]}if(++e[g-1]==256){e[g-1]=0;if(++e[g-2]==256){e[g-2]=0;if(++e[g-3]==256){e[g-3]=0;++e[g-4]}}}}};n._doDecrypt=n._doEncrypt})(Crypto);(function(){function n(h,m){for(var d=0,c=0;c<8;c++){if(m&1){d^=h}var v=h&128;h=h<<1&255;if(v){h^=27}m>>>=1}return d}for(var q=Crypto,p=q.util,f=q.charenc.UTF8,j=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],b=[],a=0;a<256;a++){b[j[a]]=a}var e=[],g=[],k=[],l=[],o=[],r=[];for(a=0;a<256;a++){e[a]=n(a,2);g[a]=n(a,3);k[a]=n(a,9);l[a]=n(a,11);o[a]=n(a,13);r[a]=n(a,14)}var x=[0,1,2,4,8,16,32,64,128,27,54],i=[[],[],[],[]],t,w,s,u=q.AES={encrypt:function(h,m,d){d=d||{};var c=d.mode||new q.mode.OFB;c.fixOptions&&c.fixOptions(d);h=h.constructor==String?f.stringToBytes(h):h;var v=d.iv||p.randomBytes(u._blocksize*4);m=m.constructor==String?q.PBKDF2(m,v,32,{asBytes:true}):m;u._init(m);c.encrypt(u,h,v);h=d.iv?h:v.concat(h);return d&&d.asBytes?h:p.bytesToBase64(h)},decrypt:function(h,m,d){d=d||{};var c=d.mode||new q.mode.OFB;c.fixOptions&&c.fixOptions(d);h=h.constructor==String?p.base64ToBytes(h):h;var v=d.iv||h.splice(0,u._blocksize*4);m=m.constructor==String?q.PBKDF2(m,v,32,{asBytes:true}):m;u._init(m);c.decrypt(u,h,v);return d&&d.asBytes?h:f.bytesToString(h)},_blocksize:4,_encryptblock:function(h,m){for(var d=0;d<u._blocksize;d++){for(var c=0;c<4;c++){i[d][c]=h[m+c*4+d]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[c][d]}}for(var v=1;v<w;v++){for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=j[i[d][c]]}}i[1].push(i[1].shift());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].unshift(i[3].pop());for(c=0;c<4;c++){d=i[0][c];var y=i[1][c],z=i[2][c],A=i[3][c];i[0][c]=e[d]^g[y]^z^A;i[1][c]=d^e[y]^g[z]^A;i[2][c]=d^y^e[z]^g[A];i[3][c]=g[d]^y^z^e[A]}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[v*4+c][d]}}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=j[i[d][c]]}}i[1].push(i[1].shift());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].unshift(i[3].pop());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[w*4+c][d]}}for(d=0;d<u._blocksize;d++){for(c=0;c<4;c++){h[m+c*4+d]=i[d][c]}}},_decryptblock:function(h,m){for(var d=0;d<u._blocksize;d++){for(var c=0;c<4;c++){i[d][c]=h[m+c*4+d]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[w*4+c][d]}}for(var v=1;v<w;v++){i[1].unshift(i[1].pop());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].push(i[3].shift());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=b[i[d][c]]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[(w-v)*4+c][d]}}for(c=0;c<4;c++){d=i[0][c];var y=i[1][c],z=i[2][c],A=i[3][c];i[0][c]=r[d]^l[y]^o[z]^k[A];i[1][c]=k[d]^r[y]^l[z]^o[A];i[2][c]=o[d]^k[y]^r[z]^l[A];i[3][c]=l[d]^o[y]^k[z]^r[A]}}i[1].unshift(i[1].pop());i[2].push(i[2].shift());i[2].push(i[2].shift());i[3].push(i[3].shift());for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]=b[i[d][c]]}}for(d=0;d<4;d++){for(c=0;c<4;c++){i[d][c]^=s[c][d]}}for(d=0;d<u._blocksize;d++){for(c=0;c<4;c++){h[m+c*4+d]=i[d][c]}}},_init:function(h){t=h.length/4;w=t+6;u._keyexpansion(h)},_keyexpansion:function(h){s=[];for(var m=0;m<t;m++){s[m]=[h[m*4],h[m*4+1],h[m*4+2],h[m*4+3]]}for(m=t;m<u._blocksize*(w+1);m++){h=[s[m-1][0],s[m-1][1],s[m-1][2],s[m-1][3]];if(m%t==0){h.push(h.shift());h[0]=j[h[0]];h[1]=j[h[1]];h[2]=j[h[2]];h[3]=j[h[3]];h[0]^=x[m/t]}else{if(t>6&&m%t==4){h[0]=j[h[0]];h[1]=j[h[1]];h[2]=j[h[2]];h[3]=j[h[3]]}}s[m]=[s[m-t][0]^h[0],s[m-t][1]^h[1],s[m-t][2]^h[2],s[m-t][3]^h[3]]}}}})();var fsdd=new Date();var fsdSSK="";var fsdSSK_cookie="";var turnOffLLAuthentication;var jqCoBrowse;var originalJQueryObject;var getFsdPipadDomain=window.location.protocol+"//"+window.location.host;var fsdDefaultSettings={isQuirksMode:false,Timeout:5000,fsdSessionStorage:false,fsdCurrLang:"en-us",fsdDegradedMode:false,fsdDegradedModeCookieName:"HeaderDM",fsdAOPainting:false,fsdAOPainted:false,fsdAOForceRefresh:false,fsdSecretSauce:"",fsdPipadDomain:"https://secure.bankofamerica.com",fsdCssLoaded:true,fsdSubNavLoudHeaderLego:'<span class="fsdnav-sub-nav-subHeaderText">_replace_</span>',fsdLiveLookPath:"/pa/components/utilities/livelook-util/1.2/script/livelook-util-loader.js",fsdCoBrowseJqueryPath:"/pa/global-assets/1.0/script/jquery-core.js",headerhtml:function(){return""},footerhtml:function(){return""},isCoBrowseExpandDefault:true};if(typeof(fsdNavClientOptions)!="undefined"&&fsdNavClientOptions.pipadDomainUrl!=undefined&&fsdNavClientOptions.pipadDomainUrl!=""){fsdDefaultSettings.fsdPipadDomain=fsdNavClientOptions.pipadDomainUrl}else{if(getFsdPipadDomain!=undefined&&getFsdPipadDomain!=null&&getFsdPipadDomain!=""){fsdDefaultSettings.fsdPipadDomain=getFsdPipadDomain}else{fsdDefaultSettings.fsdPipadDomain="https://secure.bankofamerica.com"}}var isIE=navigator.appVersion.indexOf("MSIE ")!=-1;var isIE7=navigator.appVersion.indexOf("MSIE 7.")!=-1;var isIE8=navigator.appVersion.indexOf("MSIE 8.")!=-1;var isIE9=navigator.appVersion.indexOf("MSIE 9.")!=-1;var isIE10=navigator.appVersion.indexOf("MSIE 10.")!=-1;var isMacOS=(navigator.platform).indexOf("Mac")!=-1;var isMobileOrTabletBrowser=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i));var totalWidth=0;var isInvestmentFlag=false;var isPreferenceWidgetInvoked=false;var profileL2Position,mouseCurrPosition={x:0,y:0};var llSiteID,llLocalTime;var passPingURLParams=true;var aoOpenAnAcc_PrefWid_TargetUrl="";var $jq=window.jQuery;$jq.fn.topFSDNavigation=function(){fsdSSK=((fsdreadCookie("fsdSSK")!=undefined)||(fsdreadCookie("fsdSSK")!=null))?fsdreadCookie("fsdSSK"):(fsdNavClientOptions!=undefined&&fsdNavClientOptions.fsdSSK!=undefined&&fsdNavClientOptions.fsdSSK!="")?fsdNavClientOptions.fsdSSK:"";if(fsdSSK!=""){fsdSSK=fsdSSK.split("|");fsdSSK_cookie=fsdSSK[0]}fsdDefaultSettings.fsdSecretSauce=fsdSSK_cookie;var topNavModuleParent=this;var topLI=$jq("ul.fsdnav-nav-list > li",topNavModuleParent);if(fsdNavClientOptions.clientName!="fiserv"||fsdNavClientOptions.clientActiveTab!="billpay"){if($jq(".olb-header-module-fsdnav-skin .fsd-bp-switch-control").is(":visible")){$jq(".olb-header-module-fsdnav-skin .fsd-bp-switch-control").addClass("fsdnav-hide")}}if(fsdNavClientOptions.clientActiveTab!=""){$jq("#fsd-li-"+(fsdNavClientOptions.clientActiveTab.toLowerCase())+" > a").addClass("fsdnav-selected")}$jq("#fsd-li-billpay a").on("mouseover",function(){boa.util.pingSite({jQuery:$jq})});$jq("ul.fsdnav-nav-list > li:first",topNavModuleParent).addClass("first");$jq("ul.fsdnav-nav-list > li:last",topNavModuleParent).addClass("last");if(isIE&&fsdDefaultSettings.isQuirksMode){$jq(".fsdnav-top-nav-menu-keyboard-msg-content").remove()}$jq.each(topLI,function(){setTabWidths($jq(this));totalWidth=totalWidth+$jq(this).width()});totalWidth=totalWidth+topLI.length;adjustTabWidth();$jq("ul.fsdnav-nav-list",topNavModuleParent).addClass("adjusted");return this.each(function(){if(fsdNavClientOptions){$jq("a#"+fsdNavClientOptions.clientActiveTab,topNavModuleParent).addClass("selected")}$jq(".fsdnav-top-nav-menu-keyboard-msg-content",topNavModuleParent).focus(function(){});$jq(".fsdnav-top-nav-menu-keyboard-msg-content",topNavModuleParent).blur(function(){});addLastMenuCloseListener($jq("ul.fsdnav-nav-list > li:last"));$jq.each(topLI,function(i){if(isIE7||isIE8){$jq("a, input.citystate-input",$jq(this)).bind("focus",function(){$jq(this).addClass("focus")});$jq("a, input.citystate-input",$jq(this)).bind("blur",function(){$jq(this).removeClass("focus")})}$jq(this).mouseenter(function(){menuOnHandler($jq(this),topLI,topNavModuleParent)});$jq(this).mouseleave(function(){keyBoardMsgContent("hide");menuOffHandler($jq(this))});$jq(this).bind("touchstart",function(event){if(!$jq(this).hasClass("hover")){event.stopPropagation();event.preventDefault();if(!$jq(this).children("div.fsdnav-sub-nav-box").length){$jq(this).trigger("click")}}menuOnHandler($jq(this),topLI,topNavModuleParent)});$jq(this).data("hasFocus",false);var isClick;$jq("a.fsdnav-top-menu-item",$jq(this)).bind("click",function(){isClick=true}).bind("keypress",function(){isClick=false});var focusHandler=function(){if(!isClick&&isKeyPressed){keyBoardMsgContent("show")}isKeyPressed=false};var isKeyPressed=false;$jq("a.fsdnav-top-menu-item",$jq(this)).keyup(function(event){isKeyPressed=true});$jq("a.fsdnav-top-menu-item",$jq(this)).focus(function(event){setTimeout(focusHandler,500);$jq.each(topLI,function(){if($jq(this).data("hasFocus")){$jq(this).trigger("liFocusOutEvent")}})});$jq("a.fsdnav-top-menu-item",$jq(this)).blur(function(event){keyBoardMsgContent("hide")});$jq("a.fsdnav-top-menu-item",$jq(this)).click(function(event){$jq(this).parents(".fsdnav-topnav").addClass("hide-keyboard-msg");keyBoardMsgContent("hide")});$jq("a.fsdnav-top-menu-item",$jq(this)).keydown(function(event){if(event.keyCode==32){event.preventDefault()}if(event.ctrlKey&&event.keyCode==32){event.preventDefault();$jq(this).parent().trigger("liFocusInEvent")}else{if(event.shiftKey&&event.keyCode==9){var $prevLIElement=$jq(this).parent().prev();$jq(this).parent().trigger("liFocusOutEvent");if($prevLIElement.length>0){event.preventDefault();$prevLIElement.children("a:first").focus()}keyBoardMsgContent("show")}else{if(event.keyCode==9){keyBoardMsgContent("show");if($jq(this).next(".fsdnav-sub-nav-box").is(":visible")){}else{$jq(this).parent().trigger("liFocusOutEvent");if($jq(this).parent().next().length>0){event.preventDefault();$jq(this).parent().next().children("a:first").focus()}else{if($jq(this).parent().next().length==0){var $nextTabbable=findNextTabbable($jq(this).parent());if($nextTabbable!=null){event.preventDefault();$nextTabbable.focus()}keyBoardMsgContent("hide")}}}}}}});$jq(this).bind("liFocusInEvent",function(){$jq(this).data("hasFocus",true);menuOnHandler($jq(this),topLI,topNavModuleParent)});$jq(this).bind("liFocusOutEvent",function(){$jq(this).data("hasFocus",false);menuOffHandler($jq(this))});if($jq(".fsdnav-hasSub").length){$jq(".fsdnav-hasSub:last",$jq(this)).addClass("last")}});$jq.each($jq("div.fsdnav-hasSub"),function(){$jq("a:last",$jq(this)).addClass("last")});if($jq("a.show-intuit-modal").length&&$jq("a.fsd-show-intuit-modal").length){$jq(".fsd-show-intuit-modal").click(function(e){$jq("a.show-intuit-modal").click()})}else{if($jq("a.show-intuit-modal").length<=0&&$jq("a.fsd-show-intuit-modal").length){$jq(".fsd-show-intuit-modal").click(function(e){fsdInvokeModal.fsdIntuitPopup()})}}$jq("#sipc-footer-model-layer").click(function(){fsdInvokeModal.fsdFooterIntuitPopup()})});function setTabWidths(thisTab){thisTab.css("position","static");$jq(".fsdnav-sub-nav-box",thisTab).css({left:-5000,display:"block",visibility:"visible"});if(fsdDefaultSettings.isQuirksMode){var thisNavsWidth=(isMacOS||isIE10||(isIE9&&$jq(".fsdnav-hasSub",thisTab).length>2))?10:3;$jq.each($jq(".fsdnav-hasSub",thisTab),function(){thisNavsWidth=thisNavsWidth+$jq(this).outerWidth(true)})}else{thisNavsWidth=$jq(".fsdnav-sub-nav-left",thisTab).outerWidth(true)}thisTab.css("position","relative");$jq(".fsdnav-sub-nav-box",thisTab).css({left:0,display:"none",visibility:"hidden",width:Math.ceil(thisNavsWidth)})}function adjustTabWidth(){var a=topNavModuleParent.width();if(totalWidth>a){var widest=null;var widestWidth=0;$jq.each(topLI,function(){if(widest==null){widest=$jq(this);widestWidth=$jq(this).width()}else{if($jq(this).outerWidth(true)>widestWidth){widest=$jq(this);widestWidth=$jq(this).width()}}});widest.css({width:widestWidth-6});$jq("> a",widest).addClass("breakfix");totalWidth=totalWidth-6;adjustTabWidth()}else{return}}function menuOnHandler(thisLI,topLI,topNavModuleParent){if(thisLI.hasClass("hover")){return}topLI.removeClass(function(){if($jq(this).hasClass("hover")){$jq("div.fsdnav-sub-nav-box",$jq(this)).css({visibility:"hidden",display:"none"})}return"hover"});thisLI.addClass("hover");var widthArray=[];$jq("div.fsdnav-sub-nav-box",thisLI).filter(function(){return $jq(this).find(".fsdnav-hasSub").length===1}).addClass("single").end().delay(0,function(){var allSubNavs=($jq(".fsdnav-hasSub",$jq(this)));var thisoffset=thisLI.offset().left;var navRightEdge=(topNavModuleParent.outerWidth(true)+topNavModuleParent.offset().left);$jq(this).attr("tabindex","1").focus();$jq(this).addClass("subnav-visible");$jq(this).css({visibility:"visible",display:"block"}).slideDown("fast");if($jq(".fsdnav-hasSub",thisLI).length>0){if(fsdDefaultSettings.isQuirksMode){var thisNavsWidth=(isMacOS||isIE10||(isIE9&&$jq(".fsdnav-hasSub",thisLI).length>2))?4:3;$jq.each(allSubNavs,function(i){thisNavsWidth=thisNavsWidth+$jq(this).outerWidth(true)})}else{var thisNavsWidth=$jq(".fsdnav-sub-nav-left",thisLI).outerWidth(true)}if(navRightEdge<(thisoffset+thisNavsWidth)){$jq(this).css("left",(navRightEdge-(thisoffset+thisNavsWidth))+"px")}else{$jq(this).css("left",(-1))}if(thisLI.attr("id")=="fsd-li-accounts"&&!fsdDefaultSettings.fsdAOPainted&&!fsdDefaultSettings.fsdAOPainting){getAO(thisLI)}else{if(fsdDefaultSettings.isQuirksMode){$jq(this).width(Math.ceil(thisNavsWidth))}}}else{$jq.each(allSubNavs,function(){widthArray.push($jq(this).width())});$jq(".fsdnav-sub-nav-box",$jq(this)).width(widthArray.sort().pop())}fsdEqualHeight(allSubNavs)});logEcloPreSelOffrImpressionTag(thisLI);callBAMDFlyoutPingAction(thisLI)}function callBAMDFlyoutPingAction(thisLI){if(($jq("a[name='onh_special_offers_and_deals']").next(".fsdnav-sub-nav-box").find(".bamd-flyout-module").is(":visible"))){$jq.ajax({url:fsdDefaultSettings.fsdPipadDomain+"/myaccounts/bamdFlyoutPing.go",dataType:"json",cache:false,type:"POST",contentType:"application/json; charset=utf-8",success:function(){},error:function(){},complete:function(){}})}}function logEcloPreSelOffrImpressionTag(thisLI){$jq("a[name='onh_eclo_offer_learn_more'], a[name='onh_eclo_offer_learn_more_es']").live("click",function(e){e.preventDefault()});if(($jq("a[name='onh_special_offers_and_deals']").next(".fsdnav-sub-nav-box").find(".fsdnav-eclo-offer").is(":visible"))||($jq("a[name='onh_new_accounts']").next(".fsdnav-sub-nav-box").find(".fsdnav-eclo-offer").is(":visible"))){var currentEle=thisLI,newURL="",cm_sp_tag="";var thisLearnMore=currentEle.find(".fsdnav-eclo-offer-link");if(typeof thisLearnMore.data("cmsphref")!=="undefined"){newURL=thisLearnMore.data("cmsphref")}thisLearnMore.attr("href",newURL);if(typeof thisLearnMore.data("cmspvalue")!=="undefined"){cm_sp_tag=thisLearnMore.data("cmspvalue")}if(typeof cmSetStaging=="function"){var getCurrentPageID=cG7.cM0[cm_ClientID];$jq(document).one("bactm_dcLibsLoaded",function(){cmCreateImpressionTag(getCurrentPageID,cm_sp_tag,null)})}}}function menuOffHandler(thisLI){thisLI.removeClass("hover");$jq("div.fsdnav-sub-nav-box",thisLI).stop(true,true).delay(0,function(){$jq(this).css({visibility:"hidden",display:"none"});if($jq(this).hasClass("subnav-visible")){$jq(this).removeClass("subnav-visible")}});if(thisLI.attr("id")=="fsd-li-accounts"&&fsdDefaultSettings.fsdAOPainting){fsdDefaultSettings.fsdAOPainting=false}}function getAO(accountL1Tab){if(fsdDefaultSettings.fsdAOPainting||fsdDefaultSettings.fsdAOPainted){return}fsdDefaultSettings.fsdAOPainting=true;if(typeof fsdCustData=="object"&&fsdCustData.fsdNavAccountBalances!=undefined&&!fsdDefaultSettings.fsdAOForceRefresh){var data=$jq.extend(fsdCustData,$jq.parseJSON(blackBox(fsdCustData.fsdNavAccountBalances)));buildAOSnippet(accountL1Tab,data)}else{if(fsdNavClientOptions.fsdNavAccountBalances!=undefined&&!fsdDefaultSettings.fsdAOForceRefresh){buildAOSnippet(accountL1Tab,fsdNavClientOptions.fsdNavAccountBalances)}else{var fsdgsid_cookie=(fsdreadCookie("GSID")!=undefined||fsdreadCookie("GSID")!=null)?(fsdreadCookie("GSID").search(/^[a-z0-9]+$/i)==0)?fsdreadCookie("GSID"):"null":"null";var fsdhts_cookie=(fsdreadCookie("HTS")!=undefined||fsdreadCookie("HTS")!=null)?fsdreadCookie("HTS"):"null";$jq.ajax({url:fsdDefaultSettings.fsdPipadDomain+"/myaccounts/accounts-overview/accountsNav.go",contentType:"application/javascript",dataType:"json",xhrFields:{withCredentials:true},data:{sid:fsdgsid_cookie,ts:fsdhts_cookie,request_locale:fsdDefaultSettings.fsdCurrLang},timeout:fsdDefaultSettings.Timeout,crossDomain:true,jsonp:false,cache:false,success:function(data){fsdao(data)},error:function(error){console.log("L2 Nav error :"+error);fsdDefaultSettings.fsdAOPainting=false}})}}}function fsdao(data){if(typeof(data)!="undefined"||data.length!=0){buildAOSnippet($jq("#fsd-li-accounts"),data)}}function buildAOSnippet(accountL1Tab,data){var fsdAODiv=$jq(".fsd-accounts-overview",accountL1Tab);if(!fsdDefaultSettings.fsdAOPainted&&data!=undefined){if(data.numAccounts<=0){fsdAODiv.remove()}else{var fsdInvestmentAccount=(data.investment!=undefined)?(data.investment).length:0;var fsdBusinessAccount=(data.business!=undefined)?(data.business).length:0;var fsdPersonalAccount=(data.personal!=undefined)?(data.personal).length:0;var fsdSafeAccount=(data.safe!=undefined)?(data.safe).length:0;var fsdCorpAccount=(data.corp!=undefined)?(data.corp).length:0;var fsdHomeLoanNavAccount=(data.homeLoan!=undefined)?(data.homeLoan).length:0;function checkIsSingleAcctTypeMode(acctTypeArray){var numAcctTypes=0;if(acctTypeArray&&acctTypeArray.constructor===Array){acctTypeArray.forEach(function(acctType){if(acctType>0){numAcctTypes++}})}if(numAcctTypes<=1){return true}else{return false}}var isSingleAcctTypeMode=checkIsSingleAcctTypeMode([fsdInvestmentAccount,fsdBusinessAccount,fsdPersonalAccount,fsdSafeAccount,fsdCorpAccount,fsdHomeLoanNavAccount]);var AOtitle="";var viewallacct='<div class="fsd-divider"></div><a class="fsd-viewall" href="javascript:fsdgoto(\'accountsoverview\')" name="onh_Accounts_View_All_Accounts">'+(data.localizedViewAllXXAccountsLabel).replace("_xx_",data.numAccounts)+"</a>";var viewallacctgeneric='<div class="fsd-divider"></div><a class="fsd-viewall" href="javascript:fsdgoto(\'accountsoverview\')" name="onh_Accounts_View_All_Accounts">'+data.localizedViewAllAccountsLabel+"</a>";var tempdata="";var cmTagName="";var aoListMarkup="";$jq(".fsd-loader",fsdAODiv).remove();if(isSingleAcctTypeMode){if(fsdInvestmentAccount>0){tempdata=data.investment;cmTagName="Investment_Accounts"}if(fsdBusinessAccount>0){tempdata=data.business;cmTagName="Business_Accounts"}if(fsdPersonalAccount>0){tempdata=data.personal;cmTagName="Personal_Accounts"}if(fsdSafeAccount>0){tempdata=data.safe;cmTagName="Safe_Accounts"}if(fsdCorpAccount>0){tempdata=data.corp;cmTagName="Corp_Accounts"}if(fsdHomeLoanNavAccount>0){tempdata=data.homeLoan;cmTagName="HomeLoanNav_Accounts"}if(data.numAccounts==1){aoListMarkup=AOtitle+getAOListLoop(tempdata,1,cmTagName);fsdAODiv.append(aoListMarkup).addClass("last").css("height","auto");fsdAODiv.append('<div class="fsd-divider"></div>');fsdAODiv.append(($jq(".fsdnav-hasSub",accountL1Tab)).eq(1).removeClass())}else{if(data.numAccounts>1&&data.numAccounts<10){aoListMarkup=AOtitle+getAOListLoop(tempdata,data.numAccounts,cmTagName)+viewallacctgeneric;fsdAODiv.append(aoListMarkup)}else{if(data.numAccounts>9){aoListMarkup=AOtitle+getAOListLoop(tempdata,7,cmTagName)+viewallacct;fsdAODiv.append(aoListMarkup)}}}}else{if(typeof(data.order)=="undefined"){data.order=["homeLoan","personal","safe","investment","business","corp"]}for(var i=0;i<=data.order.length-1;i++){var AcctType=data.order[i];AcctType=AcctType.replace(/"/g,"");var cmTag_Account_Name=AcctType+"_Accounts";var Account_Section_Title;switch(AcctType){case ("personal"):Account_Section_Title=data.localizedPersonalLabel;num_Accounts=fsdPersonalAccount;break;case ("business"):Account_Section_Title=data.localizedBusinessLabel;num_Accounts=fsdBusinessAccount;break;case ("safe"):Account_Section_Title=data.localizedSafeLabel;num_Accounts=fsdSafeAccount;break;case ("investment"):isInvestmentFlag=true;Account_Section_Title=data.localizedInvestmentLabel;num_Accounts=fsdInvestmentAccount;break;case ("corp"):Account_Section_Title=data.localizedCorpLabel;num_Accounts=fsdCorpAccount;break;case ("homeLoan"):Account_Section_Title=data.localizedHomeLoanNavLabel;num_Accounts=fsdHomeLoanNavAccount;break;default:num_Accounts=0;break}if(num_Accounts>=1){aoListMarkup+=(fsdDefaultSettings.fsdSubNavLoudHeaderLego).replace("_replace_",Account_Section_Title);aoListMarkup+=getAOListLoop(data[AcctType],num_Accounts,cmTag_Account_Name)}}(data.numAccounts<10)?(aoListMarkup+=viewallacctgeneric):(aoListMarkup+=viewallacct);fsdAODiv.append(AOtitle+aoListMarkup);var thisNavsWidth=(isMacOS||isIE10)?5:(isIE9&&accountL1Tab.attr("id")=="fsd-li-accounts")?4:3;$jq(".fsdnav-hasSub",accountL1Tab).each(function(){thisNavsWidth=thisNavsWidth+$jq(this).outerWidth()});$jq(".fsdnav-sub-nav-box",accountL1Tab).width(thisNavsWidth)}}$jq("#fsd-li-accounts .fsdnav-hasSub").css("height","");fsdEqualHeight($jq("#fsd-li-accounts .fsdnav-hasSub"));$jq("#fsd-li-accounts .fsdnav-sub-nav-box").css({left:-5000,display:"block",visibility:"visible",width:0});var thisNavsWidth=(isMacOS||isIE10)?5:(isIE9)?4:3;$jq.each($jq("#fsd-li-accounts .fsdnav-hasSub"),function(){thisNavsWidth=thisNavsWidth+$jq(this).outerWidth()});if(data.numAccounts==1){thisNavsWidth=thisNavsWidth+2}$jq("#fsd-li-accounts .fsdnav-sub-nav-box").css({left:-1,width:thisNavsWidth});if(data.numAccounts==1){removeClassMatch($jq("#fsd-li-accounts .fsdnav-sub-nav-box"),"dynawidthnav-w-")}fsdDefaultSettings.fsdAOPainted=true;fsdDefaultSettings.fsdAOPainting=false;try{if(typeof cX=="function"){cX("onload")}}catch(e){console.log("ERROR: olb-header-module-FSD.js: "+e.message)}}}function getAOListLoop(data,numAcctShown,cmTag){var returnList="";var redirectUrl="";var targetPage="";var negBalance,theUrl,oolClick,alertIconVisiblility,isOOLFlag;$jq.each(data,function(i){if(i>=numAcctShown){return}isOOLFlag=(this.isOOLPopUpReq&&fsdDefaultSettings.fsdCurrLang==="es-us")?true:false;negBalance=(this.negativeBalanceEnabled)?" ao-neg-balance":"";oolClick="";adaVisiblility="<p>";if(this.fraudLinkEnabled!=""){adaVisiblility='<p class="fsdnav-alerticon"><span class="fsdnav-ada-hidden">Account on Hold </span>'}if(typeof(this.accountType)!="undefined"&&this.accountType=="investment"&&!this.accountLinkDisabled){var adx=this.additionalParam.substr(this.additionalParam.indexOf("=")+1);if(this.isLMAAccount){targetPage="accountbalances"}else{targetPage="accountholding"}redirectUrl="/myaccounts/interstitial/mlinterstitial.go?target="+targetPage+"&app=ML&accessToken=";if(isMLSSOEnabled&&fsdDefaultSettings.fsdCurrLang==="es-us"&&(typeof isOOL!="undefined"&&isOOL)){theUrl="javascript:void(0)";oolClick=" onclick=\"OOLPopUpMLInterstitial('"+redirectUrl+adx+"','ool','pipadao')\""}else{if(isMLSSOEnabled){theUrl="javascript:MLInterstitial('"+redirectUrl+adx+"')"}else{theUrl="javascript:fsdgoto('"+(this.url).split("=")[1]+"&"+this.additionalParam+"&fsd=y')";try{console.log("Investment Account--else block "+this.accountDisplayName)}catch(ex2){console.log("ERROR: olb-header-module-FSD.js: "+ex2.message)}}}}else{if(isOOLFlag){var target="acctDetails";var targetLink=(this.url).split("target=")[1];if(typeof(targetLink)!=="undefined"&&targetLink!==null&&targetLink!==""&&targetLink.toLowerCase()==="acmloanstatus"){target="acmloanstatus"}theUrl="javascript:void(0)";oolClick=" onclick=\"OOLPopUp('"+fsdgeturl(target)+"&"+this.additionalParam+"','ool','pipadao')\""}else{theUrl="javascript:fsdgoto('"+(this.url).split("=")[1]+"&"+this.additionalParam+"&fsd=y')"}}returnList+='<a href="'+theUrl+'" name="onh_Accounts_'+cmTag+'"'+oolClick+' class="fsd_accounts_link" title="'+this.accountToggleName+'">'+adaVisiblility+this.accountDisplayName+'</p><span class="fsd-ao-amount TL_NPI_Amt'+negBalance+'">'+this.balance+"</span></a>"});return returnList}function addLastMenuCloseListener($liElement){var $nextTabbable=findNextTabbable($liElement);if($nextTabbable!=null){$nextTabbable.focus(function(event){$liElement.trigger("liFocusOutEvent")})}}function findNextTabbable($element){var $nextElement;var $nextTabbable;if($element.is("body")){return null}$nextElement=$element.next();if($nextElement.is(":tabbable")){return $nextElement}$nextTabbable=$element.next().find(":tabbable:first");if($nextElement.length==0){$nextTabbable=findNextTabbable($element.parent())}else{if($nextTabbable.length==0){$nextTabbable=findNextTabbable($nextElement)}}return $nextTabbable}};function keyBoardMsgContent(flag){var lag=100,show=function(){$jq(".fsdnav-top-nav-menu-keyboard-msg-content").removeClass("fsdnav-ada-hidden");if(fsdDefaultSettings.fsdCurrLang=="es-us"){$jq(".fsdnav-topnav ul.fsdnav-nav-list li a img.fsd-barker-new").css("top","-29px");$jq(".fsdnav-top-nav-menu-keyboard-msg-content").css("height","20px").css("margin-top","-14px")}else{$jq(".fsdnav-topnav ul.fsdnav-nav-list li a img.fsd-barker-new").css("top","-20px");$jq(".fsdnav-top-nav-menu-keyboard-msg-content").css("margin-top","-6px")}},hide=function(){$jq(".fsdnav-top-nav-menu-keyboard-msg-content").addClass("fsdnav-ada-hidden");$jq(".fsdnav-topnav ul.fsdnav-nav-list li a img.fsd-barker-new").css("top","-9px")};if(flag==="show"){setTimeout(show,lag)}else{setTimeout(hide,lag)}}$jq.fn.topFSDHeader=function(){var topFSDHeader=this;var topLI=$jq("ul.fsdnav-header-links > li",topFSDHeader);return this.each(function(){$jq(".fsdnav-header-links > li:last,.fsdnav-hasSub:last",topFSDHeader).addClass("last");if(fsdNavClientOptions.customerName!=""){if(fsdCustData.isSmallBusinessCustomer=="true"){$jq(".fsdnav-header-links li.fsdnav-username").html(fsdNavClientOptions.customerName)}else{$jq(".fsdnav-header-links li.fsdnav-username").html("<a name='onh_customer_info' class='view-contact-details-redirection-link' href=\"javascript:fsdgoto('view_contact_details');\">"+fsdNavClientOptions.customerName+"<span class='fsdnav-ada-hidden'>Click here to view your contact details</span></a>");$jq(".fsdnav-header-links li.fsdnav-username").css({cursor:"pointer"})}}else{}(fsdNavClientOptions.customerEmail!="")?$jq(".fsdnav-header-links li.fsdnav-profile-settings .emailPlaceholder").html(fsdNavClientOptions.customerEmail):"";$jq.each(topLI,function(i){if(isIE7){$jq("a",$jq(this)).bind("focus",function(){$jq(this).addClass("focus")});$jq("a",$jq(this)).bind("blur",function(){$jq(this).removeClass("focus")})}$jq(this).data("hasFocus",false);$jq("> a",$jq(this)).focus(function(event){keyBoardMsgContent("hide");$jq.each(topLI,function(){if($jq(this).data("hasFocus")){$jq(this).trigger("liFocusOutEvent")}})});$jq("a.fsdnav-profile-settings-link",$jq(this)).focus(function(event){$jq("a.fsdnav-profile-settings-link").attr("aria-busy",true).attr("aria-live","polite");keyBoardMsgContent("hide");$jq(this).trigger("liFocusInEvent")});$jq("a:first",$jq(this)).keydown(function(event){if(event.keyCode==32){event.preventDefault()}if(event.ctrlKey&&event.keyCode==32){event.preventDefault();$jq(this).parent().trigger("liFocusInEvent")}else{if(event.shiftKey&&event.keyCode==9){$jq(this).parent().trigger("liFocusOutEvent")}else{if(event.keyCode==9){if($jq(this).next(".fsdnav-sub-nav-box").is(":visible")){}else{$jq(this).parent().trigger("liFocusOutEvent");if($jq(this).parent().next().length>0){event.preventDefault();$jq(this).parent().next().children("a:first").focus()}else{if($jq(this).parent().next().length==0){var $nextTabbable=findNextTabbable($jq(this).parents("ul"));if($nextTabbable.length){if(!isIE7){event.preventDefault()}$nextTabbable.focus()}}}}}}}});$jq("div.fsdnav-hasSub a",$jq(this)).keydown(function(event){if(event.keyCode==38){var $prevItem=($jq(this).prev("a").length!=0)?$jq(this).prev("a"):$jq(this).parent().prev().children("a:last");if($prevItem.length!=0){$prevItem.focus()}}else{if(event.keyCode==40){var $nextItem=($jq(this).next("a").length!=0)?$jq(this).next("a"):$jq(this).parent().next().children("a:first");if($nextItem.length!=0){$nextItem.focus()}}}});$jq(this).mouseenter(function(){keyBoardMsgContent("hide");menuOnHandler($jq(this))});$jq(this).mouseleave(function(){menuOffHandler($jq(this))});$jq(this).data("hasFocus",false);$jq("a.fsdnav-top-menu-item",$jq(this)).focus(function(event){$jq.each(topLI,function(){if($jq(this).data("hasFocus")){$jq(this).trigger("liFocusOutEvent")}})});$jq(this).bind("liFocusInEvent",function(){$jq(this).data("hasFocus",true);menuOnHandler($jq(this),topLI,topFSDHeader)});$jq(this).bind("liFocusOutEvent",function(){$jq(this).data("hasFocus",false);menuOffHandler($jq(this))})});fsdEqualHeight($jq(".olb-footer-module-fsdnav-skin ul.fsd-investmentprods li"));fsdvAlign($jq("ul.fsd-investmentprods li div"));handleInputs();$jq("a.fsd-locale-select, a.fsd-locale-set").live({click:function(e){e.preventDefault();var thisUrl=window.location.href.split("#")[0],$link=$jq(this);var symbol="";if(isIE7){var href=$link.attr("href").split("/");var grr=href[href.length-1]}else{var grr=$link.attr("href")}if(thisUrl.indexOf("?")>0){if(thisUrl.search("request_locale=")>=0){thisUrl=thisUrl.replace(/(request_locale=)[^\&]+/,"$1"+(grr).split("=")[1])}else{thisUrl=thisUrl+"&"+(grr).toLowerCase()}}else{thisUrl=thisUrl+"?"+grr}if(fsdDefaultSettings.fsdSessionStorage){clearSessionStorage();localStorage.clear()}window.location=thisUrl}})});function addLastMenuCloseListener($liElement){var $nextTabbable=findNextTabbable($liElement);if($nextTabbable!=null){$nextTabbable.focus(function(event){$liElement.trigger("liFocusOutEvent")})}}function findNextTabbable($element){var $nextElement;var $nextTabbable;if($element.is("body")){return null}$nextElement=$element.next();if($nextElement.is(":tabbable")){return $nextElement}$nextTabbable=$element.next().find(":tabbable:first");if($nextElement.length==0){$nextTabbable=findNextTabbable($element.parent())}else{if($nextTabbable.length==0){$nextTabbable=findNextTabbable($nextElement)}}return $nextTabbable}function menuOnHandler(thisLI){if(isIE7){$jq(document).mousemove(function(e){if(typeof mouseCurrPosition==="object"){mouseCurrPosition.x=e.pageX;mouseCurrPosition.y=e.pageY}})}topLI.removeClass("hover");thisLI.addClass("hover");if(thisLI.hasClass("fsdnav-profile-settings")&&thisLI.hasClass("hover")){thisLI.find(".fsdnav-profile-settings-link .fsdnav-ada-hidden").text(" menu expanded. To Navigate through the submenus, press Tab");$jq("a.fsdnav-profile-settings-link").attr("aria-busy",false).attr("aria-live","polite")}var widthArray=[];$jq("div.fsdnav-sub-nav-box",thisLI).delay(0,function(){var allSubNavs=($jq(".fsdnav-hasSub",$jq(this)));var thisoffset=0;var navRightEdge=(topFSDHeader.outerWidth(true)+topFSDHeader.offset().right);$jq(this).css({visibility:"visible",display:"block"}).show();if($jq(".fsdnav-hasSub",thisLI).length>0){var thisNavsWidth=(isMacOS||isIE10)?5:3;$jq.each(allSubNavs,function(){thisNavsWidth=thisNavsWidth+$jq(this).outerWidth(true)});$jq(this).width(thisNavsWidth);if(navRightEdge<(thisoffset+thisNavsWidth)){$jq(this).css("right",(navRightEdge-(thisoffset+thisNavsWidth+5))+"px")}else{$jq(this).css("right",(0)+"px")}if(isIE9){if(navRightEdge<(thisoffset+thisNavsWidth)){$jq(this).css("right",(navRightEdge-(thisoffset+thisNavsWidth+5))+"px")}else{$jq(this).css("right",(5)+"px")}}if(isIE8||navigator.userAgent.toLowerCase().indexOf("chrome")>-1){if(navRightEdge<(thisoffset+thisNavsWidth)){$jq(this).css("right",(navRightEdge-(thisoffset+thisNavsWidth+5))+"px")}else{$jq(this).css("right",(4)+"px")}}}if(isIE7){var offset=$jq(this).offset();profileL2Position={left:offset.left+3,right:offset.left+thisNavsWidth-3,top:offset.top+3,bottom:offset.top+$jq("div.fsdnav-sub-nav-box",thisLI).height()-3}}fsdEqualHeight(allSubNavs)})}function menuOffHandler(thisLI){if(isIE7){if(typeof mouseCurrPosition==="object"&&typeof profileL2Position==="object"&&((mouseCurrPosition.x<=profileL2Position.left&&mouseCurrPosition.x<profileL2Position.right)||(mouseCurrPosition.x>=profileL2Position.right&&mouseCurrPosition.x>profileL2Position.left)||(mouseCurrPosition.y<=profileL2Position.top&&mouseCurrPosition.y<profileL2Position.bottom)||(mouseCurrPosition.y>=profileL2Position.bottom&&mouseCurrPosition.y>profileL2Position.top))){thisLI.removeClass("hover");$jq("div.fsdnav-sub-nav-box",thisLI).stop(true,true).delay(0,function(){$jq(this).css({visibility:"hidden",display:"none"})});setTimeout(function(){$jq(document).unbind("mousemove")},100)}}else{thisLI.removeClass("hover");if(thisLI.hasClass("fsdnav-profile-settings")&&!thisLI.hasClass("hover")){thisLI.find(".fsdnav-profile-settings-link .fsdnav-ada-hidden").text(" menu collapsed")}$jq("div.fsdnav-sub-nav-box",thisLI).stop(true,true).delay(0,function(){$jq(this).css({visibility:"hidden",display:"none"})})}}function handleInputs(){$jq.each($jq("input.fsdnav-header-search-input"),function(i){var $input=$jq(this);$input.attr("rel",$input.val());$input.focus(function(e){if($jq(this).val()==$jq(this).attr("rel")){$jq(this).attr("value","").css("color","#000")}});$input.blur(function(e){if($jq(this).val()==""||$jq.trim($jq(this).val())==""){$jq(this).val($jq(this).attr("rel")).attr("style","")}})})}};function fsdgoto(target,isNewWindow){if(isNewWindow!=undefined&&isNewWindow){if(target=="help"){window.open(fsdgeturl(target),"","menubar=no,toolbar=yes,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=800,height=700")}else{if(target=="scheduleanappointment"||target=="bba"||target=="getAppt"){window.open(fsdgeturl(target),"","menubar=no,toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no,width=1030,height=750")}else{window.open(fsdgeturl(target))}}}else{if(isIE7||isIE8){var referLink=document.createElement("a");referLink.setAttribute("href",fsdgeturl(target));document.body.appendChild(referLink);referLink.click()}else{window.location=fsdgeturl(target,false)}}}function fsdgeturl(target,additionalParam){fsdDefaultSettings.fsdCurrLang=(fsdNavClientOptions.locale).toLowerCase();fsdNavClientOptions.sourceApplication=(typeof(fsdNavClientOptions.sourceApplication)!="undefined"&&fsdNavClientOptions.sourceApplication!="")?fsdNavClientOptions.sourceApplication:"overview";var urlToReturn="",requestLocale=target.match(/request_locale=/)?"":"&request_locale="+fsdDefaultSettings.fsdCurrLang;if(target=="viewsploffers"){urlToReturn=fsdDefaultSettings.fsdPipadDomain+"/accounts-overview/redirect.go?target="+target+requestLocale+"&source="+fsdNavClientOptions.sourceApplication+"&fsd=y"}else{if(target=="help"){if(fsdNavClientOptions.helpURL!=undefined||fsdNavClientOptions.helpURL!=""){urlToReturn=fsdNavClientOptions.helpURL}}else{if(target=="landingpage&app=ML"){urlToReturn=fsdDefaultSettings.fsdPipadDomain+"/myaccounts/interstitial/mlinterstitial.go?target="+target+requestLocale+"&source="+fsdNavClientOptions.sourceApplication+"&fsd=y"}else{urlToReturn=fsdDefaultSettings.fsdPipadDomain+"/myaccounts/brain/redirect.go?target="+target+requestLocale+"&source="+fsdNavClientOptions.sourceApplication+"&fsd=y"}}}fsdNavClientOptions.clientName=fsdNavClientOptions.clientName.toLowerCase();if(fsdNavClientOptions.clientName=="olb"){return urlToReturn}else{if(fsdNavClientOptions.clientName=="fiserv"){if(target=="ov"||target=="ph"||target=="ebo"||target=="pyov"){if(fsdNavClientOptions.entryURL.indexOf("?")!=-1){return fsdNavClientOptions.entryURL+"&rq="+target}else{return fsdNavClientOptions.entryURL+"?rq="+target}}else{if(fsdNavClientOptions.entryURL.indexOf("?")!=-1){return fsdNavClientOptions.entryURL+"&rq=so&returnUrl="+encodeURIComponent(urlToReturn)}else{return fsdNavClientOptions.entryURL+"?rq=so&returnUrl="+encodeURIComponent(urlToReturn)}}}else{return fsdNavClientOptions.entryURL+"&target="+target+requestLocale+"&returnUrl="+encodeURI(urlToReturn)}}}var sessionStorageKeys=["headerhtml","footerhtml","fsdPopularTopicData","popularTopicsHtml","fsdlang","fsdHTS","fsdCoherence","fsdcustdata","contactushtml","authChatHtml","globalTimeoutHtml","financialAdvisorData","profile","autoRatesData","currentStateSelected","financialAdvisorData","profile","autoRatesData","currentStateSelected"];function clearSessionStorage(){for(var i=0;i<sessionStorageKeys.length;i++){sessionStorage.removeItem(sessionStorageKeys[i])}}function blackBox(hushhush){if(typeof hushhush=="string"&&fsdDefaultSettings.fsdSecretSauce!=""){return Crypto.AES.decrypt(hushhush,Crypto.charenc.UTF8.stringToBytes(fsdDefaultSettings.fsdSecretSauce),{mode:new Crypto.mode.ECB(Crypto.pad.NoPadding)})}return}function fsdEqualHeight(group){var tallest=0;$jq.each(group,function(){var thisHeight=$jq(this).height();if(thisHeight>tallest){tallest=thisHeight}});group.height(tallest)}function fsdvAlign(group){return $jq.each(group,function(i){var ah=$jq(this).height();var ph=$jq(this).parent().height();var mh=(ph-ah)/2;$jq(this).css("padding-top",mh)})}function fsdcreateCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}document.cookie=name+"="+value+expires+"; path=/"}function fsdreadCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}function fsderaseCookie(name){createCookie(name,"",-1)}function fsdBrowserCheck(){try{var browserUserAgent=navigator.userAgent;var browserMajorVersion=parseInt(navigator.appVersion,10);var browserName="";var addBrowserClass="";var browserVerOffset;if((browserVerOffset=browserUserAgent.indexOf("MSIE"))!=-1){browserFullVersion=browserUserAgent.substring(browserVerOffset+5);browserName="ie"}else{if((browserVerOffset=browserUserAgent.indexOf("Firefox"))!=-1){browserFullVersion=browserUserAgent.substring(browserVerOffset+8);browserName="ff"}else{if((browserVerOffset=browserUserAgent.indexOf("Chrome"))!=-1){browserFullVersion=browserUserAgent.substring(browserVerOffset+7);browserName="chrome";addBrowserClass=" webkit"}else{if((browserVerOffset=browserUserAgent.indexOf("Safari"))!=-1){browserFullVersion=browserUserAgent.substring(browserVerOffset+7);if((browserVerOffset=browserUserAgent.indexOf("Version"))!=-1){browserFullVersion=browserUserAgent.substring(browserVerOffset+8)}browserName="safari-browser";addBrowserClass=" webkit"}}}}if(browserName.length>0){browserMajorVersion=parseInt(""+browserFullVersion,10);if(isNaN(browserMajorVersion)){browserMajorVersion=parseInt(navigator.appVersion,10)}if(browserName==="ie"){if(browserMajorVersion===9){addBrowserClass+=" lt-ie10"}else{if(browserMajorVersion===8){addBrowserClass+=" lt-ie10 lt-ie9"}else{if(browserMajorVersion===7){addBrowserClass+=" lt-ie10 lt-ie9 lt-ie8"}}}}browserClass=browserName+" "+browserName+"-"+browserMajorVersion+addBrowserClass;$jq(".fsdnav-skin").addClass(browserClass)}}catch(err){console.log("ERROR: olb-header-module-FSD.js: "+err.message)}}function doLocatorSearch(){if(document.frmLocator.atmTextPersonVal!=null&&document.frmLocator.atmTextPersonVal.value!=document.frmLocator.postalCode.value){document.frmLocator.zipCode.value=document.frmLocator.postalCode.value}document.frmLocator.submit()}$jq.fn.delay=function(time,callback){jQuery.fx.step.delay=function(){};return this.animate({delay:1},time,callback)};function setBillPayerFlagInSessionStorage(){if(fsdDefaultSettings.fsdSessionStorage){if(typeof boa_ao_isEbillsCallComplete!="undefined"){var isEbillsCallCompleteHolder="";isEbillsCallCompleteHolder="<script>var boa_ao_isEbillsCallComplete="+boa_ao_isEbillsCallComplete+";<\/script>";sessionStorage.setItem("fsdIsEbillsCallComplete",isEbillsCallCompleteHolder)}if(typeof boa_ao_billPayerFlag!="undefined"){var isBillPayerFlagHolder="";isBillPayerFlagHolder="<script>var boa_ao_billPayerFlag="+boa_ao_billPayerFlag+";<\/script>";sessionStorage.setItem("fsdBillPayerFlag",isBillPayerFlagHolder)}if(typeof boa_ao_bpBdEbillCount!=="undefined"){var bpBdEbillCountHolder=0;bpBdEbillCountHolder="<script>var boa_ao_bpBdEbillCount="+boa_ao_bpBdEbillCount+";<\/script>";sessionStorage.setItem("fsdBpBdEbillCount",bpBdEbillCountHolder)}}}function displayEBillNotification(bpBdEbillCount){$jq(".ebills-notification").removeClass("hide");if($jq("#bill-pay-widget-tile-image").length>0&&boa_ao_bpBdEbillCount>0){boa.ao.tile.callBack.showBarker("billpay",bpBdEbillCount)}}function setMessagesFlagInSessionStorage(cehCallInProgress,messagesCount){if(fsdDefaultSettings.fsdSessionStorage){if(typeof cehCallInProgress!="undefined"){var isCehCallInProgressHolder="";isCehCallInProgressHolder="<script>var cehCallInProgress="+cehCallInProgress+";<\/script>";sessionStorage.setItem("fsdCehCallInProgress",isCehCallInProgressHolder)}if(typeof messagesCount!=="undefined"){var messagesCountHolder=0;messagesCountHolder="<script>var messagesBarkerCount="+parseInt(messagesCount)+";<\/script>";sessionStorage.setItem("fsdMessagesCount",messagesCountHolder)}}}function displayMessagesNotification(messagesCount,alertsCount,response){if(typeof messagesCount!="undefined"&&messagesCount>0){$jq(".messages_notification").removeClass("hide");boa.ao.tile.callBack.showBarker("messages",messagesCount,response)}if(typeof alertsCount!="undefined"&&alertsCount>0){boa.ao.tile.callBack.showBarker("alerts",alertsCount,response)}}function setEbillsNotification(){if(typeof boa_ao_isEbillsCallComplete!=="undefined"&&boa_ao_isEbillsCallComplete){if(typeof boa_ao_billPayerFlag!=="undefined"&&boa_ao_billPayerFlag){displayEBillNotification(boa_ao_bpBdEbillCount)}setBillPayerFlagInSessionStorage()}else{if(typeof boa_ao_isEbillsCallComplete!=="undefined"){$jq.ajax({url:"/myaccounts/ebills/displayEbillsFlag.go",dataType:"json",cache:false,type:"POST",contentType:"application/json; charset=utf-8",success:function(response,textStatus){if(typeof(response.billPayerFlag)!=="undefined"&&typeof(response.bpBdEbillCount)!=="undefined"){boa_ao_billPayerFlag=response.billPayerFlag;boa_ao_bpBdEbillCount=response.bpBdEbillCount;if("TRUE"===boa_ao_billPayerFlag.toUpperCase()){displayEBillNotification(boa_ao_bpBdEbillCount)}boa_ao_isEbillsCallComplete=true}},error:function(response,textStatus,errorThrown){},complete:function(){setBillPayerFlagInSessionStorage()}})}}}$jq(document).ready(function(){if(typeof(fsdCustData)!="undefined"){if(typeof(fsdCustData.turnOffLLAuthentication)!="undefined"){turnOffLLAuthentication=fsdCustData.turnOffLLAuthentication}}if($jq(".olb-header-module-fsdnav-skin").length||typeof(fsdNavClientOptions)!="undefined"){if(typeof(fsdNavClientOptions)!="undefined"){fsdDefaultSettings.isQuirksMode=(document.compatMode==="CSS1Compat"?false:(document.documentMode==10?false:true));if(isIE&&fsdDefaultSettings.isQuirksMode){$jq(".olb-header-module-fsdnav-skin").addClass("ieQuirksmodeFSD")}if(typeof(fsdNavClientOptions.locale)!="undefined"&&fsdNavClientOptions.locale!==""){if(typeof(fsdNavClientOptions.forceNavInLocale)=="undefined"||fsdNavClientOptions.forceNavInLocale==""){fsdDefaultSettings.fsdCurrLang=(fsdNavClientOptions.locale).toLowerCase();$jq(".olb-header-module-fsdnav-skin").attr("data",fsdDefaultSettings.fsdCurrLang)}}}if(typeof window.localStorage!="undefined"&&window.localStorage!==null&&window.localStorage!==null){var storageTestKey="sTest",storage=window.sessionStorage;try{storage.setItem(storageTestKey,"test");storage.removeItem(storageTestKey);fsdDefaultSettings.fsdSessionStorage=true}catch(e){if(e.code==DOMException.QUOTA_EXCEEDED_ERR&&storage.length==0){fsdDefaultSettings.fsdSessionStorage=false}}}if(fsdDefaultSettings.fsdSessionStorage){if(typeof(fsdNavClientOptions.forceNavInLocale)=="undefined"||fsdNavClientOptions.forceNavInLocale==""||fsdNavClientOptions.forceNavInLocale==fsdDefaultSettings.fsdCurrLang){sessionStorage.setItem("headerhtml",$jq("#olb-globals-header-container").html())}if(typeof JSON!=="object"){"object"!==typeof JSON&&(JSON={});(function(){function l(a){return 10>a?"0"+a:a}function q(a){r.lastIndex=0;return r.test(a)?'"'+a.replace(r,function(a){var c=t[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function n(a,k){var c,d,h,p,g=e,f,b=k[a];b&&("object"===typeof b&&"function"===typeof b.toJSON)&&(b=b.toJSON(a));"function"===typeof j&&(b=j.call(k,a,b));switch(typeof b){case"string":return q(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b){return"null"}e+=m;f=[];if("[object Array]"===Object.prototype.toString.apply(b)){p=b.length;for(c=0;c<p;c+=1){f[c]=n(c,b)||"null"}h=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(j&&"object"===typeof j){p=j.length;for(c=0;c<p;c+=1){"string"===typeof j[c]&&(d=j[c],(h=n(d,b))&&f.push(q(d)+(e?": ":":")+h))}}else{for(d in b){Object.prototype.hasOwnProperty.call(b,d)&&(h=n(d,b))&&f.push(q(d)+(e?": ":":")+h)}}h=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+g+"}":"{"+f.join(",")+"}";e=g;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,m,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,k,c){var d;m=e="";if("number"===typeof c){for(d=0;d<c;d+=1){m+=" "}}else{"string"===typeof c&&(m=c)}if((j=k)&&"function"!==typeof k&&("object"!==typeof k||"number"!==typeof k.length)){throw Error("JSON.stringify")}return n("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&"object"===typeof b){for(g in b){Object.prototype.hasOwnProperty.call(b,g)&&(f=c(b,g),void 0!==f?b[g]=f:delete b[g])}}return e.call(a,d,b)}var d;a=String(a);s.lastIndex=0;s.test(a)&&(a=a.replace(s,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return d=eval("("+a+")"),"function"===typeof e?c({"":d},""):d}throw new SyntaxError("JSON.parse")})})()}}$jq(".olb-header-module-fsdnav-skin").css("visibility","visible","display","block");var $olbGlobalsModuleFsdNav=$jq(".olb-header-module-fsdnav-skin .fsdnav-topnav");var $olbGlobalsModuleFsdHeader=$jq(".olb-header-module-fsdnav-skin .fsdnav-header");fsdBrowserCheck();if(fsdDefaultSettings.fsdSessionStorage){sessionStorage.setItem("fsdHTS",(fsdreadCookie("HTS")!=undefined||fsdreadCookie("HTS")!=null)?fsdreadCookie("HTS"):"");if(typeof(fsdNavClientOptions.forceNavInLocale)=="undefined"||fsdNavClientOptions.forceNavInLocale==""||fsdNavClientOptions.forceNavInLocale==fsdDefaultSettings.fsdCurrLang){sessionStorage.setItem("fsdlang",fsdDefaultSettings.fsdCurrLang);sessionStorage.setItem("footerhtml",$jq("#olb-globals-footer-container").html())}sessionStorage.setItem("fsdCoherence",(fsdreadCookie("Coherence:OLB-Coherence")!=undefined||fsdreadCookie("Coherence:OLB-Coherence")!=null)?((fsdreadCookie("Coherence:OLB-Coherence").search(/^[a-z0-9\=\:\%]+$/i)==0)?(fsdreadCookie("Coherence:OLB-Coherence")).split("=")[1]:""):"");var custDataHolder="";if(typeof(fsdCustData)!="undefined"){custDataHolder="<script>var fsdCustData="+JSON.stringify(fsdCustData)+";<\/script>";sessionStorage.setItem("fsdcustdata",custDataHolder)}if(typeof(authChatCommonData)!="undefined"){authChatCommonDataHolder="<script>var authChatCommonData="+JSON.stringify(authChatCommonData)+";<\/script>";sessionStorage.setItem("authChatCommonData",authChatCommonDataHolder)}if(typeof(authChatChannel)!="undefined"){authChatChannelHolder="<script>var authChatChannel="+JSON.stringify(authChatChannel)+";<\/script>";sessionStorage.setItem("authChatChannel",authChatChannelHolder)}if(typeof(authChatPageConstants)!="undefined"){authChatPageConstantsHolder="<script>var authChatPageConstants="+JSON.stringify(authChatPageConstants)+";<\/script>";sessionStorage.setItem("authChatPageConstants",authChatPageConstantsHolder)}}$olbGlobalsModuleFsdNav.topFSDNavigation();$olbGlobalsModuleFsdHeader.topFSDHeader();setEbillsNotification();if(typeof(fsdNavClientOptions)!="undefined"){fsdDefaultSettings.isQuirksMode=(document.compatMode==="CSS1Compat"?false:(document.documentMode==10?false:true));if(isIE&&fsdDefaultSettings.isQuirksMode){$jq(".olb-header-module-fsdnav-skin").addClass("ieQuirksmodeFSD")}if(typeof(fsdNavClientOptions.locale)!="undefined"&&fsdNavClientOptions.locale!==""){if(fsdNavClientOptions.locale.search(/^[a-zA-Z-]+$/)==-1){fsdNavClientOptions.locale=="en-us"}fsdDefaultSettings.fsdCurrLang=(fsdNavClientOptions.locale).toLowerCase()}}}fsdBuildAO={renew:function(){if(fsdDefaultSettings.fsdAOPainting){return}fsdDefaultSettings.fsdAOPainted=false;fsdDefaultSettings.fsdAOForceRefresh=true;var targets=[".fsd-accounts-overview a.fsd_accounts_link",".fsd-accounts-overview span.fsdnav-sub-nav-subHeaderText",".fsd-accounts-overview a.fsd-viewall",".fsd-accounts-overview .fsd-divider"];$jq(targets.join(",")).remove();if(fsdDefaultSettings.fsdSessionStorage){clearSessionStorage()}}};fsdInvokeModal={initMask:function(){var maskHeight=$jq(document).height();var maskWidth=$jq(window).width();$jq("body").prepend('<div id="fsd-mask"></div>');$jq("#fsd-mask").css({width:maskWidth,height:maskHeight,position:"absolute","z-index":"9000","background-color":"#666666"}).show().fadeTo(0,0.5);$jq(document).keydown(function(e){if(e.keyCode==27){fsdInvokeModal.modalDestroy()}})},modalDestroy:function(){$jq(".fsd-modal").remove();$jq("#fsd-mask").remove();$jq("a.fsd-button").unbind("click")},fsdIntuitPopup:function(){fsdInvokeModal.initMask();var winH=$jq(window).height();var winW=$jq(window).width()/2;$jq("body").prepend('<div id="fsd-intuitModal" class="fsd-modal"></div>');var thisModal=$jq("#fsd-intuitModal");var modalContentClone=($jq("#fsd-intuit-modal").clone()).show();thisModal.html(modalContentClone);thisModal.css({top:((winH)-(thisModal.height()))/2,left:((winW)-(thisModal.width())/2)});thisModal.show();$jq("a.fsd-closeButton",thisModal).focus();$jq("a.fsd-button").click(function(e){e.preventDefault();if($jq(this).attr("id")=="fsd-continueInEnglishButton"){window.open($jq(this).attr("href"))}fsdInvokeModal.modalDestroy()})},fsdFooterIntuitPopup:function(){fsdInvokeModal.initMask();var winH=$jq(window).height();var winW=$jq(window).width();$jq("body").append('<div id="fsd-footerIntuitModal" class="fsd-modal"></div>');var thisModal=$jq("#fsd-footerIntuitModal");var modalContentClone=($jq("#sipc-footer-modal").clone()).show();thisModal.html(modalContentClone);thisModal.css({left:(winW)/3,top:(thisModal.offset().top+100)});thisModal.show();$jq("a.fsd-closeButton",thisModal).focus();$jq(":tabbable",thisModal).keydown(function(event){if(event.keyCode!==9){return}var tabbables=$jq(":tabbable",thisModal),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false}else{if(event.target===first[0]&&event.shiftKey){last.focus(1);return false}}});$jq("a.fsd-button").click(function(e){e.preventDefault();if($jq(this).attr("id")=="fsd-continueToOtherSiteButton"){window.open($jq(this).attr("href"))}fsdInvokeModal.modalDestroy();$jq("#sipc-footer-model-layer").focus()})}};window.fsdBuildAO=fsdBuildAO;window.fsdInvokeModal=fsdInvokeModal;$jq(".preference_widget").live("click",function(e){aoOpenAnAcc_PrefWid_TargetUrl=$jq(this).attr("href");if(typeof fsdCustData=="object"&&fsdCustData.fsdEcloPrefWidgetSwitch!="undefined"&&fsdCustData.fsdEcloPrefWidgetSwitch=="true"){e.preventDefault();if(!isPreferenceWidgetInvoked&&!$jq(".credit-card-preference-widget").html().trim().length>0){$jq.ajax({url:fsdDefaultSettings.fsdPipadDomain+"/myaccounts/ao/loadCreditCardPreferenceWidget.go",timeout:10000,dataType:"html",cache:false,type:"POST",contentType:"text/javascript",success:function(data){$jq(".credit-card-preference-widget").html(data);var options={skin:"modal-flex",width:900};$jq(".credit-card-preference-widget").boaFlexModal(options);isPreferenceWidgetInvoked=true},error:function(response,textStatus,errorThrown){if((typeof console!=="undefined")&&(console!==null)){console.log("load data failed - "+response+" - "+textStatus+" - "+errorThrown)}}})}else{var options={skin:"modal-flex",width:900};$jq(".credit-card-preference-widget").boaFlexModal(options)}}else{var prefurl=$jq(".preference_widget").attr("href");window.open(prefurl,"_self");e.preventDefault()}});function advPopupClose(){$jq(".ui-dialog-titlebar-close").click()}var setSPOHoverWidth=$jq("a[name='onh_view_special_offers']").parents(".fsdnav-sub-nav-box").width()-4+"px";var setOAAHoverWidth=$jq("a[name='onh_new_accounts_open_an_account']").parents(".fsdnav-sub-nav-box").width()-4+"px";if((setSPOHoverWidth!==null)&&(typeof setSPOHoverWidth!=="undefined")){$jq("a[name='onh_view_special_offers']").parent().filter(".last").css("width",setSPOHoverWidth)}if((setOAAHoverWidth!==null)&&(typeof setOAAHoverWidth!=="undefined")){$jq("a[name='onh_new_accounts_open_an_account']").parent().filter(".last").css("width",setOAAHoverWidth)}var currentEleWidth=0,containerWidth=0,fsdNavBoxCount=0,globalNavBoxParentName="",currentGlobalNavBoxParentName="",fsdNavBoxParentElementName="",currentL1Tab="";var _selfPrevious,_selfTargets=[".fsdnav-profile-settings-link ~ .fsdnav-sub-nav-box a",".fsdnav-nav-list .fsdnav-sub-nav-box a",".fsdnav-nav-list .fsdnav-sub-nav-box p"];$jq(_selfTargets.join(",")).each(function(){var _self=$jq(this);fsdNavBoxParentElementName=_self.parents().filter(".fsdnav-sub-nav-box");currentGlobalNavBoxParentName=fsdNavBoxParentElementName.prev().attr("name");fsdNavBoxParentElementName.addClass("showHideOlbHeaderNav");if(currentL1Tab!=""){_selfPrevious.addClass("showHideOlbHeaderNav")}currentEleWidth=_self.width();currentMaxWidth=225;currentMinWidth=200;if(!(fsdNavBoxParentElementName.prevUntil(".fsdnav-profile-settings-link").length>0)){currentMaxWidth=125;currentMinWidth=120}if(currentEleWidth>currentMaxWidth){_self.css("-ms-word-break","break-word").css("overflow-wrap","break-word").css("word-wrap","break-word").css("max-width","280px");if(_self.text().length>82){_self.css("-ms-word-break","break-word").css("overflow-wrap","break-word").css("word-wrap","break-word").css("max-width","220px")}}else{if(currentEleWidth<currentMinWidth){}else{_self.css("-ms-word-break","break-word").css("overflow-wrap","break-word").css("word-wrap","break-word").css("max-width",currentEleWidth)}}if(currentL1Tab!=currentGlobalNavBoxParentName){if(currentL1Tab==""){currentL1Tab=currentGlobalNavBoxParentName;_selfPrevious=_self.parents().filter(".fsdnav-sub-nav-box")}else{_selfPrevious.find(".fsdnav-hasSub").each(function(){containerWidth+=$jq(this).width()});containerWidth+=7;containerWidth=Math.ceil(containerWidth);if(containerWidth!=0&&(globalNavBoxParentName!=currentGlobalNavBoxParentName||currentGlobalNavBoxParentName=="onh_transfers")){var addDynaClass='<style type= "text/css">.olb-header-module-fsdnav-skin  .fsdnav-nav-list .fsdnav-sub-nav-box.dynawidthnav-w-'+containerWidth+" { width: "+containerWidth+"px !important}</style>";$jq("head").append(addDynaClass);_selfPrevious.addClass("dynawidthnav-w-"+containerWidth);_selfPrevious.removeClass("showHideOlbHeaderNav");currentL1Tab=currentGlobalNavBoxParentName;_selfPrevious=_self.parents().filter(".fsdnav-sub-nav-box")}containerWidth=0;globalNavBoxParentName=currentGlobalNavBoxParentName}}fsdNavBoxParentElementName.removeClass("showHideOlbHeaderNav")});if($jq("#ecloFlyOutMbox").length>0){var self=$jq("#ecloFlyOutMbox"),mboxjspath=self.data("mboxjspath"),recipeid=self.data("recipeid"),offercode=self.data("offercode");if(!((typeof(mboxDefine)=="function")||(typeof(mboxUpdate)=="function"))){$jq.getScript(mboxjspath,function(){mboxDefine("mboxDefault","bac_olb_global_nav_flyout","profile.recipeID="+recipeid,"profile.OfferCode="+offercode);mboxUpdate("bac_olb_global_nav_flyout","profile.recipeID="+recipeid,"profile.OfferCode="+offercode)})}else{mboxDefine("mboxDefault","bac_olb_global_nav_flyout","profile.recipeID="+recipeid,"profile.OfferCode="+offercode);mboxUpdate("bac_olb_global_nav_flyout","profile.recipeID="+recipeid,"profile.OfferCode="+offercode)}}if((typeof cehCallInProgress!="undefined")&&cehCallInProgress.toString().toLowerCase()=="false"){if((typeof messagesBarkerCount!="undefined")&&parseInt(messagesBarkerCount)>0){$jq(".messages_notification").removeClass("hide")}if(typeof messagesBarkerCount!="undefined"){setMessagesFlagInSessionStorage(cehCallInProgress,messagesBarkerCount)}}else{if((typeof cehCallInProgress!="undefined")){var alertsBarkerValue=0,messagesBarkerValue=0;$jq.ajax({url:"/myaccounts/ao/getCustEventHubData.go",timeout:10000,dataType:"json",cache:false,type:"POST",contentType:"application/json; charset=utf-8",success:function(response,textStatus){if(typeof(response)!="undefined"){alertsBarkerValue=parseInt(response.unreadAlertCount),messagesBarkerValue=parseInt(response.unreadSecureMsgCount)+parseInt(response.unreadClaimsMsgCount);displayMessagesNotification(messagesBarkerValue,alertsBarkerValue,response);cehCallInProgress="false"}},error:function(response,textStatus,errorThrown){if((typeof console!=="undefined")&&(console!==null)){console.log("Ajax call for loading CEH data failed "+response+" - "+textStatus+" - "+errorThrown)}},complete:function(){setMessagesFlagInSessionStorage(cehCallInProgress,messagesBarkerValue)}})}}});function removeClassMatch(uniqueElement,classMatch){var classes=uniqueElement.attr("class");var splitClasses=classes.split(" ");uniqueElement.attr("class","");for(i=0;i<splitClasses.length;i++){if(!(splitClasses[i].indexOf(classMatch)!=-1)){uniqueElement.addClass(splitClasses[i])}}}function setFsdSignOut(){$jq("a.olb-sign-out").click(function(e){clearSessionStorage()})}function fsdCoBrowse_jQuery_init(){$jqCoBrowse=window.jQuery.noConflict(true);window.jQuery=originalJQueryObject;originalJQueryObject=""}function RetrieveLiveLookToken(siteID,localtime){if(window.jQuery===undefined||window.jQuery.fn.jquery!=="1.4.4"){if(fsdDefaultSettings.fsdCoBrowseJqueryPath!=""){var fsdCoBrowseJquery=fsdDefaultSettings.fsdPipadDomain+fsdDefaultSettings.fsdCoBrowseJqueryPath}originalJQueryObject=window.jQuery;var script_CoBrowse=document.createElement("script");script_CoBrowse.setAttribute("type","text/javascript");script_CoBrowse.setAttribute("src",fsdCoBrowseJquery);(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_CoBrowse);if(script_CoBrowse.readyState){script_CoBrowse.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){fsdCoBrowse_jQuery_init()}}}else{script_CoBrowse.onload=fsdCoBrowse_jQuery_init}}else{$jqCoBrowse=window.jQuery}llSiteID=siteID;llLocalTime=localtime;$jq.ajax({url:fsdDefaultSettings.fsdPipadDomain+"/myaccounts/signin/cobrowse.go",contentType:"text/javascript",dataType:"jsonp",crossDomain:true,cache:false,jsonp:false,jsonpCallback:"LL_SAML_RESPONSE",success:function(data){sendSAMLLivelook(data)},error:function(){}})}function sendSAMLLivelook(data){$jq.ajax({type:"POST",url:data.LLUrl,crossDomain:true,cache:false,data:{SAMLResponse:data.SAMLResponse,siteID:llSiteID,localtime:llLocalTime},error:function(){}})}$jq(function(){setFsdSignOut();if(window.boa){if(window.boa.header&&window.boa.header.insertFinancialAdvisor){window.boa.header.insertFinancialAdvisor()}if(window.boa.overlay&&window.boa.overlay.sasi){window.boa.overlay.sasi.init($jq)}if(window.boa.search&&window.boa.search.stub){window.boa.search.stub($jq)}if(window.boa.log){window.boa.log.init($jq)}if(window.boa.digitalData&&window.boa.digitalData.process){window.addEventListener("DOMContentLoaded",window.boa.digitalData.process())}if(window.boa.fontLoader){window.boa.fontLoader.init(["cnx-regular"],{jQuery:$jq})}if(window.boa.experience){window.boa.experience.set($jq)}if(window.boa.jqUpgrade){window.boa.jqUpgrade.set($jq)}$jq(document).on("bindFunctions.boa",window.boa.overlay.bindBOAFunctions);window.boa.overlay.bindBOAFunctions()}});$jq(document).ready(function(){if($jq("#eclo-flyout-module .flyout-skin").length>0){if($jq("#eclo-flyout-module .extra-details").length!=0){var text=$jq("#eclo-flyout-module .extra-details.last")[0].firstChild.nodeValue;finaltext=text+" &gt;&gt";$jq("#eclo-flyout-module .extra-details").html(finaltext)}if(typeof cfLoader!="undefined"){cfLoader.init(["cnx-regular","cnx-medium","cnx-bold"])}}calculateBamdLength();if(($(".bamd-flyout-module .ui-responsive-skin").length>0)||($(".olb-tola-widget-module").length>0)){if(fsdNavClientOptions.sourceApplication==="yodlee"||fsdNavClientOptions.sourceApplication==="billpay"||fsdNavClientOptions.sourceApplication==="cashedge"){$jq(".bamd-flyout-module .ui-responsive-skin .offers-icon").css("display","block");if(fsdNavClientOptions.sourceApplication==="yodlee"||fsdNavClientOptions.sourceApplication==="billpay"){$jq(".bamd-flyout-module .ui-responsive-skin .img-text-content .text-content .heading-text").css("margin-top","-41px")}}$("a.alt-offer-link").live("click",function(e){$altOfferLink=$(this);var currentDealSec=$altOfferLink.closest(".bamd-multi-deals-content");var altOfferId=$(this).attr("offerIdRel");var cardlyticsEnz=$("#post-msg-cardlytics-enz-"+altOfferId).attr("rel");if(cardlyticsEnz!==null&&cardlyticsEnz!==undefined){$.get(cardlyticsEnz)}})}fsdCreateStars=function(data){var value=parseFloat(data.rating,10)||0,total=parseInt(data.maxRating,10)||5,full=Math.floor(value),partial=value-full,out='<div class="starRating">',closeOut="</div>";var j,uniqueID="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(j=0;5>j;j++){uniqueID+=possible.charAt(Math.floor(Math.random()*possible.length))}var wPercent=100/total,svgStart='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 105 100" preserveAspectRatio="xMidYMin meet" width="'+wPercent+'%">',clipPathA='<defs><clipPath id="'+uniqueID+'"><rect width="',clipPathB='%" height="100%"/></clipPath></defs>',emptyStar='<path fill="#a39382" d="M52.93 1.036l11.79 36.287h38.154L72.007 59.75l11.79 36.286L52.93 73.61 22.062 96.036l11.79-36.286L2.986 37.323H41.14L52.93 1.036z"/>',filledA='<path fill="#f9e205" d="M52.93 1.036l11.79 36.287h38.154L72.007 59.75l11.79 36.286L52.93 73.61 22.062 96.036l11.79-36.286L2.986 37.323H41.14L52.93 1.036z"',filledB='/><path fill="#a39483" opacity=".8" d="M43.992 38.25l.197-.577L54.567 6.08 52.93 1.036 41.14 37.323H2.984l4.12 2.993 36.214.007.672-2.073zm20.675-.927l1.25 3h.047l32.738-.007 4.12-2.993H64.666zM33.942 59.82L22.027 95.98l4.304-3.1 10.13-31.076-2.518-1.984z"/>',filledStar=filledA+filledB,partialStar=filledA+'clip-path="url(#'+uniqueID+')"'+filledB,svgEnd="</svg>",i=1;for(i;total>=i;i++){out+=svgStart,full>=i?out+=filledStar:i===full+1?(out+=clipPathA+100*partial+clipPathB,out+=emptyStar,out+=partialStar):out+=emptyStar,out+=svgEnd}return out};fsdLoadStarRating=function(){var starContainer=$jq(".starRatingContainer");starContainer.each(function(){if($jq(this).attr("data-ratingLoaded")=="false"){var data={rating:$jq(this).data("rating"),maxRating:$jq(this).data("maxRating")};var starHTML=fsdCreateStars(data);$jq(this).prepend(starHTML);$jq(this).attr("data-ratingLoaded","true")}})};fsdLoadStarRating();fsdLoadCardImgBarker=function(){var cardImgBarkerContainer=$jq(".cardImgBarkerContainer");cardImgBarkerContainer.each(function(){if($jq(this).attr("data-content")!=""&&$jq(this).attr("data-cardImgBarkerLoaded")=="false"){var data={content:$jq(this).data("content"),polygoncolor1:$jq(this).data("polygoncolor1"),polygoncolor2:$jq(this).data("polygoncolor2"),classNames:$jq(this).data("class")};var cardImgBarkerHtml=fsdAddCardImgBarker(data);$jq(this).prepend(cardImgBarkerHtml);$jq(this).attr("data-cardImgBarkerLoaded","true")}})};fsdAddCardImgBarker=function(data){var out='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 110 26" width="110" height="26" preserveAspectRatio="xMinYMin meet" class="cardImgbarkerSVG '+data.classNames+'">',polygon1='<polygon points="0.559 21.134 109.441 21.121 88.566 0.259 21.469 0.224 0.559 21.134" style="fill:'+data.polygoncolor1+'"></polygon>',polygon2='<polygon points="109.387 21.121 100.362 21.122 104.766 25.713 109.387 21.121" style="fill:'+data.polygoncolor2+'"></polygon>',polygon3='<polygon points="9.412 21.133 0.559 21.134 4.968 25.564 9.412 21.133" style="fill:'+data.polygoncolor2+'"></polygon>',polygonText='<text style="font-size:12px;fill:#fff;font-family:Connections" text-anchor="middle" x="55" y="14">'+data.content+"</text>";svgEnd="</svg>";out=out+polygon1+polygon2+polygon3+polygonText;return out};fsdLoadCardImgBarker()});function calculateBamdLength(){if($jq(".bamd-flyout-module").length>0){if(fsdCustData.flyoutDealsCountValue!=undefined&&(fsdCustData.flyoutDealsCountValue%2!=0&&(fsdCustData.flyoutDealsCountValue==1||fsdCustData.flyoutDealsCountValue==3))){$(".bamd-flyout-module .offer-text").show()}else{$(".bamd-flyout-module .offer-text").hide()}}}var fsdBamdUpdate={renew:function(dealID,status){var link="bamd-status-"+dealID,$link=$("a[name="+link+"]");switch(status){case"A":$link.removeClass("add-deal").addClass("ready-to-use");break;case"H":if($link.closest(".bamd-multi-deals-content").length>0){$link.closest(".bamd-multi-deals-content").hide();if(typeof fsdCustData=="object"&&fsdCustData.flyoutDealsCountValue!="undefined"){fsdCustData.flyoutDealsCountValue=fsdCustData.flyoutDealsCountValue-1}calculateBamdLength();break}}},getDeals:function(from,to){var deals=[];if(featureDealsList==undefined||featureDealsList==null||featureDealsList==""){console.log("Feature dealList is: "+featureDealsList);return}deals.push(featureDealsList);if(from!=undefined&&to!=undefined){deals=featureDealsList.slice(from-1,to)}else{if(from!=undefined){deals=featureDealsList.slice(from-1,from)}}console.table(deals)}};(function(){$jq=$;function navFinancialAdvisor(){var $navHeader=$jq(".fsdnav-header",".olb-header-module-fsdnav-skin"),$navAdvisor=$jq(".nav-advisor",$navHeader),navHeaderAdvisorBAC="display-bac",navHeaderAdvisorML="display-ml",navAdvisorContent='<div class="nav-advisor {{cssClass}}" data-source="/myaccounts/financialadvisor/getFinancialAdvisorDetails.go" data-root="financialAdvisor">  <a rel="nav-advisor-details" href="javascript:void(0);" class="vertical-center boa-dialog boa-com-info-layer-link dotted boa-com-info-layer-width-500">    {{subtitle}} <strong>{{title.display}}</strong>  </a>  <div id="nav-advisor-details" class="hide">    <div class="details generic">      <h3>{{title.display}} <span class="subtitle">{{contact.phone.number}}</span></h3>      <p><span class="time mFormat" data-mformat="time" data-loop="contact.phone.availability">{{displayTime}}, {{displayDays}}</span></p><p>{{message}}</p>    </div>    <div class="details individual">      <h3>{{title.display}} <span class="subtitle">{{title.title}}</span></h3>      <span class="line" data-if="contact.postal.address.street">{{val1}}</span>      <span class="line" data-if="contact.postal.address.streetDetail">{{val1}}</span>      <span class="line">        <span data-if="contact.postal.address.city" data-whitespace=",">{{val1}}, </span>        <span data-if="contact.postal.address.state">{{val1}} </span>        <span data-if="contact.postal.address.zip"> {{val1}}</span>      </span>      <div class="contact mFormat" data-mformat="contact">        <p data-loop="contact.phone" class="phone">{{number}}</p>      </div>    </div>    <div class="details team">      <h3>{{title.display}} <span class="subtitle">{{contact.phone.number}}</span></h3>      <a href="#nav-advisor-team" class="list-toggle showhide">{{message}}</a>      <div class="list-team hiding" id="nav-advisor-team">        <table>          <tr data-loop="team.members">            <td class="column name">{{display}}</td>            <td class="column phone">{{contact.phone.number}}</td>            <td class="column title">{{title}}</td>          </tr>        </table>      </div>    </div>  </div></div>',$navAdvisorContent=$jq(navAdvisorContent);$jq(document).click(function(event){var $dialog=$jq("#nav-advisor-details").closest(".ui-dialog");if($jq(event.target).closest(".ui-dialog").find("#nav-advisor-details").length!=0||$jq(event.target).hasClass("vertical-center")||$jq(event.target).closest("a").hasClass("vertical-center")){$dialog.show()}else{$dialog.hide()}});if($navAdvisor.length===0){$navHeader.addClass(navHeaderAdvisorBAC)}$navAdvisor.each(function(){var $advisor=$jq(this),source=$advisor.data("source"),root=$advisor.data("root"),$header=$advisor.parents(),ref=function(obj,str){str=str.split(".");for(var i=0;i<str.length;i++){obj=obj[str[i]];if(typeof obj==="undefined"){break}}return obj},GSID={get:function(which){switch(which){case"cookie":return fsdreadCookie("GSID");break;case"session":return sessionStorage.getItem("GSID");break}},set:function(which){switch(which){case"session":default:return sessionStorage.setItem("GSID",this.get("cookie"));break}},match:function(){return this.get("cookie")===this.get("session")}},validateFA=function(){switch(true){case typeof source==="undefined":case (!source||!root):case (!fsdCustData||!fsdCustData.financialAdvisorTaskEligible):case (!fsdNavClientOptions||!fsdNavClientOptions.locale||fsdNavClientOptions.locale.toLowerCase()!=="en-us"):case $advisor.hasClass("ready"):return false;break;default:return true;break}},setContent=function(options){var contentReady=false;if(!!fsdDefaultSettings&&!!fsdDefaultSettings.fsdSessionStorage&&!fsdDefaultSettings.fsdTurnOffLocalStorage&&!!sessionStorage.getItem("financialAdvisorData")&&(sessionStorage.getItem("financialAdvisorData")!=="{}")&&GSID.match()){data=JSON.parse(sessionStorage.getItem("financialAdvisorData"));return options.success(data)}if(!!fsdNavClientOptions.clientName&&!!fsdNavClientOptions.pipadDomainUrl&&fsdNavClientOptions.clientName.toUpperCase()!="OLB"){source=fsdNavClientOptions.pipadDomainUrl+source}$jq.ajax({url:source,cache:false,jsonp:"callback",dataType:"jsonp",contentType:"application/json",success:options.success,error:options.failure})},insertMustache=function($node,data){var mustache=/{{(.*?)}}/gi,braces=/(\{\{)|(\}\})/gi,html=$node.html(),matches=html.match(mustache),match=new RegExp(),variable="",value="";for(var i=0;i<matches.length;i++){variable=matches[i].replace(braces,"");value=typeof data==="object"?ref(data,variable):data;match=new RegExp(matches[i],"gi");html=html.replace(match,value?value:"")}return $node.html(html)},insertFinancialAdvisor=function(data){if(fsdDefaultSettings.fsdSessionStorage&&!fsdDefaultSettings.fsdTurnOffLocalStorage&&!$jq.isEmptyObject(data)){sessionStorage.setItem("financialAdvisorData",JSON.stringify(data));GSID.set("session")}var advisorData,type,$allDetails=$jq(),$details=$jq();advisorData=data[root];if(!advisorData){removeFinancialAdvisor();return false}type=advisorData.type;if(!type){removeFinancialAdvisor();return false}type=type.toLowerCase();$allDetails=$jq(".details",$advisor);$details=$allDetails.filter("."+type);$allDetails.not($details).remove();$jq("[data-loop]",$advisor).each(function(){var $repeat=$jq(this),loop=$repeat.data("loop"),loopData=ref(advisorData,loop);for(ld in loopData){$injected=insertMustache($repeat.clone(true),loopData[ld]);$injected.insertBefore($repeat).removeAttr("data-loop")}$repeat.remove()});$jq("[data-if]",$advisor).each(function(){var $item=$jq(this),whitespace=$item.data("whitespace"),nodes=$item.data("if").split(" "),$injected=$item.clone(true);for(var i=0;i<nodes.length;i++){$item.html().replace("{{val"+(i+1)+"}}","{{"+nodes[i]+"}}");var ifData=ref(advisorData,nodes[i]);$injected=insertMustache($injected,ifData)}if($injected.text().replace(/\s/gi,"")!=whitespace){$injected.insertBefore($item).removeAttr("data-if")}$item.remove()});$advisor=insertMustache($advisor,advisorData);var cssClass="";if(typeof advisorData.cssClass!=="undefined"){cssClass=advisorData.cssClass}if($advisor.hasClass("{{cssClass}}")){$advisor.removeClass("{{cssClass}}").addClass(cssClass)}$jq(".showhide",$advisor).click(function(e){var $showhide=$jq(this),href=$showhide.attr("href"),$target=$jq(href);e.preventDefault();$showhide.toggleClass("showing");$target.toggleClass("hiding")});$navHeader.removeClass(navHeaderAdvisorBAC).addClass(navHeaderAdvisorML);$advisor.addClass("ready")},removeFinancialAdvisor=function(){$advisor.remove();$navHeader.addClass(navHeaderAdvisorBAC)};$advisor.replaceWith($navAdvisorContent);$advisor=$navAdvisorContent;if(!validateFA()){removeFinancialAdvisor();return false}setContent({success:insertFinancialAdvisor,failure:removeFinancialAdvisor})})}window.boa=window.boa||{};window.boa.header=window.boa.header||{};window.boa.header.insertFinancialAdvisor=navFinancialAdvisor})();(function(){window.boa=window.boa||{};window.boa.search=window.boa.search||{};window.boa.search.i18n=window.boa.search.i18n||{};window.boa.search.stub=function($jq,callback){var defaults={target:".nav-search",$target:$jq(),toggle:".nav-search-toggle",$toggle:$jq(),container:".header-search"},required={data:{component:"utility",utility:"nav-search"}},settings={},_wireNLH=function(){var $nlh=settings.$target,$input=$jq('input[type="text"]',$nlh),$button=$jq('input[type="submit"]',$nlh),$form=$input.parents("form"),$placeholder=$jq(),getLabels=function(){boa.search.i18n.labels},shimPlaceholder=function($input){var options={force:false,input:"",element:"span",elementClass:"placeholder",hideClass:"hide",shimmedClass:"shimmed-placeholder"},hasNativeSupport=function(){return"placeholder" in $jq("<input/>")[0]};if($input.length===0||hasNativeSupport()){return $jq()}var $placeholder=$jq("<"+options.element+"/>").addClass(options.elementClass).text($input.attr(options.elementClass)).insertBefore($input.removeAttr(options.elementClass));$input.addClass(options.shimmedClass).bind("keyup.stub",function(e){if(this.value.length>0){$placeholder.addClass(options.hideClass)}else{$placeholder.removeClass(options.hideClass)}});$placeholder.bind("click.stub",function(){$input.focus()});return $placeholder},unbindStub=function(callback){$button.unbind("click.stub");$input.unbind("focus.stub");settings.$toggle.unbind("click.stub");$jq("body").unbind("click.stub");if(typeof callback=="function"){callback()}},passClickToSubmit=function(e){var $clicked=$jq(e.target);if($clicked.hasClass("icon-search")){e.preventDefault();e.stopPropagation();$clicked.parents("form").find(".submit").click()}},submitNLH=function(e){e.preventDefault();var $form=$jq(this),term=$form.find("input[type=text]").val(),url=$form.attr("action"),query=(typeof term==="string")?escape(term):"",lang=(typeof $boaLangObj==="object")?$boaLangObj.boaLang.substr(0,2):"en",qs='#?state={"query"%3A"'+query+'"%2C"lang"%3A"'+lang+'"}&id=1';location.href=url+qs;return false},loadNLHEmpty=function(e){e.preventDefault();e.stopPropagation();var triggerSuggestions=function(){$jq("form",$nlh).submit()},checkReady=function(){var checkCount=0,checkSearch=function(){checkCount++;if(boa.search.isNavSearchInitialized||checkCount>50){clearInterval(checkInterval);triggerSuggestions()}},checkInterval=setInterval(checkSearch,250)};unbindStub(checkReady);loadNLH()},serverUrl=(window.fsdNavClientOptions&&window.fsdNavClientOptions.pipadDomainUrl)?window.fsdNavClientOptions.pipadDomainUrl:"",appendServer=function(pageUrl){return pageUrl.match(/http:|https:/gi)?url:serverUrl+pageUrl},loadNLH=function(e){var $form=$input.parents("form"),CSS=appendServer($form.data("css")),JS=appendServer($form.data("js")),completed=function(){$form.unbind("submit.stub");unbindStub(function(){settings.$toggle.click();$input.focus()});if(typeof callback=="function"){callback()}},failed=function(){shimPlaceholder($input);unbindStub()},link=document.createElement("link");$form.attr("action",appendServer($form.attr("action")));link.type="text/css";link.rel="stylesheet";link.href=CSS;document.getElementsByTagName("head")[0].appendChild(link);$jq.ajax({url:JS,cache:true,dataType:"script",success:completed,error:failed})};if(window.cfLoader){window.cfLoader.init(["cnx-regular","cnx-medium"])}getLabels();$placeholder=shimPlaceholder($input);$jq("body").bind("click.stub",passClickToSubmit);$form.bind("submit.stub",submitNLH);$button.bind("click.stub",loadNLHEmpty);$input.attr("value","").bind("focus.stub",loadNLH);settings.$toggle.bind("click.stub",loadNLH);_injectIcons(settings.$target.add(settings.$toggle));$nlh.addClass("ready")},_injectIcons=function($container){var $icons=$jq("[data-icon]",$container).add($container.filter("[data-icon]"));$icons.each(function(){var $object=$jq(this),iconName=$object.data("icon"),iconClass=$jq.map(iconName.split(" "),function(a){return"icon-"+a}).join(" "),$icon=$jq('<div class="icon"/>').addClass(iconClass),iconParts=4;if(iconName==="#!"){return}for(var i=1;i<=iconParts;i++){$icon.append('<div class="icon-layer icon-layer--level'+i+'"/>')}$object.removeData("icon").attr("data-icon","#!");$object.append($icon)})},_initialize=function(options){var data;settings=$jq.extend({},defaults,options,required);settings.$target=$jq(settings.target);settings.$toggle=$jq(settings.toggle);for(data in settings.data){if(settings.$target.data(data)){settings.data[data]=settings.$target.data(data)}}_wireNLH()};_initialize()}})();(function(){var arrIndexOf=function(haystack,needle){for(var i=0;i<haystack.length;i++){if(haystack[i]===needle){return i}}return -1},arrCheckPush=function(arr,entry){entry=(typeof entry!=="object"||entry.length===0)?[entry]:entry;for(var i=0;i<entry.length;i++){if(arrIndexOf(arr,entry[i])<0){arr.push(entry[i])}}return arr},experience={groups:{filter:{label:"Filter",base:"flt"},os:{label:"Operating System",base:"os"},browser:{label:"Browser",base:"br"}},tests:{Locale:{test:function(){if(typeof fsdNavClientOptions==="object"){if(typeof fsdNavClientOptions.clientName==="string"&&fsdNavClientOptions.clientName==="fiserv"){return false}if(typeof fsdNavClientOptions.forceNavInLocale==="string"&&fsdNavClientOptions.forceNavInLocale!==""&&fsdNavClientOptions.forceNavInLocale!=="false"&&fsdNavClientOptions.forceNavInLocale!==false){return false}}return true},marker:"localeAware",type:"filter"},"All Filters Applied":{test:true,marker:"applied",type:"filter"},Windows:{test:"(Windows)",marker:"win",type:"os"},Macintosh:{test:"(Macintosh)",marker:"mac",type:"os"},"Generic OS":{test:false,marker:"none",type:"os"},Chrome:{test:"(Chrome\\/)(.*?[\\s|$])",marker:"chrome",type:"browser"},Firefox:{test:"(Firefox\\/)(.*?[\\s|$])",marker:"firefox",type:"browser"},"Internet Explorer":{test:"(MSIE\\s)(.*?)[;|$]",marker:"msie",type:"browser"},Safari:{test:"(Version\\/)(.*?[\\s|$]).*Safari",marker:"safari",type:"browser"},Webkit:{test:"(AppleWebKit\\/)(.*?[\\s|$])",marker:"webkit",type:"browser"},"Generic Browser":{test:false,marker:"none",type:"browser"}}},currentExperience={},setExperience=function($jq){if(typeof $jq!=="function"){return}var BASE_PREFIX="exp",html=document.documentElement,e=experience,userAgent=navigator.userAgent,cssClass=[],counts={},OS="";for(t in e.tests){counts[e.tests[t].type]=0}for(t in e.tests){var strTest=e.tests[t].test,boolTest=(typeof strTest==="boolean")?strTest:false,test=(typeof strTest==="function")?strTest():new RegExp(strTest),type=e.tests[t].type,marker=e.tests[t].marker,version="",arrVersion=[],matched=null,groupCSS=BASE_PREFIX+"-"+experience.groups[type].base,specificCSS="",buildClass=function(current,add){if(current!==""){add=current+((add!==""?"-":"")+add)}return add.replace(/\s/gi,"")};if(boolTest||(typeof strTest==="function"&&test===true)||(typeof strTest==="string"&&test.test(userAgent))){e.tests[t].valid=true;specificCSS=buildClass(groupCSS,marker);cssClass=arrCheckPush(cssClass,specificCSS);var targetClass=specificCSS+"-only";$jq("."+targetClass).removeClass(targetClass);counts[type]++;currentExperience[type]=specificCSS;matched=userAgent.match(test);if(matched&&matched.length>=3){version=matched[2];arrVersion=version.split(".")}for(var i=0;i<arrVersion.length;i++){version=buildClass(specificCSS,"v"+arrVersion.slice(0,i+1).join("_"));cssClass=arrCheckPush(cssClass,version)}}}for(var c in counts){if(counts[c]==0){switch(c){case"os":cssClass.push(e.tests["Generic OS"].marker);break;case"browser":cssClass.push(e.tests["Generic Browser"].marker);break}}}var currentClasses=[];currentClasses=arrCheckPush(currentClasses,html.className.split(" "));for(i=0;i<cssClass.length;i++){currentClasses=arrCheckPush(currentClasses,cssClass[i])}html.className=currentClasses.join(" ")};window.boa=window.boa||{};window.boa.experience=window.boa.experience||{};window.boa.experience.set=setExperience})();(function(){var cfLoader=(function($){var debugMode=false,fontNames=[],loadedFontNames=[],$blankTestDiv,blankTestDivStatus,timers={},timerId=0,$html,loading="-loading",active="-active",inactive="-inactive",callback;var settings={namespace:"cf-",maxLoadTime:5000,testFrequency:100,path:"/pa/global-assets/1.0/font/{f}/{f}",fontStyle:"@font-face { font-family: '{f}'; src: url('{p}.eot'); src: url('{p}.eot?#iefix') format('embedded-opentype'), url('{p}.woff') format('woff'), url('{p}.ttf') format('truetype'); font-weight: normal; font-style: normal; font-variant: normal; }"};var _debug=function(msg){if(debugMode==true){console.log(msg)}},_contains=function(needle,haystack){return haystack&&~haystack.indexOf(needle)},_isUniqueItem=function(item,array){var l=array.length;_debug("_isUniqueItem | called with item: "+item+" and array: "+((array.length)?array.join():"empty array"));for(var i=0;i<l;i++){if(item==array[i]){return false}}_debug("_isUniqueItem | font "+item+" is unique. Return true: add it to list");return true},_timeNow=function(){return new Date().getTime()},_test=function(test,callback,frequency,timeout){var id=timerId++,start=_timeNow(),time,isTimeout=false;frequency=frequency||1;timers[id]=setInterval(function(){time=_timeNow()-start;if(test()||(timeout&&(isTimeout=time>timeout))){callback.call(window,isTimeout,time);clearInterval(timers[id])}},frequency)},_checkDomain=function(){var domain=window.fsdNavClientOptions&&window.fsdNavClientOptions.pipadDomainUrl;if(domain){settings.path=domain+settings.path}},_buildFontNames=function(){if(!fontNames.length){var font;$("[data-font]").not('[data-font="#!"]').each(function(){var $this=$(this);font=$this.data("font");$this.attr("data-font","#!").addClass(font);_debug("_buildFontNames | font to build: "+font);if(_isUniqueItem(font,fontNames)&&_isUniqueItem(settings.namespace+font,loadedFontNames)){fontNames=fontNames.concat([font])}});_debug("_buildFontNames | List of font names after unique filter: "+fontNames.join())}},_createBlankDiv=function(){if(!$blankTestDiv){$blankTestDiv=$('<div aria-hidden="true" style="position:absolute;top:-999em;left:-999em;width:auto;font-size:300px;font-family:serif">BlankTestESs</div>')}if(!blankTestDivStatus){$blankTestDiv.appendTo(document.documentElement);blankTestDivStatus=1;_debug("_createBlankDiv | baseline width of $blankTestDiv to compare against: "+$blankTestDiv.width());if(!$blankTestDiv.width()){_test(function(){return document.body},function(){$blankTestDiv.appendTo("body");blankTestDivStatus=2;_debug("_createBlankDiv | IE6/7 div inserted into <body> after _testing. $blankTestDiv.width(): "+$blankTestDiv.width())},settings.testFrequency)}else{blankTestDivStatus=2}}},_buildFonts=function(){var l=fontNames.length,fontName,fontTemplate=/\{f\}/g,fontPath,pathTemplate=/\{p\}/g,fontStyle,fontCSS=[],namespacedFontName,$testDiv;$html=$("html");for(var i=0;i<l;i++){fontName=fontNames[i].toLowerCase();fontPath=settings.path.replace(fontTemplate,fontName);fontStyle=settings.fontStyle.replace(fontTemplate,fontName).replace(pathTemplate,fontPath);fontCSS.push(fontStyle);$testDiv=$blankTestDiv.clone().css({"font-family":'"'+fontName+'", serif'});namespacedFontName=settings.namespace+fontName;$html.addClass(namespacedFontName+loading);_canWeTestFont($testDiv,namespacedFontName)}return fontCSS},_canWeTestFont=function($testDiv,namespacedFontName){if(blankTestDivStatus===2){_testTheFont($testDiv,namespacedFontName)}else{_test(function(){return blankTestDivStatus===2},function(){_testTheFont($testDiv,namespacedFontName)},settings.testFrequency)}},_testTheFont=function($testDiv,namespacedFontName){_debug("_testTheFont | <body> element exists, and $blankTestDiv inserted into DOM. \nTesting of the font-face-styled div has started for: "+namespacedFontName);_debug($testDiv);$testDiv.appendTo("body");_test(function(){_debug("_testTheFont | testing "+namespacedFontName+": $blankTestDiv.width() "+$blankTestDiv.width()+" compared to $testDiv.width(): "+$testDiv.width());return $blankTestDiv.width()!==$testDiv.width()},function(timeout){if(timeout){$html.removeClass(namespacedFontName+loading);$html.addClass(namespacedFontName+inactive);_debug("_testTheFont | timeout occurred for: "+namespacedFontName)}else{$html.removeClass(namespacedFontName+loading);$html.addClass(namespacedFontName+active);_debug("_testTheFont | successful load detected for: "+namespacedFontName);loadedFontNames.push(namespacedFontName);_debug("_testTheFont | loadedFontNames: "+loadedFontNames.join())}if(callback){callback(namespacedFontName,timeout)}},settings.testFrequency,settings.maxLoadTime)},_loadFonts=function(cssArray){_debug("_loadFonts | received array from _buildFonts and then inserts into DOM as <style>. The output of array is below:");_debug(cssArray.join("\n\n"));var style=document.createElement("style"),text,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement,css=cssArray.join("");style.setAttribute("type","text/css");head.insertBefore(style,head.firstChild);if(style.styleSheet){try{style.styleSheet.cssText=css}catch(e){var namespacedFontName;while(fontNames.length){namespacedFontName=settings.namespace+fontNames.pop();$html.removeClass(namespacedFontName+loading);$html.addClass(namespacedFontName+inactive)}}}else{text=document.createTextNode(css);style.appendChild(text)}_debug(style)};var init=function(){var l=arguments.length;_debug("init | init called with "+l+" arguments.");if(l){for(var i=0;i<l;i++){if(_contains("rray",arguments[i].constructor.toString())){fontNames=arguments[i];_debug("init | array passed as argument index "+i+": "+fontNames.join(""))}else{if(typeof arguments[i]==="object"){$=arguments[i].jQuery?arguments[i].jQuery:$;$.extend(settings,arguments[i]);_debug("init | object passed as argument index"+i+": "+((typeof JSON!=="undefined")?JSON.stringify(arguments[i]):arguments[i]))}else{if(typeof arguments[i]==="function"){callback=arguments[i];_debug("init | callback function passed as argument index "+i+": "+arguments[i].toString())}else{throw new Error("cfLoader.init(): You passed an argument that is not supported. Please use:\nAn Object containing settings or\nAn array containing font names or\nA callback function")}}}}}if(settings.jQuery){$=settings.jQuery}if($&&$.fn&&$.fn.jquery){conductor()}},conductor=function(){_debug("conductor | initialized with fontNames: "+((fontNames.length)?fontNames:"empty array"));_buildFontNames();if($.fn.jquery=="1.3.2"){return $("html").addClass("cf-force-show-crowbar")}if(!fontNames.length){return}_createBlankDiv();_checkDomain();var fontCSSArray=_buildFonts();_loadFonts(fontCSSArray);fontNames=[]};return{init:init,refresh:conductor}})(jQuery);window.boa=window.boa||{};window.boa.fontLoader=cfLoader})();(function(){var languages={English:{regex:/en.*/gmi,iso:"en-us"},Spanish:{regex:/es.*/gmi,iso:"es-us"}},defaultLanguage="English",standardizeLanguage=function(lang){var current=defaultLanguage;for(l in languages){if(typeof lang!=="undefined"&&lang!==null){if(lang.match(languages[l].regex)!==null){current=l;break}}}return languages[current].iso};window.boa=window.boa||{};window.boa.overlay=window.boa.overlay||{};window.boa.overlay.jquery=$jq;window.boa.overlay.bindBOAFunctions=function(){$jq(".boa-fn").each(function(){var $this=$jq(this);switch(true){case $this.hasClass("boa-fn-ool"):window.boa.overlay.jquery=$jq;$this.click(window.boa.overlay.ool.click).removeClass("boa-fn-ool");break}})};window.boa.overlay.ool=window.boa.overlay.ool||{};window.boa.overlay.ool.click=function(e){e.preventDefault();var $jq=window.boa.overlay.jquery,$link=$jq(e.target);if(typeof $link.attr("data-target-language")==="undefined"||$jq.trim($link.attr("data-target-language"))===""){$link=$jq(e.target).closest(" a ")}var linkTo=$link.attr("href"),pageLang=window.fsdDefaultSettings?window.fsdDefaultSettings.fsdCurrLang:"",linkLang=$link.attr("data-target-language"),target=$link.attr("target"),targetSize=$link.attr("data-target-size"),targetPosition=$link.attr("data-target-position"),targetDefaults={location:"yes",menubar:"yes",scrollbars:"yes",status:"no",titlebar:"yes",toolbar:"yes",resizable:"yes"},targetOptions=$link.attr("data-target-options"),dataFunction=$link.attr("data-function"),isOOLEligible=window.fsdCustData?window.fsdCustData.fsdOOLEligibility:"true",isNewWindow=false,winSize="",isMLFlag=false,isDataFunc=false,isBillpayOOLEligible="false",dataIsBillpayOOLEligible=$link.attr("data-isbillpayooleligible");if(typeof $link.data("href")==="string"&&$link.data("href")!==""){linkTo=$link.data("href")}pageLang=standardizeLanguage(pageLang);linkLang=standardizeLanguage(linkLang);if(typeof linkLang==="undefined"||$jq.trim(linkLang)===""){var arrClass=$link.attr("class").split(" "),matching=/target-language-(.*)/i,matched=null;for(var i=0;i<arrClass.length;i++){matched=arrClass[i].match(matching);if(matched){linkLang=matched[1]}}}if(typeof linkTo!=="string"||typeof linkLang!=="string"||pageLang===""){return}var patt=new RegExp("mlinterstitial");var res=patt.test(linkTo);if(res){isMLFlag=true}var isSNRAjaxCompleted=false;if($link.hasClass("completeYourApplicationLink")){var saveReturnURL=fsdDefaultSettings.fsdPipadDomain+"/myaccounts/ao/generateSavedAppToken.go";if(typeof $link.data("appid")!=="undefined"){saveReturnURL+="?appId="+$link.data("appid")}$jq.ajax({url:saveReturnURL,type:"POST",timeout:5000,async:false,crossDomain:true,dataType:"jsonp",jsonpCallback:"callback",success:function(response){if(typeof(response.CustomerIDToken)!=="undefined"&&response.CustomerIDToken!==null){linkTo=linkTo+"&custId="+response.CustomerIDToken}linkTo=linkTo+"&target=_blank"},complete:function(){isSNRAjaxCompleted=true}})}if(typeof(target)!=="undefined"&&target!==null&&target!==""&&target==="_blank"){isNewWindow=true}if(typeof(dataFunction)!=="undefined"&&dataFunction!==null&&dataFunction!==""){isDataFunc=true}if(typeof(targetSize)!=="undefined"&&targetSize!==null&&targetSize!==""){var size=targetSize.split("x");winSize=winSize+"height="+size[0]+",width="+size[1]+","}if(typeof(targetPosition)!=="undefined"&&targetPosition!==null&&targetPosition!==""){var position=targetPosition.split("x");winSize=winSize+"top="+position[0]+",left="+position[1]+","}if(typeof(dataIsBillpayOOLEligible)!=="undefined"&&dataIsBillpayOOLEligible!==null&&dataIsBillpayOOLEligible!==""){isBillpayOOLEligible=dataIsBillpayOOLEligible}if(typeof(targetOptions)!=="undefined"&&targetOptions!==null&&targetOptions!==""){var winObject={},winOptions=targetOptions.split(",");for(var i=0;i<winOptions.length;i++){var selector=winOptions[i].substring(0,1);winObject[winOptions[i].substring(1)]=selector==="+"?"yes":"no"}targetOptions=$jq.extend(true,targetDefaults,winObject)}for(var attribute in targetDefaults){winSize=winSize+attribute+"="+targetDefaults[attribute]+","}winSize=winSize.length>0?winSize.substr(0,winSize.length-1):"";if($link.hasClass("completeYourApplicationLink")||$link.hasClass("inline-offer-button")){winSize=""}if(typeof(fsdNavClientOptions)!=="undefined"&&typeof(fsdNavClientOptions.sourceApplication)!=="undefined"&&fsdNavClientOptions.sourceApplication!==null&&(fsdNavClientOptions.sourceApplication==="yodlee"||(isBillpayOOLEligible==="false"&&fsdNavClientOptions.clientActiveTab!="billpay"&&($jq(this).closest("li#fsd-li-billpay").length>0||$jq(this).attr("id")==="fsd-li-billpay")))){isOOLEligible="false"}if(isMLFlag&&(isOOLEligible==="false"||linkLang.toLowerCase()===pageLang.toLowerCase())){window.boa.overlay.MLInterstitial($jq,linkTo)}else{if(isOOLEligible==="false"||linkLang.toLowerCase()===pageLang.toLowerCase()){if(isDataFunc){eval(dataFunction+"('"+$link+"')")}if($link.hasClass("completeYourApplicationLink")&&!isSNRAjaxCompleted){var setTimer=setInterval(function(){if(isSNRAjaxCompleted){window.boa.overlay.ool.redirect(linkTo,isNewWindow,winSize);clearInterval(setTimer)}},500)}else{window.boa.overlay.ool.redirect(linkTo,isNewWindow,winSize)}}else{fsdInvokeModal.initMask();var winH=$jq(window).height();var winW=$jq(window).width()/2;$jq("body").prepend('<div id="fsd-oolModal" class="fsd-modal"></div>');var oolModal=$jq("#fsd-oolModal");$jq(".fsd-ool-content").css("visibility","visible");var oolContentClone=($jq(".fsd-ool-content").clone()).show();oolModal.html(oolContentClone);oolModal.css({top:(((winH)-(oolModal.height()))/2)+$jq(window).scrollTop(),left:((winW)-(oolModal.width())/2)});oolModal.show().focus();$jq("a.fsd-cancelButton,#fsd-cancel a").click(function(e){e.preventDefault();fsdInvokeModal.modalDestroy()});$jq("#fsd-oolModal #fsd-continue a").click(function(e){e.preventDefault();e.stopPropagation();var redirect=function(){if(isDataFunc&&typeof window[dataFunction]=="function"){window[dataFunction]()}if(isMLFlag){fsdInvokeModal.modalDestroy();window.boa.overlay.MLInterstitial($jq,linkTo)}else{window.boa.overlay.ool.redirect(linkTo,isNewWindow,winSize)}};if($jq("#fsd-OOLSuppression").prop("checked")||$jq("#OOLSuppression").prop("checked")){var suppressUrl=fsdDefaultSettings.fsdPipadDomain+"/myaccounts/ao/oolSupression.go?OOLSuppVal=true";fsdCustData=fsdCustData||{};var custDataHolder="";if(typeof(fsdCustData)!="undefined"){fsdCustData.fsdOOLEligibility="false";custDataHolder="<script>var fsdCustData="+JSON.stringify(fsdCustData)+";<\/script>";sessionStorage.setItem("fsdcustdata",custDataHolder)}setTimeout(redirect,250);$jq.ajax({url:suppressUrl,dataType:"json",cache:false,type:"POST",contentType:"application/json; charset=utf-8"})}else{redirect()}fsdInvokeModal.modalDestroy()})}}};window.boa.overlay.ool.redirect=function(linkTo,isNewWindow,winSize){var redirectLink="",isBrain=linkTo.indexOf("/brain/")>=0,redirectTarget=linkTo.split("target=")[1],urlPattern=new RegExp("void"),validUrl=urlPattern.test(linkTo),urlVoid=validUrl?true:false;if(isBrain&&typeof(redirectTarget)!=="undefined"&&redirectTarget!==null&&redirectTarget!==""){redirectLink=redirectTarget;if(winSize!==""){isNewWindow?window.open(fsdgeturl(redirectLink),"",winSize):fsdgoto(redirectLink)}else{isNewWindow?fsdgoto(redirectLink,isNewWindow):fsdgoto(redirectLink)}}else{redirectLink=fsdDefaultSettings.fsdPipadDomain+linkTo;if(linkTo.indexOf("http")!==-1){redirectLink=linkTo}if(isNewWindow===true&&!urlVoid){var newwin="";newwin=window.open(redirectLink,redirectTarget,winSize);if(winSize!==""&&newwin){newwin.focus()}}else{if(!urlVoid){window.location.href=redirectLink}}}};window.boa.overlay.MLInterstitial=function($jq,targetUrl){var redirectUrl;var iFlag="";if(typeof(isMerrillUserExpEnabled)=="undefined"){iFlag=fsdCustData.fsdMerrillUserExpEnabled}else{iFlag=isMerrillUserExpEnabled.toString()}if(iFlag=="true"){var options={skin:"modal-flex",width:740};$jq("#headerMLInterstitialPopup").boaFlexModal(options);var comptMode="",MLpopupCloseDiv=$jq("#headerMLInterstitialPopup-modalClose");if(MLpopupCloseDiv.length>0){MLpopupCloseDiv.remove()}redirectUrl=targetUrl+"&isMLInterstitialSuppressed=true"}else{redirectUrl=targetUrl}setTimeout(function(){if(redirectUrl!==""){redirectUrl=fsdDefaultSettings.fsdPipadDomain+redirectUrl;window.location.href=redirectUrl}},2000)};window.boa.overlay.sasi=function(){var rel="";if(typeof window.fsdCustData==="object"&&window.fsdCustData.SASI&&typeof window.fsdCustData.SASI==="object"&&window.fsdCustData.SASI.rel&&typeof window.fsdCustData.SASI.rel==="object"&&window.fsdCustData.SASI.rel!==null&&window.fsdCustData.SASI.rel!==""){rel='rel="'+window.fsdCustData.SASI.rel+'"'}var $jq={},current=[],$sasi=null,$content=null,$close=null,structure='<div id="sasi-overlay-module" class="sasi-overlay-module"><div class="dyna-content-skin"><a href="javascript:void(0);" class="ui-dialog-titlebar-close" id="sasi-overlay-close " rel="/myaccounts/signin/sasiPostProcessor.go?offerStatus=UNDECIDED&buttonClick=CloseX"><span class="ui-icon">close</span></a>{{content}}</div><div class="ada-hidden">End of Splash Content, close splash by using the close overlay link.</div></div>',cssClass="ui-dialog-sasi",closeLnkFlag=false,bgPageRefresh=false,$tabObjArray=[],cardSasiForceRefresh=false;var _misc=function(){var $modalFlex=$sasi.closest(".modal-flex");$sasi.css("height","auto");$modalFlex.find(".ui-dialog-titlebar").css("height","10px");var modalOpenFirst=true;if($modalFlex.hasClass("bac-dialog-closedefault")){modalOpenFirst=false}if(modalOpenFirst){$modalFlex.find(".ui-dialog-titlebar-close:eq(0)").remove();$modalFlex.addClass("bac-dialog-closedefault")}if($sasi.find("a.btn-reload").length>0){bgPageRefresh=true}(function($jq,undefined){if($jq.ui&&$jq.ui.dialog&&$jq.ui.dialog.overlay){$jq.ui.dialog.overlay.events=$jq.map("focus,keydown,keypress".split(","),function(event){return event+".dialog-overlay"}).join(" ")}}(jQuery))},_afterOpen=function(){$jq(".ui-dialog").addClass("ui-dialog-sasi");$jq(".ui-widget-overlay").addClass("ui-widget-overlay-sasi")},_render=function(){var data=current[0].value;if($jq.trim(data)===""){_next();return}closeLnkFlag=true;bgPageRefresh=false;$tabObjArray=[];cardSasiForceRefresh=false;window.boa.overlay.isActive=true;$sasi=$jq(structure.replace(/\{\{content\}\}/gi,unescape(data))).appendTo($("body")),$content=$jq(".dyna-content-skin",$sasi),$close=$jq(".ui-dialog-titlebar-close",$sasi);var options={size:"custom",skin:"modal-flex",width:770,className:"sasi-overlay",buttons:{},onOpen:_afterOpen};$jq("body").find('div[class$="layout"]').filter(function(){return $jq(this).closest(".sasi-overlay-module").size()==0}).find(":tabbable").each(function(i){var $this=$jq(this);$this.attr("tabindex",-1);$tabObjArray[i]=$this});$sasi.boaFlexModal(options,false);_misc();$sasi.dialog({closeOnEscape:false});$sasi.closest(".ui-dialog").css("top",125);setTimeout(function(){$jq(".ui-widget-overlay").css("height",$(document).height());$jq("#sasi-overlay-module-modalClose").focus()},3000);$close.on("click",_close);if($.trim($(".footer",$sasi).text()).length==0){$(".footer",$sasi).removeClass("footer")}var $skipLink=$jq("a.ada-hidden:first");if($skipLink.text().toLowerCase().indexOf("skip")!=-1){$sasi.closest(".modal-flex").detach().insertBefore($skipLink)}else{$sasi.closest(".modal-flex").detach().insertBefore($jq("body").find('div[class$="layout"]').filter(function(){return $jq(this).closest(".sasi-overlay-module").size()==0}))}};var _init=function(jQuery){if(!window.fsdCustData||!window.fsdCustData.SASI){return}$jq=jQuery;current=window.fsdCustData.SASI.content;if(window.fsdCustData.SASI){if(window.fsdCustData.SASI.script&&(typeof loadAllCssJsFiles!="undefined")){loadAllCssJsFiles(fsdCustData.SASI.script,"js")}if(window.fsdCustData.SASI.style&&(typeof loadAllCssJsFiles!="undefined")){loadAllCssJsFiles(fsdCustData.SASI.style,"css")}}_open()},_open=function(){if(current.length===0){return}switch(current[0].type){case"html":_render();break;case"uri":$jq.ajax({url:current[0].value,dataType:"html",complete:function(data){current[0].type="html";current[0].value=data.responseText;_render()}});break}},_close=function(){if(cardSasiForceRefresh){location.href=$jq("#anc-btnContinue").attr("href")}var action=current[0].action||"";if(closeLnkFlag&&action!==""){$jq.post(action)}var $this=$jq(this),$rel=$this.attr("rel");if(closeLnkFlag&&$rel!==""){$jq.post($rel)}if($jq.isFunction("updateMainPageCMPageID")){updateMainPageCMPageID()}if(bgPageRefresh){window.location.reload()}$sasi.remove();$jq($tabObjArray).each(function(key,value){value.removeAttr("tabindex")});if(window.boa.overlay.isActive){window.boa.overlay.isActive=false;$jq(document).trigger("overlay-closed")}_next()},_next=function(){current.shift();_open()};return{init:_init,open:_open,close:_close}}()})();(function(){window.boa=window.boa||{};window.boa.log=function(){var SERVER_URL="/myaccounts/ao/logClientData.go",SERVER_TIMEOUT=10000,$jq=null,log={logEntries:[]},agent=navigator.userAgent,app="",_jsonStringify=function(obj){if(typeof JSON!=="undefined"&&typeof JSON.stringify!=="undefined"){return JSON.stringify(obj)}else{$jq.extend({stringify:function stringify(obj){var t=typeof obj,n,v,json=[],arr=(obj&&obj.constructor===Array);if(t!=="object"||obj===null){if(t==="string"){obj='"'+obj+'"'}return String(obj)}else{for(n in obj){v=obj[n];t=typeof v;if(obj.hasOwnProperty(n)){if(t==="string"){v='"'+v+'"'}else{if(t==="object"&&v!==null){v=$.stringify(v)}}json.push((arr?"":'"'+n+'":')+String(v))}}return(arr?"[":"{")+String(json)+(arr?"]":"}")}}});return $jq.stringify(obj)}},_filterApplication=function(app){return app==="myaccounts"?app:""},_getApplication=function(path){var app=/^[\/](.*?)[\/]/gi.exec(path?path:window.location.pathname);return app?_filterApplication(app[1]):""},_package=function(log){log.client=agent;log.application=app;return _jsonStringify(log)},_send=function(){if(log.logEntries.length>0){$jq.ajax({url:SERVER_URL,timeout:SERVER_TIMEOUT,dataType:"json",cache:false,type:"POST",data:{logData:_package(log)},complete:_clear})}},_clear=function(pointer){if(pointer&&typeof pointer==="string"){log.logEntries.splice(pointer,1)}else{log={};log.logEntries=[]}return};_store=function(data){if(app===""){return}log.logEntries.push({layer:data.layer,type:data.type,details:data.details})},_action=function(data){_store(data)},_error=function(data){_store($jq.extend({},data,{type:"error"}))},_info=function(data){_store($jq.extend({},data,{type:"info"}))},_singleLine=function(html){return html.replace(/(\r\n|\n|\r)/gm," ").replace(/\s\s+/gm," ").replace(/=/gm,"#")},_scan=function(){$jq(".error-block").each(function(){var $error=$jq(this),error=_singleLine($error.html());_error({layer:"FTL",details:error});$error.remove()});_send()},_initialize=function(jQuery){$jq=jQuery;if(typeof $jq!=="function"){return}app=_getApplication();_scan()};return{init:_initialize,scan:_scan,error:_error,info:_info}}()})();(function(){var resolveObject=function resolve(path,obj){return[obj].concat(path.split(".")).reduce(function(prevObj,currKey){return prevObj[currKey]})},preparePath=function(path){path=path.replace(/\[(\w+)\]/g,".$1");path=path.replace(/^\./,"");return path.split(".")},setObjectValue=function(object,path,value){var o=object?object:{};path=preparePath(path);for(var i=0;i<path.length-1;i++){var n=path[i];if(n in o){o=o[n]}else{o[n]={};o=o[n]}}o[path[path.length-1]]=value},getObjectValue=function(object,path){var o=object?object:{},a=preparePath(path);while(a.length){var n=a.shift();if(n in o){o=o[n]}else{return}}return o};if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"}}var digitalDataEvent="bactm_digitalData_ready",sessionStorageName="digitalData",digitalData=function(){var queue={},complete=function(status){addBaselineData();announce(status)},storeBaselineDDO=function(){if(!sessionStorage.getItem(sessionStorageName)){sessionStorage.setItem(sessionStorageName,JSON.stringify(window.digitalData))}},bactm_validateValue=function(value){var isEmptyObject=function(obj){if(typeof obj==="object"){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true}else{return false}},isEmptyArray=function(arr){return(Array.isArray(arr)&&arr.length===0)},empty=(value===""||value===null||typeof value==="undefined"||isEmptyObject(value)||isEmptyArray(value));return !empty?true:false},addBaselineData=function(){var value="",ddo=window.digitalData,sources={custChatData:window.fsdCustData&&window.fsdCustData.chat?window.fsdCustData.chat:null,navOptions:window.fsdNavClientOptions},mapping={custChatData:{"user.authenticated":"authenticated","user.name.first":"name.first","user.name.last":"name.last","user.name.full":"name.full","user.preferred_rewards_tier":"rewards","user.segment":"segment","user.state":"state","page.attributes.chat.boa_associate":"associate","page.attributes.chat.customer_segment":"segment","page.attributes.chat.customer_lob":"lob","page.attributes.chat.data":"data","page.attributes.chat.entitlement_code":"entitlement_code","page.attributes.chat.first_login":"first_login","page.attributes.chat.boa_retiree":"retiree"},navOptions:{"page.pageInfo[0].language":"locale"}};for(var source in mapping){if(sources[source]){for(var target in mapping[source]){value=getObjectValue(sources[source],mapping[source][target]);if(bactm_validateValue(value)){setObjectValue(ddo,target,value)}}}}},announce=function(status){try{var announcement=new Event(digitalDataEvent,status)}catch(e){if(!document.createEvent){return}var announcement=document.createEvent("Event");announcement.initEvent(digitalDataEvent,true,true)}window.dispatchEvent(announcement);if(status.success){setTimeout(bactm_loadTMLib,1)}},_get=function(key){return getObjectValue(window.digitalData,key)},_set=function(key,value){return setObjectValue(window.digitalData,key,value)},processItemInQueue=function(queue,key){delete (queue[key]);if(Object.keys&&Object.keys(queue).length===0){complete({success:"Dependency registration complete."})}},handleQueue=function(){for(var q in queue){if(typeof queue[q]==="function"){queue[q](processItemInQueue.call(this,queue,q))}else{processItemInQueue(queue,q)}}},register=function(callback){var key=parseInt(Math.random(0,1)*100000000000);if(!queue[key]){queue[key]=callback}else{this.register(callback)}},process=function(){if(!window.digitalData){var storedDDO=JSON.parse(sessionStorage.getItem(sessionStorageName));if(storedDDO!==null){window.digitalData=storedDDO}else{return complete({failure:"No digitalData object found."})}}storeBaselineDDO();return(Object.keys&&Object.keys(queue).length>0)?handleQueue():complete({success:"digitalData found. No dependencies registered."})},fireCallback=function(cb){if(typeof cb==="function"){cb()}};return{register:register,announce:announce,process:process,get:_get,set:_set,fireCallback:fireCallback}}();window.boa=window.boa||{};window.boa.digitalData=digitalData||{};window.utag_data={};window.bactm_envSelector=window.bactm_envSelector||"notprod";function bactm_setTMLib(){var testString=window.location.href;if(testString.indexOf(".bankofamerica.com")>-1){var tempArr=testString.split(".bankofamerica.com");var tempStr=tempArr[0];if(tempStr.indexOf("//")>-1){tempArr=tempStr.split("//");tempStr=tempArr[1];if(tempStr.indexOf(".")>-1){tempArr=tempStr.split(".");tempStr=tempArr[0];var tempStrPt2=tempArr[1]}if(tempStr.indexOf("www")>-1){if(tempStr.indexOf("-")>-1){bactm_envSelector="notprod"}else{if(tempStrPt2!=null){if(tempStrPt2.indexOf("ecnp")>-1){bactm_envSelector="notprod"}}else{bactm_envSelector="prod"}}}else{if(tempStrPt2!=null){if(tempStrPt2.indexOf("ecnp")>-1){bactm_envSelector="notprod"}}else{bactm_envSelector="prod"}}}}window.bactm_envSelector=bactm_envSelector;return bactm_envSelector}bactm_setTMLib();function bactm_loadTMLib(a,b,c,d){a="//tags.tiqcdn.com/utag/bofa/olb/"+window.bactm_envSelector+"/utag.js";b=document;c="script";d=b.createElement(c);d.src=a;d.type="text/java"+c;d.async=true;a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)}})();(function(){Object.resolve=function(path,obj,safe){return path.split(".").reduce(function(prev,curr){return !safe?prev[curr]:(prev?prev[curr]:undefined)},obj||self)};window.boa=window.boa||{};window.boa.util=window.boa.util||{};window.boa.util.pingSite=function(options){if(!window.sessionStorage){return}var defaults={jQuery:$,uri:"https://bills.bankofamerica.com/sbp/i0715/clr.gif",times:2};if(options.jQuery){$jq=options.jQuery}options=$jq.extend({},defaults,options);var base="boaUtilPingSite",key=base+"_"+encodeURIComponent(options.uri),count=sessionStorage.getItem(key)?parseInt(sessionStorage.getItem(key)):0;if(count<options.times){sessionStorage.setItem(key,count+1);var img=new Image();img.src=options.uri+(options.uri.indexOf("?")>-1?"&":"?")+Date.now()}};window.boa.util.getEnvironment=function(){var host=window.location.host,environments={Development:{secure:{fallback:"secure-cert1.ecnp.bankofamerica.com",pattern:/(^secure)-.*?\.bankofamerica\.com/,replacement:"www"},www:{fallback:"www-cert1.ecnp.bankofamerica.com",pattern:/(^www)-.*?\.bankofamerica\.com/,replacement:"secure"}},Production:{secure:{fallback:"secure.bankofamerica.com",pattern:/(^secure)\.bankofamerica\.com/,replacement:"www"},www:{fallback:"www.bankofamerica.com",pattern:/(^www)\.bankofamerica\.com/,replacement:"secure"}},BreakFix:{secure:{fallback:"preview1-secure.ecnp.bankofamerica.com",pattern:/^(?:preview\d|review)(?:\d?)(-secure)(?:.*?)\.ecnp\.bankofamerica\.com/,replacement:""},www:{fallback:"preview1.ecnp.bankofamerica.com",pattern:/^(preview\d|review\d)(?!-secure)\.ecnp\.bankofamerica\.com/,replacement:"$1-secure"}}},getEnvironment=function(current){var e,server;for(e in environments){if(environments.hasOwnProperty(e)){for(server in environments[e]){if(environments[e][server].pattern.test(current)){return e}}}}return"Production"};return getEnvironment(host)}})();var closeLnkFlag=true;var bgPageRefresh=false;var $tabObjArray=[];var cardSasiForceRefresh=false;var enableCloseXSASI="";var showSASIWidgetFlag=true;var spartaSasiData="";var showSasiOverlay=function(data){if(typeof widgetSasiRedirectUrl!=="undefined"&&widgetSasiRedirectUrl!==""){var loader=document.createElement("script");loader.type="text/javascript";loader.src=widgetBaseURL+"/spa/widgets/loader/2.1.0/index.js";document.body.appendChild(loader);document.addEventListener("spartaLoaderLoaded",AMLspartaLoaderLoaded)}if(typeof fsdCustData=="object"&&fsdCustData.SpartaSASI!=undefined&&fsdCustData.SpartaSASI!=""&&offercode!=undefined&&offercode=="RB022"){console.log("loading the widget loader for SASI");var loader=document.createElement("script");loader.type="text/javascript";loader.src=widgetBaseURL+"/spa/widgets/loader/2.1.0/index.js";document.body.appendChild(loader);document.addEventListener("spartaLoaderLoaded",sasispartaLoaderLoaded)}else{if($.trim(data)!==""){boa.overlay=boa.overlay||{};boa.overlay.isActive=true;var $sasimodal=$("#sasi-overlay-module"),$sasi=$(".dyna-content-skin",$sasimodal),$close=$(".ui-dialog-titlebar-close",".dyna-content-skin"),$sasiModalDialog=$sasimodal.dialog();$close.show();$sasiModalDialog.dialog("close");$sasi.children("div").remove();var content=$sasi.html()+unescape(data);$sasi.html(content);if($sasi.find(".olb-ao-external-accounts-optin-module").length){var options={size:"custom",skin:"modal-flex",width:600,className:"sasi-overlay",buttons:{}}}else{var options={size:"custom",skin:"modal-flex",width:770,className:"sasi-overlay",buttons:{},onOpen:function(){$(".ui-dialog-titlebar-close").find("span.ui-icon-closethick").hide();if($("#enableCloseXSASI").length){enableCloseXSASI=$("#enableCloseXSASI").val()}if(enableCloseXSASI.toLowerCase()==="false"){$(".sasi-overlay-module a.ui-dialog-titlebar-close").hide()}}}}$("body").find('div[class$="layout"]').filter(function(){return $(this).closest(".sasi-overlay-module").size()==0}).find(":tabbable").each(function(i){var $this=$(this);$this.attr("tabindex",-1);$tabObjArray[i]=$this});$sasimodal.boaFlexModal(options,false);$sasimodal.dialog({closeOnEscape:false});$sasimodal.closest(".ui-dialog").css("top",125);setTimeout(function(){$(".ui-widget-overlay").css("height",$(document).height());$("#sasi-overlay-module-modalClose").focus()},3000);setTimeout(function(){$(".ui-dialog-titlebar-close").find("span.ui-icon-closethick").hide();if($("#enableCloseXSASI").length){enableCloseXSASI=$("#enableCloseXSASI").val()}if(enableCloseXSASI.toLowerCase()==="false"){$(".sasi-overlay-module a.ui-dialog-titlebar-close").hide()}if($("#hideCloseX").length&&$("#hideCloseX").val().toLowerCase()=="true"){$("a#sasi-overlay-module-modalClose").hide()}},1500);$close.die("click");$close.live("click",function(){if($close.closest(".dyna-content-skin").find(".ao-splash-main-content-module .contact-info-skin").length>0){}if(cardSasiForceRefresh){location.href=$("#anc-btnContinue").attr("href")}var $this=$(this),$rel=$this.attr("rel");sasiClosingTasks();if(closeLnkFlag&&$rel!==""){$.post($rel)}});if($.trim($(".footer",$sasi).text()).length==0){$(".footer",$sasi).removeClass("footer")}sasimiscellaneous();var $skipLink=$("a.ada-hidden:first");if($skipLink.text().toLowerCase().indexOf("skip")!=-1){$("#sasi-overlay-module").closest(".modal-flex").detach().insertBefore($skipLink)}else{$("#sasi-overlay-module").closest(".modal-flex").detach().insertBefore($("body").find('div[class$="layout"]').filter(function(){return $(this).closest(".sasi-overlay-module").size()==0}))}}}};var sasimiscellaneous=function(){var $sasiOverlayModule=$("#sasi-overlay-module"),$modalFlex=$sasiOverlayModule.closest(".modal-flex");$sasiOverlayModule.css("height","auto");$modalFlex.find(".ui-dialog-titlebar").css("height","10px");var modalOpenFirst=true;if($modalFlex.hasClass("bac-dialog-closedefault")){modalOpenFirst=false}if(modalOpenFirst){$modalFlex.find(".ui-dialog-titlebar-close:eq(0)").remove();$modalFlex.addClass("bac-dialog-closedefault")}if($sasiOverlayModule.find("a.btn-reload").length>0){bgPageRefresh=true}(function($,undefined){if($.ui&&$.ui.dialog&&$.ui.dialog.overlay){$.ui.dialog.overlay.events=$.map("focus,keydown,keypress".split(","),function(event){return event+".dialog-overlay"}).join(" ")}}(jQuery))};var showSASI=function(targetUrl){if(spartaWidget=="true"){if(LoadAMLSpartaWidget=="false"){var widgetBaseURL="/customer-service/myprofile/aonamessnconfirm?subChannel=ECSASI";$.ajax({url:fsdDefaultSettings.fsdPipadDomain+widgetBaseURL,type:"POST",datatype:"json",contentType:"application/json; charset=utf-8",async:true,beforeSend:function(){$.getScript("/customer-service/spa-assets/components/utilities/vendor/require/2.2.0/js/require.js").done(function(){console.log("require js loaded")}).fail(function(){return false})},success:function(data){var $sasimodal=$("#sasi-overlay-module"),$sasi=$(".dyna-content-skin",$sasimodal),options={size:"custom",skin:"modal-flex",width:800,className:"sasi-widget-AM001-overlay"};$sasi.removeClass("hide").empty();$sasi.append(data);$sasi.boaFlexModal(options)},error:function(x,e){},complete:function(){var $amlSasi=$(".sasi-widget-AM001-overlay");if($amlSasi!=undefined){$amlSasi.css("top",125)}}})}else{var widgetBaseURL=fsdDefaultSettings.fsdPipadDomain+"/customer-service/myprofile/aonamessnconfirm";var AMLCPEWidget={name:"cpe-sasi-customer-info-widget",version:"1.0.0",container:"sasi-overlay-module",path:"",language:$("html").attr("lang").toLowerCase()=="en-us"?"":"es"};if(window.sparta!="undefined"&&window.sparta.widgetLoader!="undefined"){window.sparta.widgetLoader.load(AMLCPEWidget);window.sparta.widgetLoader.sub("errorLoadingWidget",function(event){console.log("Error loading widget: ",event.widget.name);console.log("HTTP code: ",event.xhrReq.status)});window.sparta.widgetLoader.sub("SPARTA_WIDGET_READY.spartaWidgetUtility",function(event){console.log("AML CPE widget loaded");console.log(event);var $sasimodal=$("#sasi-overlay-module");$sasimodal.css("display","block")})}}}else{$.ajax({url:targetUrl,type:"POST",datatype:"json",contentType:"application/json; charset=utf-8",async:true,success:function(data){var $sasimodal=$("#sasi-overlay-module"),$sasi=$(".dyna-content-skin",$sasimodal);$sasi.append(data.widgetData.htmlSrc);$("#sasi-overlay-close",$sasimodal).addClass("hide");$(".ui-icon",$sasimodal).addClass("hide");var options={size:"custom",skin:"modal-flex",width:770,className:"sasi-overlay",buttons:{},onOpen:function(){$(".ui-dialog-titlebar-close").find("span.ui-icon-closethick").hide();if($("#enableCloseXSASI").length){enableCloseXSASI=$("#enableCloseXSASI").val()}if(enableCloseXSASI.toLowerCase()==="false"){$(".sasi-overlay-module a.ui-dialog-titlebar-close").hide()}if($("#hideCloseX").length&&$("#hideCloseX").val().toLowerCase()=="true"){$("button#sasi-overlay-module-modalClose").hide()}}};if(showSASIWidgetFlag){$sasimodal.boaFlexModal(options);$close=$(".ui-dialog-titlebar-close",".dyna-content-skin");$close.hide();$("#sasi-overlay-module-modalClose").focus()}},error:function(x,e){console.log("After call Fail"+x.status+"Response Text="+x.responseText)},complete:function(){widgetSasiRedirectUrl=""}})}};var sasiClosingTasks=function(){if(bgPageRefresh){window.location.reload()}else{var $Sasi=$("#sasi-overlay-module").dialog();$Sasi.dialog("close")}if($.isFunction("updateMainPageCMPageID")){updateMainPageCMPageID()}$($tabObjArray).each(function(key,value){value.removeAttr("tabindex")});if(boa.overlay.isActive){boa.overlay.isActive=false;$(document).trigger("overlay-closed")}};var showSpartaSASI=function(){var widgetBaseURL="";var sasis={paperless:{main:"sasiPaperlessModule",confirmation:"sasiPaperlessConfirmationModule"}};var SasiOptions={sasi:sasis.paperless,data:spartaSasiData};var SasiWidget={name:"sasi-widget",version:"1.0.0",container:"sasi-overlay-module",path:widgetBaseURL,options:SasiOptions,language:$("html").attr("lang").toLowerCase()=="en-us"?"":"es"};if(window.sparta!="undefined"&&window.sparta.widgetLoader!="undefined"){window.sparta.widgetLoader.load(SasiWidget);window.sparta.widgetLoader.sub("errorLoadingWidget",function(event){console.log("Error loading widget: ",event.widget.name);console.log("HTTP code: ",event.xhrReq.status)});window.sparta.widgetLoader.sub("SPARTA_WIDGET_READY.spartaWidgetUtility",function(event){console.log("Sasi widget loaded");console.log(event);var $sasimodal=$("#sasi-overlay-module");$sasimodal.css("display","block");sessionStorage.setItem("IsSpartaPaperlessSASI","true")})}};function sasispartaLoaderLoaded(){document.removeEventListener("spartaLoaderLoaded",sasispartaLoaderLoaded);console.log("loaded the SASI widget loader");window.sparta.widgetLoader.sub("errorLoadingWidget",function(event){console.log("Error loading widget: ",event.widget.name);console.log("HTTP code: ",event.xhrReq.status)});spartaSasiData=fsdCustData.SpartaSASI;showSpartaSASI()}function AMLspartaLoaderLoaded(){document.removeEventListener("spartaLoaderLoaded",AMLspartaLoaderLoaded);console.log("loaded the AML SASI widget loader");window.sparta.widgetLoader.sub("errorLoadingWidget",function(event){console.log("Error loading widget: ",event.widget.name);console.log("HTTP code: ",event.xhrReq.status)});showSASI(widgetSasiRedirectUrl)}(function(){function loadBrainInterstitialModal($){$("#viewpost-enroll, #goto-viewpost, .interstitial-brain").unbind("click").bind("click",function(){$("#viewpost_interstitial-ModalContainer").remove();if(!$("#viewpost_interstitial").length){$("body").append('<div id="viewpost_interstitial" class="hide"><div class="modal-content"><div id="loading-image" style="vertical-align:middle; text-align:center"><img src='+checkNonBACDomain("/pa/global-assets/1.0/graphic/processing-large.gif")+" /></div></div></div>")}$("#loading-image").removeClass("hide");var page_source,src_url;if(fsdNavClientOptions!==null&&fsdNavClientOptions!==undefined){page_source=fsdNavClientOptions.sourceApplication}src_url=checkNonBACDomain("/myaccounts/brain/redirect.go?target=viewpost&isWidget=true&source="+page_source);var options={skin:"modal-flex",width:740,closeTriggers:$("#returnto_boa"),onOpen:function(){$.ajax({method:"GET",url:src_url,dataType:"jsonp",success:function(data){$("#loading-image").addClass("hide");$(".ui-dialog-titlebar-close").toggleClass("ui-dialog-viewpost-close");$("#viewpost_interstitial-ModalContainer .modal-content").html(unescape(data.widgetData.htmlSrc));var win=$(window);var offset=$(document).scrollTop();var posLeft=0,posTop=0;if((win.width()-$("#viewpost_interstitial-ModalContainer").outerWidth())/2>0){posLeft=(win.width()-$("#viewpost_interstitial-ModalContainer").outerWidth())/2}var topAlignment=(offset+(win.height()/2))-$("#viewpost_interstitial-ModalContainer").outerHeight()/2;if(topAlignment>0){posTop=topAlignment}$("#viewpost_interstitial-ModalContainer").css({position:"absolute",left:posLeft,top:posTop});$("#viewpost_interstitial-ModalContainer").attr("tabindex","-1").focus();$("#viewpost_interstitial-modalClose").attr("name","viewpost-interstitial-close-modal")},error:function(){$("#loading-image").addClass("hide");window.parent.document.location.href=checkNonBACDomain("/myaccounts/ao/accounts-overview.go?msgId=ao_default_error");$("#viewpost_interstitial").dialog("close")}})}};$("#viewpost_interstitial").boaFlexModal(options)})}window.boa=window.boa||{};window.boa.header=window.boa.header||{};window.boa.header.loadBrainInterstitialModal=loadBrainInterstitialModal})();function checkNonBACDomain(url){if(fsdNavClientOptions.clientName!==undefined&&"olb"!==(fsdNavClientOptions.clientName.toLowerCase())&&fsdDefaultSettings.fsdPipadDomain!==undefined){url=fsdDefaultSettings.fsdPipadDomain+url}return url}try{function compareVersions(compare,minimum){var same=false,defaultMin="1.5.1",m,c;compare=typeof compare==="string"?compare.split("."):compare;minimum=typeof minimum==="undefined"?defaultMin.split("."):typeof minimum==="string"?minimum.split("."):minimum;for(var i=0;i<minimum.length;i++){m=parseInt(minimum[i]);c=parseInt(compare[i]);switch(true){case c>m:return true;case c<m:return false;case c==m:same=true;continue}}return same}if($&&$.fn&&$.fn.jquery&&compareVersions($.fn.jquery)){$(document).ready(function(){window.boa.header.loadBrainInterstitialModal($)})}}catch(e){}$.extend($.expr[":"],{data:function(elem,i,match){return !!$.data(elem,match[3])},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,"tabindex");return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName||"area"==nodeName?element.href||!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)["area"==nodeName?"parents":"closest"](":hidden").length},tabbable:function(element){var tabIndex=$.attr(element,"tabindex");return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(":focusable")}});function cureadCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}var contactSettings={flyspeed:300,isDisabled:false,currLang:"en-us",thisSessionStorage:false,allowBELogging:true,pipadDomain:"https://secure.bankofamerica.com",clicktocallLivePersonPath:"/pa/components/utilities/contact-us-util/1.0/script/bofa2_mtagconfig_eve_widget.js",expandText:"Expand ",collapseText:"Collapse "};var contactUsPipadDomain=window.location.protocol+"//"+window.location.host;if(contactUsPipadDomain!=undefined&&contactUsPipadDomain!=null&&contactUsPipadDomain!=""){contactSettings.pipadDomain=contactUsPipadDomain}if(typeof(cG7)!="undefined"){var pageIDVal=cG7.cM0[cm_ClientID]}$.fn.contactUsWidget=function(){var contactUsModuleParent=this;var mainLayer=$(contactUsModuleParent);var subLayer=$("div.sublayer",contactUsModuleParent);contactUsEvents();function contactUsEvents(){$("a.handle",contactUsModuleParent).click(function(e){fToggle(mainLayer,false,$("span:first",$(this)))});$("a.subBtn",contactUsModuleParent).click(function(e){fToggle(subLayer,false,$("a.subBtn span:first",contactUsModuleParent))});$("a.handle,a.plusMinusHandle,a.msubBtn ",contactUsModuleParent).keydown(function(e){if(e.keyCode==13||e.keyCode==32){e.preventDefault();$(this).click()}});$(".msubBtn",".olb-contact-us-module").live("click",function(){$("a.handle").trigger("click")});topicID=contactUsTopicMap[fsdContactUs.moduleId];if(typeof(contactUsData)=="object"&&typeof(fsdContactUs)=="object"){var currPageId=(fsdContactUs.moduleId==""||fsdContactUs.moduleId==undefined)?"":fsdContactUs.moduleId;if(contactUsData[currPageId]!=""||contactUsData[currPageId]!=undefined){$(".contact-us-data",contactUsModuleParent).html(contactUsData[currPageId])}if(fsdContactUs.otherWaystoContactusUrl!=undefined&&fsdContactUs.otherWaystoContactusUrl!=""&&fsdContactUs.otherWaystoContactusUrl!=null){$("#moreurl",contactUsModuleParent).attr("href",fsdContactUs.otherWaystoContactusUrl+"&topicId="+topicID)}else{$("#moreurl",contactUsModuleParent).attr("href",contactUsData.defaultUrlForOtherWaystoContactus+"&moduleId="+fsdContactUs.moduleId+"&topicId="+topicID)}}$(document).keydown(function(e){if(e.keyCode==27){e.preventDefault();fToggle(mainLayer,true,$("a.handle span:first",$(this)))}})}function setHandleCookie(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString())+";domain=.bankofamerica.com;path=/";document.cookie=c_name+"="+c_value}function CUWgetCookie(key){var CUWcookies=document.cookie.split("; ");for(var CUWi=0,CUWparts;(CUWparts=CUWcookies[CUWi]&&CUWcookies[CUWi].split("="));CUWi++){if(CUWdecode(CUWparts.shift())===key){return CUWdecode(CUWparts.join("="))}}return null}function CUWdecode(s){return decodeURIComponent(s.replace(/\+/g," "))}CUWgetCookieValue=CUWgetCookie("CUW");function cuwDeleteCookie(name){setHandleCookie(name,"",-1)}var HandleOpenCloseState=true;if(CUWgetCookieValue!=null&&CUWgetCookieValue=="min=1"){setTimeout(function(){$(".plusMinusHandle",".olb-contact-us-module").attr("class","plusHandle")},180);$(".handle",".olb-contact-us-module").hide();$(".cu-ada-handle-hidden",".olb-contact-us-module").html("Maximize");HandleOpenCloseState=false}$(".plusMinusHandle",".olb-contact-us-module").click(function(e){if(HandleOpenCloseState){HandleOpenCloseState=false;$(".handle").slideUp("fast");setTimeout(function(){$(".handle",".olb-contact-us-module").hide()},130);$(".handle .cu-ada-hidden",".olb-contact-us-module").hide();$(".plusMinusHandle",".olb-contact-us-module").attr("class","plusHandle");$(".plusMinusHandle",".olb-contact-us-module").fadeOut(function(){$(".plusMinusHandle").removeClass("class1").addClass("class2").fadeIn("fast")});("class","plusHandle");$(".cu-ada-handle-hidden",".olb-contact-us-module").html("Maximize");cuwDeleteCookie("CUW");setHandleCookie("CUW","min=1",1)}else{HandleOpenCloseState=true;$(".handle").slideDown("fast");$(".handle .cu-ada-hidden",".olb-contact-us-module").show();$(".plusHandle",".olb-contact-us-module").removeClass("plusHandle").addClass("plusMinusHandle");$(".cu-ada-handle-hidden",".olb-contact-us-module").html("Minimize");cuwDeleteCookie("CUW");setHandleCookie("CUW","min=0",1)}});function fToggle(el,forcedClosed,clickHandler){var containerWidth="-"+$(el).outerWidth();if(el.hasClass("open")||(forcedClosed!=undefined&&forcedClosed)){if(el.hasClass("olb-contact-us-module")){$(".plusMinusHandle",".olb-contact-us-module").fadeIn("fast");el.animate({right:-252},contactSettings.flySpeed,function(){$(this).removeClass("open")});setTimeout(function(){$(".default-skin",el).css("visibility","hidden")},500)}else{el.animate({right:containerWidth},contactSettings.flySpeed,function(){$(this).css("display","none").removeClass("open");$(".s2 .subBtn",$("default-skin",contactUsModuleParent)).attr("tabindex","0").attr("aria-live","rude").attr("role","region").focus()});$("a:first",el).removeAttr("tabindex").removeAttr("aria-live").removeAttr("role")}if($(".sublayer",el).hasClass("open")){fToggle($(subLayer),true,$("a.subBtn span:first",contactUsModuleParent))}}else{$("a",contactUsModuleParent).removeAttr("tabindex").removeAttr("aria-live").removeAttr("role");if(el.hasClass("olb-contact-us-module")){$(".plusMinusHandle",".olb-contact-us-module").fadeOut("slow");$(".default-skin",el).css("visibility","visible");el.animate({right:0},contactSettings.flySpeed,function(){$(this).addClass("open");$(".msubBtn",$(this)).attr("tabindex","0").attr("aria-live","rude").attr("role","region").focus();cuBElogger("/myaccounts/callus/callus.go?target=expwidget&ContUswidget=true&bEContUsSwitch=enabled&moduleId="+fsdContactUs.moduleId)})}else{el.css("display","block").animate({right:0},contactSettings.flySpeed,function(){$(this).addClass("open");$("a:first",$(this)).attr("tabindex","0").attr("aria-live","rude").attr("role","region").focus();cuBElogger("/myaccounts/callus/callus.go?target=callus&ContUswidget=true&bEContUsSwitch=enabled&moduleId="+fsdContactUs.moduleId)})}}if(clickHandler!=undefined){(clickHandler.text()==contactSettings.expandText)?(clickHandler.text(contactSettings.collapseText)):(clickHandler.text(contactSettings.expandText))}}function cuBElogger(url){var isLocalDevMode=(((window.location.href).search("ecomm-xman")>=0)||((window.location.href).search("file:")==0))?true:false;if(contactSettings.allowBELogging&&!isLocalDevMode){$.ajax({url:contactSettings.pipadDomain+url,dataType:"jsonp",timeout:contactSettings.Timeout,jsonp:true,cache:false,crossDomain:true})}}};$(document).ready(function(){if($(".olb-contact-us-module").length){var string=(document.location.href);var result=string.match(/es-us/i);if(result){contactSettings.currLang="es-us"}else{contactSettings.currLang="en-us"}if(!contactSettings.isDisabled){if(typeof window.localStorage!="undefined"&&window.localStorage!==null&&window.localStorage!==null){var storageTestKey="sTest",storage=window.sessionStorage;try{storage.setItem(storageTestKey,"test");storage.removeItem(storageTestKey);contactSettings.thisSessionStorage=true;sessionStorage.setItem("contactushtml",'<div class="olb-contact-us-module">'+$(".olb-contact-us-module").html()+"</div>")}catch(e){if(e.code==DOMException.QUOTA_EXCEEDED_ERR&&storage.length==0){contactSettings.thisSessionStorage=false}}}$(".olb-contact-us-module").contactUsWidget()}}});function OOLPopUpScheduleanappointment(link,contentId,appName){var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){var redirectLink;redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href=";redirectLink=redirectLink+encodeURIComponent(link);$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");if(appName=="overview"||appName=="offers"||appName=="coupons"||appName=="PIPADAO"||appName=="ADMIN_PAYMENTS"){redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked")}var newwin=window.open(redirectLink,"BankbyAppointment","directories=no,location=no,menubar=no,scrollbars=1,status=no,toolbar=no,resizable=yes,width=1030,height=750");newwin.focus();$("#continue a").unbind("click")});return false}function contactusgoto(target,isNewWindow){if(isNewWindow!=undefined&&isNewWindow){if(target=="help"){window.open(contactusgeturl(target),"","width=400,height=300,status=yes,menubar=yes")}else{if(target.indexOf("scheduleanappointment")>-1){var newwin=window.open(contactusgeturl(target),"BankbyAppointment","directories=no,location=no,menubar=no,scrollbars=1,status=no,toolbar=no,resizable=yes,width=1030,height=750");newwin.focus()}else{if(target.indexOf("bba")>-1){var newwin=window.open(contactusgeturl(target),"BankbyAppointment","directories=no,location=no,menubar=no,scrollbars=1,status=no,toolbar=no,resizable=yes,width=1030,height=750");newwin.focus()}else{window.location=contactusgeturl(target)}}}}else{if(target.indexOf("contactus")>-1){window.location=contactusgeturl(target+"&topicId="+topicID)}else{window.location=contactusgeturl(target)}}}function contactusgeturl(target,additionalParam){var pipadDomain=contactUsData.pipadDomain;var urlToReturn=pipadDomain+"target="+target+"&moduleId="+fsdContactUs.moduleId;return urlToReturn}$(document).ready(function(){var KEY_ENTER=13;var KEY_UP=38;var KEY_DOWN=40;var KEY_TAB=9;var KEY_ESC=27;window.firstBodyClick=true;window.itemClicked=false;var ddCtrl=$(".ad-dropdown-ctrl");var ddBox=$(".ad-dropdown-box");var thisDdBox,thisDdCtrl,thisBoxAda,thislink;var acctStr,acctCtrlW,titleW,boxAnchs,boxAnchW=[],i=0,sortdAnchW,maxBoxW,widthConcat,dropdLeftPos,tabConf,isChrome;if($(".page-drpdwn-box").length>0){acctStr=$(".page-head");acctCtrlW=$(".page-drpdwn-box").width();titleW=acctStr.outerWidth();boxAnchs=$(".page-drpdwn-box ul li a");$(boxAnchs).each(function(){boxAnchW[i++]=$(this).width()});sortdAnchW=boxAnchW.sort();maxBoxW=sortdAnchW[sortdAnchW.length-1];isChrome=/chrome/.test(navigator.userAgent.toLowerCase());if(isChrome){tabConf=$(".within-ctrl",acctStr).attr("tabindex");$(".page-drpdwn-box").find("a").each(function(){$(this).attr("tabindex",++tabConf)})}}$(ddBox).each(function(){$("li",$(this)).each(function(){$(this).bind("click",function(e){if($(e.target).is("li")){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).children("a").attr("name"),passedPageID)}}if(window.itemClicked===false){window.itemClicked=true;if($(this).parents(".page-drpdwn-box").length>0){collapseMenu($(acctStr).parents(".ad-dropdown-ctrl"))}if($(this).parents(".txn-dropdown-box").length>0){collapseMenu($(this).parents(".txn-dropdown-box").siblings(".ad-dropdown-ctrl"))}if($("a",$(this)).hasClass("ool-lang-pref-popup")){if($boaLangObj.boaLang=="es-us"){window.itemClicked=false;return true}}else{window.location=$("a",$(this)).attr("rel")}}});$(this).hover(function(){$(this).addClass("keyhover");$(this).prev().removeClass("keyhover");$(this).next().removeClass("keyhover")},function(){$(this).removeClass("keyhover");$(this).prev().removeClass("keyhover");$(this).next().removeClass("keyhover")})})});function listSelectKeyHandler(e){var _event=e||window.event;var keyPressedCode=_event.keyCode;if((keyPressedCode==KEY_ESC||(keyPressedCode==KEY_TAB&&$(e.data.box).hasClass("ad-dropdown-tabout-enabled")))&&($(e.data.box).hasClass("page-drpdwn-box")||$(e.data.box).hasClass("ad-dropdown-box"))){collapseMenu(ddCtrl);$(e.data.ctrl).focus();$(e.data.box).find("li").removeClass("keyhover");$("body").unbind("keydown",listSelectKeyHandler)}listTraverseDown=function(curr){$(curr).removeClass("keyhover");$(curr).next().addClass("keyhover");$(curr).next().find("a").focus()};listTraverseUp=function(curr){$(curr).removeClass("keyhover");$(curr).prev().addClass("keyhover");$(curr).prev().find("a").focus()};var listItems=$(e.data.box).find("li");var itemsCnt=listItems.length;var currItem=$(e.data.box).find(".keyhover");if($(currItem).size()>0){var itemIx=$(listItems).index(currItem);if(keyPressedCode===KEY_ENTER){if(!$(thisDdBox).hasClass("page-drpdwn-box")){if(window.itemClicked===false){window.itemClicked=true;window.location=$("a",currItem).attr("rel")}}else{$("a",currItem).click()}}if(itemIx===0){if(keyPressedCode===KEY_DOWN){listTraverseDown(currItem)}}else{if(itemIx===itemsCnt-1){if(keyPressedCode===KEY_UP){listTraverseUp(currItem)}}else{if(keyPressedCode===KEY_UP){listTraverseUp(currItem)}else{if(keyPressedCode===KEY_DOWN){listTraverseDown(currItem)}}}}}else{if(keyPressedCode===KEY_DOWN||keyPressedCode){currItem=listItems[0];$("a.within-ctrl",thisDdCtrl).unbind("keydown")}else{if(keyPressedCode===KEY_UP){currItem=listItems[itemsCnt-1]}else{if(keyPressedCode===KEY_ENTER){if($(thisDdBox).hasClass("page-drpdwn-box")){$("a",currItem).click()}else{collapseMenu($(thisDdBox).prev(".ad-dropdown-ctrl"))}}}}$(currItem).addClass("keyhover")}return false}function collapseMenu(ctrlTarget){thisBoxAda=$(ctrlTarget).find(".ada-hidden");thisBoxAdaRel=$(thisBoxAda).attr("rel");$(thisDdBox).addClass("hide");if($(thisDdBox).hasClass("page-drpdwn-box")){$(ctrlTarget).removeClass("opened-page-control")}else{$(ctrlTarget).removeClass("opened-dropdown")}$(thisBoxAda).html(adDdADAConfig[thisBoxAdaRel][0]);$("body").unbind("keydown",listSelectKeyHandler)}function expandMenu(ctrlTarget){window.firstBodyClick=false;thisBoxAda=$(ctrlTarget).find(".ada-hidden");thisBoxAdaRel=$(thisBoxAda).attr("rel");if($(".ad-dropdown-box").length>0){$(".ad-dropdown-box").addClass("hide")}$(thisDdBox).removeClass("hide");if($(thisDdBox).hasClass("page-drpdwn-box")){$(ctrlTarget).addClass("opened-page-control");$("li:first",thisDdBox).addClass("keyhover");$("a:first",thisDdBox).focus()}else{$(ctrlTarget).addClass("opened-dropdown");$(thisDdBox).css("position","absolute");$("li:first",thisDdBox).addClass("keyhover");$("a:first",thisDdBox).focus()}$(thisBoxAda).html(adDdADAConfig[thisBoxAdaRel][1]);$("body").bind("keydown",{box:thisDdBox,ctrl:thislink},listSelectKeyHandler)}$(ddCtrl).each(function(){$(this).click(function(e){if($(this).hasClass("page-control")){thisDdBox=$(".page-drpdwn-box");thislink=$(e.target);if($(e.target).is("div")||$(e.target).is("h1")){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,"select_account",passedPageID)}}}else{if($(e.target).hasClass("within-ctrl")){thisDdBox=$(e.target).parent(".ad-dropdown-ctrl").siblings(".ad-dropdown-box");thislink=$(e.target)}else{thisDdBox=$(e.target).next(".ad-dropdown-box");thislink=$(e.target)}}if($(thisDdBox).hasClass("default")){$(thisDdBox).addClass("hide").removeClass("default");$(this).removeClass("opened-page-control");if(maxBoxW<acctCtrlW){widthConcat=acctCtrlW+20;$(thisDdBox).width(widthConcat)}else{$(thisDdBox).width(maxBoxWidth)}if(titleW<acctCtrlW-1){dropdLeftPos=0}else{dropdLeftPos=titleW-acctCtrlW}$(thisDdBox).css("position","absolute").css("left",dropdLeftPos)}if($(thisDdBox).hasClass("hide")){$(".ui-dialog").remove();if($(thisDdBox).hasClass("page-drpdwn-box")){expandMenu($(acctStr).parent(".ad-dropdown-ctrl"))}else{if($(e.target).hasClass("within-ctrl")){expandMenu($(e.target).parent(".ad-dropdown-ctrl"))}else{expandMenu(e.target)}}}else{if($(thisDdBox).hasClass("page-drpdwn-box")){collapseMenu($(acctStr).parents(".ad-dropdown-ctrl"))}else{if($(e.target).hasClass("within-ctrl")){collapseMenu($(e.target).parent(".ad-dropdown-ctrl"))}else{collapseMenu(e.target)}}}})});$("body").click(function(e){if(!$(e.target).parents("div").hasClass("ad-dropdown-box")&&!$(e.target).hasClass("ad-dropdown-box")&&!$(e.target).parents("div").hasClass("ad-dropdown-ctrl")&&!$(e.target).hasClass(".ad-dropdown-ctrl")&&!$(e.target).hasClass("ad-dropdown-ctrl")&&!$(e.target).hasClass("within-ctrl")&&!$(thisDdBox).hasClass("hide")&&window.firstBodyClick===false){if($(thisDdBox).hasClass("page-drpdwn-box")){collapseMenu($(acctStr).parents(".ad-dropdown-ctrl"))}else{if($(thisDdBox).hasClass("ad-dropdown-box")){collapseMenu($(thisDdBox).siblings(".ad-dropdown-ctrl"))}}}})});(function(bofaObj){bofaObj.olbSpartaWidgetUtil={WIDGET_PARAMS:{},initWidget:function(){var loader=document.createElement("script");loader.type="text/javascript";loader.src="/spa/widgets/loader/2.1.0/index.js";document.body.appendChild(loader)},loadWidget:function(params){var options={name:params.name,version:params.version,container:"olb-spa-widget-container",path:"",language:$("html").attr("lang").toLowerCase()};window.sparta.widgetLoader.load(options)},spaWidgetLoaded:function(){document.removeEventListener("spartaLoaderLoaded",bofaObj.olbSpartaWidgetUtil.spaWidgetLoaded);window.sparta.widgetLoader.sub("errorLoadingWidget",function(event){});window.sparta.widgetLoader.sub("SPARTA_WIDGET_READY.spartaWidgetUtility",function(e){var _widgetParams=bofaObj.olbSpartaWidgetUtil.WIDGET_PARAMS;window.sparta.widgetLoader.pub(_widgetParams.eventName,_widgetParams.payload)})}};document.addEventListener("spartaLoaderLoaded",bofaObj.olbSpartaWidgetUtil.spaWidgetLoaded);$(document).ready(function(){bofaObj.olbSpartaWidgetUtil.initWidget();$(".olb-sparta-widget-link").live("click",function(e){var dataOptions=$(this).data().options,_widgetOptions={name:dataOptions.widgetName,version:dataOptions.widgetVersion};bofaObj.olbSpartaWidgetUtil.WIDGET_PARAMS={eventName:dataOptions.widgetEventName,payload:dataOptions.payload};bofaObj.olbSpartaWidgetUtil.loadWidget(_widgetOptions)})})})(window.bofa=window.bofa||{});$(document).ready(function(){$("#boa-interstitial-layer-close").click(function(){$("#offer_rel_SOMEUNIQUEID").dialog("close")});$(".boa-action").live("click",function(){var $activeActionLink=$(this);if($(".cardlytics-flyout:visible").length>0){$(".cardlytics-flyout:visible").parents(".ui-dialog").css("top",$activeActionLink.position().top-74).css("left",$activeActionLink.position().left+$activeActionLink.parents(".cardlytics-transaction-offer").width()+50).removeClass("left");var cardlyticsImgHeight=$(".cardlytics-merchant-logo-style img").height();$(".cardlytics-merchant-logo-style").height(cardlyticsImgHeight)}var $id=$(this).attr("rel");var $content=$("#"+$id);$content.dialog({closeText:$boaLangObj.closeText})});if($(".ad-inline-offer-module").length>0){var inlineOfferUpdateLink="";if(typeof oboUsr==="undefined"){var oboUserFlag=false}else{var oboUserFlag=oboUsr}$("a.cardlyticsbofa-inline-link").live("click",function(e){boaTLAddEvent(e);$(".err-msg-inline-flyout").addClass("hide");inlineOfferUpdateLink=$(this).attr("id");$inlineOffer=$(this);window.offerMerchantNameForCM=$("#"+$(this).attr("rel")+" .offer-modal-merchant-name").html().toLowerCase().replace(new RegExp("\\s","g"),"_");if(!$inlineOffer.hasClass("boa-action")){if(oboUserFlag!==true){$.post(inlineOfferUpdateLink);var postMessageImpressionURI;var postMsgImgBeacon;if($inlineOffer.parents(".cardlytics-transaction-offer").prev("img").length>0){postMessageImpressionURI=$inlineOffer.parents(".cardlytics-transaction-offer").prev("img").attr("rel");postMsgImgBeacon='<img src="'+postMessageImpressionURI+'" style="display:none !important" alt="" />';$inlineOffer.after(postMsgImgBeacon)}$(".ui-dialog-titlebar-close").unbind("click");$(".ui-dialog-titlebar-close").bind("click",function(e){$(this).children(".ada-hidden").remove();$(this).parents(".ui-dialog").remove();boaTLAddEvent(e)});$inlineOffer.addClass("boa-action").click();$inlineOffer.removeClass("boa-action")}else{$inlineOffer.addClass("boa-action").click();$inlineOffer.removeClass("boa-action")}}});$("a.inline-offer.boa-bankoffers.merchant-link").unbind("click");$("a.inline-offer.boa-bankoffers.merchant-link").live("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_merchant_link_clicked_"+window.reallyDetailedLinkNameForCM,passedPageID)}window.CardlyticsVendorURL=$(this).attr("rel");if(oboUserFlag!==true){var continueButtonClicked=inlineOfferUpdateLink.replace("Activated","TransferredToMerchant");if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_interstitial_continue_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}$.post(continueButtonClicked);window.open(window.CardlyticsVendorURL)}else{window.open(window.CardlyticsVendorURL)}});$("a.cardlytics-inline-link").live("click",function(e){boaTLAddEvent(e);$(".err-msg-inline-flyout").addClass("hide");inlineOfferUpdateLink=$(this).attr("id");$inlineOffer=$(this);var offerIcon=$(this).children(".offer-img").children("img");var offerIconAlt=$(offerIcon).attr("alt");var inlineOfferId=$(offerIcon).attr("id");var offerIconStatArr=$(offerIcon).attr("src").toLowerCase().split("-offer-icon-18");var offerIconStatArr2=offerIconStatArr[0].split("graphic/");var offerIconPathPre=offerIconStatArr2[0],offerIconStat=offerIconStatArr2[1];window.offerMerchantNameForCM=$("#"+$(this).attr("rel")+" .offer-modal-merchant-name").html().toLowerCase().replace(new RegExp("\\s","g"),"_");window.offerIconStatSemaphore=offerIconStat;if(!$inlineOffer.hasClass("boa-action")){if(oboUserFlag!==true){if(offerIconStat.indexOf("new")!==-1){$("div.err-msg-inline").addClass("hide");$.ajax({url:inlineOfferUpdateLink,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){$("div.please-wait-inline."+inlineOfferId).removeClass("hide")},error:function(textStatus){$inlineOffer.removeClass("boa-action");if(typeof window.cmCreateCustomError=="function"&&typeof passedPageID!=="undefined"){cmCreateCustomError(passedPageID,null,null,null,"inline_offer_error",passedCatID,"connection_failed")}$("div.err-msg-inline."+inlineOfferId).removeClass("hide");$("div.err-msg-inline."+inlineOfferId).attr("role","region").attr("aria-live","rude").focus()},success:function(data){if((data.dynamicTargetedOffersUpdate)!=="undefined"&&(data.dynamicTargetedOffersUpdate)!==null&&(data.dynamicTargetedOffersUpdate.manageOfferResult).toString()==="true"){$(offerIcon).attr("src",offerIconPathPre+"graphic/ready-offer-icon-18.gif");offerIconAlt=offerIconAlt.toLowerCase().replace("new","Active");$(offerIcon).attr("alt",offerIconAlt);$(".status-text."+inlineOfferId).text(activeText);if($("#unselected_count").length>0){var unselCount=$("#unselected_count").text();$("#unselected_count").text(unselCount-1)}if($(".side-well-offers-module-advskin").length>0){if((typeof inlineOfferId!="undefined")&&(typeof altOfferId!="undefined")&&(inlineOfferId==altOfferId)){if((typeof offerState!="undefined")&&offerState!="active"){$(".cardlytics-alt-merchant-name").removeClass("hide");$(".unselected").removeClass("unselected").addClass("selected");offerState="active"}}}var postMessageImpressionURI;var postMsgImgBeacon;if($inlineOffer.parents(".cardlytics-transaction-offer").prev("img").length>0){postMessageImpressionURI=$inlineOffer.parents(".cardlytics-transaction-offer").prev("img").attr("rel");postMsgImgBeacon='<img src="'+postMessageImpressionURI+'" style="display:none !important" alt="" />';$inlineOffer.after(postMsgImgBeacon)}if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_flyout_activated_"+window.reallyDetailedLinkNameForCM,passedPageID)}$(".ui-dialog-titlebar-close").unbind("click");$(".ui-dialog-titlebar-close").bind("click",function(e){$(this).children(".ada-hidden").remove();$(this).parents(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_flyout_closed_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$(".earn-msg.inline-earn a").unbind("click");$(".earn-msg.inline-earn a").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_merchant_link_clicked_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$("div.please-wait-inline."+inlineOfferId).addClass("hide");$inlineOffer.addClass("boa-action").click();$inlineOffer.removeClass("boa-action")}else{$inlineOffer.removeClass("boa-action");$("div.err-msg-inline."+inlineOfferId).removeClass("hide");if(typeof window.cmCreateCustomError=="function"&&typeof passedPageID!=="undefined"){cmCreateCustomError(passedPageID,null,null,null,"inline_offer_error",passedCatID,"undefined_data")}}},complete:function(textStatus){$("div.please-wait-inline."+inlineOfferId).addClass("hide");if(typeof cX=="function"){cX("onload")}}})}else{$.post(inlineOfferUpdateLink);var postMessageImpressionURI;var postMsgImgBeacon;if($inlineOffer.parents(".cardlytics-transaction-offer").prev("img").length>0){postMessageImpressionURI=$inlineOffer.parents(".cardlytics-transaction-offer").prev("img").attr("rel");postMsgImgBeacon='<img src="'+postMessageImpressionURI+'" style="display:none !important" alt="" />';$inlineOffer.after(postMsgImgBeacon)}if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_flyout_activated_"+window.reallyDetailedLinkNameForCM,passedPageID)}$(".ui-dialog-titlebar-close").unbind("click");$(".ui-dialog-titlebar-close").bind("click",function(e){$(this).children(".ada-hidden").remove();$(this).parents(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_flyout_closed_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$(".earn-msg.inline-earn a").unbind("click");$(".earn-msg.inline-earn a").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedLinkNameForCM=inlineOfferId+"_"+window.offerMerchantNameForCM+"_"+window.offerIconStatSemaphore;cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_merchant_link_clicked_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$inlineOffer.addClass("boa-action").click();$inlineOffer.removeClass("boa-action")}}else{$inlineOffer.addClass("boa-action").click();$inlineOffer.removeClass("boa-action")}}});$("a.inline-offer.boa-bamd-interstitial.merchant-link").unbind("click");$("a.inline-offer.boa-bamd-interstitial.merchant-link").live("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_merchant_link_clicked_"+window.reallyDetailedLinkNameForCM,passedPageID)}var merchantLinkClickedURI=inlineOfferUpdateLink.replace("Activated","MerchantLinkClicked");window.CardlyticsVendorURL=$(this).attr("rel");var inlineEarnDiv=$(this).parent();inlineEarnDiv.siblings(".err-msg-inline-flyout").addClass("hide");var options={size:"medium",buttons:{Continue:true,Cancel:false}};if(oboUserFlag!==true){$.ajax({url:merchantLinkClickedURI,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){inlineEarnDiv.siblings(".please-wait-inline-flyout").removeClass("hide")},error:function(XMLHttpRequest,textStatus,errorThrown){inlineEarnDiv.siblings(".err-msg-inline-flyout").removeClass("hide");if(typeof window.cmCreateCustomError=="function"&&typeof passedPageID!=="undefined"){cmCreateCustomError(passedPageID,null,null,null,"inline_offer_error",passedCatID,"connection_failed")}inlineEarnDiv.siblings(".err-msg-inline-flyout").attr("role","region").attr("aria-live","rude").focus()},success:function(data){$("#boa-interstitial-layer").boaModal(options);$("#boa-interstitial-layer-close").unbind("click");$("#boa-interstitial-layer-close").bind("click",function(e){$(this).children(".ada-hidden").remove();$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_modal_interstitial_close_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$("#boa-interstitial-layer div.buttons").addClass("plt-15 pbtm-10");$("#boa-interstitial-layer .buttons a:first").removeClass("button-gray").addClass("button-blue");$("#boa-interstitial-layer .buttons a:first").unbind("click");$("#boa-interstitial-layer .buttons a:first").bind("click",function(e){boaTLAddEvent(e);var continueButtonClicked=inlineOfferUpdateLink.replace("Activated","TransferredToMerchant");if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_interstitial_continue_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}$.post(continueButtonClicked);$(".ui-dialog").remove();window.open(window.CardlyticsVendorURL)});$($("#boa-interstitial-layer .buttons a")[1]).unbind("click");$($("#boa-interstitial-layer .buttons a")[1]).bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_modal_interstitial_cancel_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}})},complete:function(textStatus){inlineEarnDiv.siblings(".please-wait-inline-flyout").addClass("hide");if(typeof cX=="function"){cX("onload")}}})}else{$("#boa-interstitial-layer").boaModal(options);$("#boa-interstitial-layer-close").unbind("click");$("#boa-interstitial-layer-close").bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_modal_interstitial_close_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}});$("#boa-interstitial-layer div.buttons").addClass("plt-15 pbtm-10");$("#boa-interstitial-layer .buttons a:first").removeClass("button-gray").addClass("button-blue");$("#boa-interstitial-layer .buttons a:first").unbind("click");$("#boa-interstitial-layer .buttons a:first").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_interstitial_continue_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}$(".ui-dialog").remove();window.open(window.CardlyticsVendorURL)});$($("#boa-interstitial-layer .buttons a")[1]).unbind("click");$($("#boa-interstitial-layer .buttons a")[1]).bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"targeted_inline_offer_modal_interstitial_cancel_button_"+window.reallyDetailedLinkNameForCM,passedPageID)}})}})}});var vendorURL;$(document).ready(function(){$("a.boa-interstitial").live("click",function(){vendorURL=$(this).attr("rel");var className=$(this).hasClass("new-window");var options={size:"medium",buttons:{Continue:true,Cancel:false},callback:gotoVendor};function gotoVendor(val){if(val){if(className){window.open(vendorURL)}else{location.href=vendorURL}}}$("#boa-interstitial-layer").boaModal(options);$("#boa-interstitial-layer-close").click(function(){$("#boa-interstitial-layer").dialog("close")});$("#boa-interstitial-layer .buttons a:first").removeClass("button-gray").addClass("button-blue")})});var vendorURL;$(document).ready(function(){$("a.boa-interstitial-rewards").live("click",function(){vendorURL=$(this).attr("rel");var className=$(this).hasClass("new-window");var options={size:"medium",buttons:{Continue:true,Cancel:false},callback:gotoVendor};function gotoVendor(val){if(val){if(className){window.open(vendorURL)}else{location.href=vendorURL}}}$("#boa-interstitial-rewards-layer").boaModal(options);$("#boa-interstitial-rewards-layer-close").click(function(){$("#boa-interstitial-rewards-layer").dialog("close")});$("#boa-interstitial-rewards-layer .buttons a:first").removeClass("button-gray").addClass("button-blue");$("#boa-interstitial-rewards-layer div.buttons").addClass("plt-15 pbtm-10")})});$(document).ready(function(){if($(".ad-acct-summary-module").length>0){if($("html").attr("lang").toLowerCase()==="es-us"){$(".card-sec").css("padding-left","22px")}}if($(".payment-sec").length>0){function labelAlignACS(group){group.each(function(){if($(this).height()>18){$(this).closest(".summary-acct-row").find(".fl-rt").addClass("ptop-18");$(this).closest(".summary-acct-row").addClass("text-wrap")}})}function labelAlignPTC(group){group.each(function(){if($(this).height()>20){$(this).closest(".ptc-row").find(".summary-item-amount").addClass("ptop-18");$(this).closest(".ptc-row").addClass("text-wrap")}})}function labelAlignCRD(group){group.each(function(){if($(this).height()>=20&&$(this).height()<37){$(this).closest(".acct-crd-dtls-row").find(".fl-rt").addClass("ptop-18");$(this).closest(".acct-crd-dtls-row").addClass("text-wrap")}else{if($(this).height()>=37){$(this).closest(".acct-crd-dtls-row").find(".fl-rt").addClass("ptop-35").removeClass("ptop-18");$(this).closest(".acct-crd-dtls-row").addClass("text-wrap")}}})}labelAlignACS($(".summary-acct-row .accnt-summary-left"));labelAlignPTC($(".summary-item-label"));labelAlignCRD($(".acct-crd-dtls-row .accnt-details-left"));$(".tabstrip-module").addClass("dib-ie");var cardPmtPopupLink=$(".payment-sec .boa-dialog");$(cardPmtPopupLink).click(function(){if(navigator.appName.indexOf("Microsoft")!==-1){var i=1;$(".ui-icon-closethick").attr("tabindex",i++);$("a",".ui-dialog").each(function(){$(this).attr("tabindex",i++)})}});$(".payment-sec .blue-button.mrt-9").click(function(){cmCreatePageviewTag("OLB:Content;Continuar_en_Ingles_Interstitial"+locAppendage,null,null,"OLB:Content",false,false,null,false,false,cmAdlink,null,cmAdlob,null,cmPageViewSessionIDForConf,null,null,null,cmAttrParam,null,null,null)})}});function showBACLeaveInterstitialLayer(url){var options={size:"medium",buttons:{Continue:true,Cancel:false},buttonsAltText:{Continue:"Continue",Cancel:"Cancel"},callback:gotoVendor};$("#leave-bac-interstitial-layer").boaModal(options);function gotoVendor(val){if(val==true){window.open(url)}}return false}$(document).ready(function(){if($(".ad-message-module .card-systems-upgrade-skin").length>0){$(".tellmemore-link").click(function(){if(!$(this).hasClass("force-visited")){$(this).addClass("force-visited")}var modalOptions={size:"flex-width",width:"650px",className:"card-systems-upgrade-popup",buttons:{}};var moid=$(this).attr("rel");$("#"+moid).boaFlexModal(modalOptions)});$(".ok-btn").click(function(){var okid=$(this).attr("rel");$("#"+okid).dialog("close")});if(!($(".ad-transaction-module-card-skin").length>0||$(".ad-info-service-module").length>0)){$(".ad-message-module").addClass("mtop-30 mbtm-30")}}});$(document).ready(function(){var iconTrigger=$(".ad-transaction-module-card-skin .icon-legend-trigger");var iconLegendMenu=$(".ad-transaction-module-card-skin .icon-legend-menu");function expandCollapseIconLegend(){$(iconLegendMenu).toggleClass("hide");if($('html[lang="es-US"] .ad-transaction-module-card-skin .trans-tbody-wrap tr').length<5){$(".prev-next").toggleClass("rel")}}$(iconTrigger).click(function(){expandCollapseIconLegend()})});var filterAccess={purchases:"P",payments:["RP","OP","BP"],"bal-transfers":"T","access-checks":"SC","cash-advances":"CA","atm-trans":"AT","temp-trans":"TT",fees:"F","bank-charges":"BC"};$(document).ready(function(){var KEY_ESC=27;var typeFiltAct=$(".ad-transaction-module-card-skin .expand-type-filter-menu-ada");var openedTypeFiltAct=$(".ad-transaction-module-card-skin a[name=collapse_type_filter_menu]");var iconizedTypeMenu=$(".ad-transaction-module-card-skin .iconized-type-menu");var typeMenuOpts=$(".ad-transaction-module-card-skin .iconized-type-menu-list");var cliTypeMenuOpts=$(".ad-transaction-module-card-skin .iconized-type-menu-list.client-side-filters");var transWrap=$(".ad-transaction-module-card-skin .trans-tbody-wrap");function expandCollapseTypeFiltDrop(){if($(iconizedTypeMenu).hasClass("hide")){$(iconizedTypeMenu).removeClass("hide");$(typeFiltAct).addClass("hide");$(openedTypeFiltAct).focus();$("a[name=collapse_type_filter_menu]").find("span.ada-hidden").html(collapseType);$("body").bind("keydown",{box:iconizedTypeMenu},typeDropSelectKeyHandler)}else{$(iconizedTypeMenu).addClass("hide");$(typeFiltAct).removeClass("hide");$(typeFiltAct).focus();$("a[name=collapse_type_filter_menu]").find("span.ada-hidden").html(expandType);$("body").unbind("keydown",typeDropSelectKeyHandler)}}$(typeFiltAct).click(function(){expandCollapseTypeFiltDrop()});$(openedTypeFiltAct).click(function(){expandCollapseTypeFiltDrop()});var noTransFromFiltMsg=$(".ad-transaction-module-card-skin .no-trans-from-filt");var filtKey="";var pmtEquivFlag=false;var i;$("li",cliTypeMenuOpts).each(function(){filtKey=$(this).attr("class");filtKey=filtKey.replace("trans-type-","");$(this).bind("click",{filtType:filtKey},function(e){$("td.trans-type-cell div.icon-type-image",transWrap).each(function(){if(e.data.filtType==="payments"){for(i=0;i<filterAccess[e.data.filtType].length;i++){if($(this).attr("rel")===filterAccess[e.data.filtType][i]){pmtEquivFlag=true}}if(!pmtEquivFlag){$(this).parents("tr").addClass("hide")}else{pmtEquivFlag=false;if($(this).parents("tr").hasClass("hide")){$(this).parents("tr").removeClass("hide")}}}else{if(e.data.filtType==="all"){if($(this).parents("tr").hasClass("hide")){$(this).parents("tr").removeClass("hide")}}else{if($(this).attr("rel")!==filterAccess[e.data.filtType]){$(this).parents("tr").addClass("hide")}else{if($(this).parents("tr").hasClass("hide")){$(this).parents("tr").removeClass("hide")}}}}});if($("tr:not(.trans-expanded-details tr):not(tr.hide)",transWrap).length>0){if(!$(noTransFromFiltMsg).hasClass("hide")){$(noTransFromFiltMsg).addClass("hide")}}else{if($(noTransFromFiltMsg).hasClass("hide")){$(noTransFromFiltMsg).removeClass("hide")}}expandCollapseTypeFiltDrop();hideBalances();closeAnyExpandedLayers()});$(this).hover(function(){$(this).addClass("keyhover");$(this).prev().removeClass("keyhover");$(this).next().removeClass("keyhover")},function(){$(this).removeClass("keyhover");$(this).prev().removeClass("keyhover");$(this).next().removeClass("keyhover")})});function typeDropSelectKeyHandler(e){var keyPressedCode=(window.event)?window.event.keyCode:e.keyCode;var typeItems=$(e.data.box).find("li");var typeItemsCnt=typeItems.length;var currTypeItem=$(e.data.box).find(".keyhover");var currTypeItemLink=$(currTypeItem).find("a");var targetElementName=e.target.name;typeTraverseDown=function(curr){$(curr).removeClass("keyhover");$(curr).next().addClass("keyhover")};if((keyPressedCode===KEY_ENTER)&&(targetElementName=="collapse_type_filter_menu")&&($(currTypeItem).size()==0)){$(openedTypeFiltAct).click()}if(keyPressedCode===KEY_ESC){$(openedTypeFiltAct).click()}typeTraverseUp=function(curr){$(curr).removeClass("keyhover");$(curr).prev().addClass("keyhover")};if($(currTypeItem).size()>0){if(keyPressedCode===KEY_ENTER){$(currTypeItemLink).find("span").trigger("click")}var itemTypeIx=$(typeItems).index(currTypeItem);if(itemTypeIx===0){if(keyPressedCode===KEY_DOWN){typeTraverseDown(currTypeItem)}}else{if(itemTypeIx===typeItemsCnt-1){if(keyPressedCode===KEY_UP){typeTraverseUp(currTypeItem)}}else{if(keyPressedCode===KEY_UP){typeTraverseUp(currTypeItem)}else{if(keyPressedCode===KEY_DOWN){typeTraverseDown(currTypeItem)}}}}}else{if(keyPressedCode===KEY_DOWN){currTypeItem=typeItems[0]}else{if(keyPressedCode===KEY_UP){currTypeItem=typeItems[typeItemsCnt-1]}}$(currTypeItem).addClass("keyhover")}return false}if($(".ad-transaction-module-card-skin").length>0){$("body").click(function(e){if(!$(e.target).closest(".ad-transaction-module-card-skin .type-filter-down-arrow").length&&!$(e.target).closest(".ad-transaction-module-card-skin .iconized-type-menu").length&&!$(iconizedTypeMenu).hasClass("hide")&&$(e.target).attr("name")!=="expand_type_filter_menu"){expandCollapseTypeFiltDrop()}})}});var KEY_ENTER=13;var KEY_TAB=9;var KEY_UP=38;var KEY_DOWN=40;function closeAnyExpandedLayers(){$(".ad-transaction-module-card-skin .trans-tbody-wrap .trans-expanded-details").each(function(){if(!$(this).hasClass("hide")){$(this).addClass("hide");$(this).parent().parent("tr").removeClass("trans-expanded");preExpandedImg=$(this).parent().parent("tr").find("img.expand-trans");$(preExpandedImg).attr("src",showDetailsImgPath);$(preExpandedImg).attr("alt",expandTransText);$(preExpandedImg).parents("tr").find(".trans-desc-cell").find("a.expand-trans-from-desc span.ada-hidden").html(expandTransText)}})}function reBindDetailExpands(){$(".ad-transaction-module-card-skin .expand-trans").unbind("click");$(".ad-transaction-module-card-skin .expand-trans-from-arrow-ada").unbind("focus");$(".ad-transaction-module-card-skin .expand-trans").bind("click",expandTransDetails);$(".ad-transaction-module-card-skin .expand-trans-from-arrow-ada").bind("focus",wireDetailsExpandADA)}function hideBalances(){if($("#transactions .balance-sort-head").html()!=="&nbsp;"){transBalanceCells=$("#transactions .trans-balance-cell");$("#transactions .beginning-balance-row").addClass("hide");for(var perfIx=0;perfIx<transBalanceCells.length;perfIx++){hiddenBalanceCell='<span class="hide">'+transBalanceCells[perfIx].innerHTML+"</span>";$(transBalanceCells[perfIx]).html(hiddenBalanceCell)}$("#transactions .trans-amount-cell").addClass("amount-col-no-border");$("#transactions .amount-sort-head").addClass("amount-col-no-border");$("#transactions .balance-sort-head").html("&nbsp;")}}(function($){$.fn.transSorts=function(){var fullTransWrap=this;var fullTransTheadWrap=$("thead",fullTransWrap);var transBalanceCells=$(".trans-balance-cell",fullTransWrap);var hiddenBalanceCell,shownBalanceCell;function styleLastRow(){$(".trans-tbody-wrap td",fullTransWrap).each(function(){if($(this).hasClass("last-row-after-sort")){$(this).removeClass("last-row-after-sort")}});$($(".trans-tbody-wrap tr:not(.trans-expanded-details tr):last",fullTransWrap).children("td")).each(function(){$(this).addClass("last-row-after-sort")})}function styleEvenOdd(){var odd=true;$(".trans-tbody-wrap tr:not(.trans-expanded-details tr)",fullTransWrap).each(function(){if(odd===true){$(this).addClass("odd").removeClass("even");odd=false}else{$(this).removeClass("odd").addClass("even");odd=true}})}function showBalances(){transBalanceCells=$(".trans-balance-cell",fullTransWrap);$(".beginning-balance-row",fullTransWrap).removeClass("hide");$(".trans-amount-cell",fullTransWrap).removeClass("amount-col-no-border");for(var perfIx=0;perfIx<transBalanceCells.length;perfIx++){shownBalanceCell=$("span",transBalanceCells[perfIx]).html();$(transBalanceCells[perfIx]).html(shownBalanceCell)}$(".amount-sort-head",fullTransTheadWrap).removeClass("amount-col-no-border");$(".balance-sort-head",fullTransTheadWrap).html("Balance")}function quicksort(arr){if(arr.length===0){return[]}var i;var left=[];var right=[];var pivot=arr[0];for(i=1;i<arr.length;i++){if(arr[i]<pivot){left.push(arr[i])}else{right.push(arr[i])}}return quicksort(left).concat(pivot,quicksort(right))}var dateSortArrow=$(".date-sort-arrow",fullTransWrap);var descSortArrow=$(".desc-sort-arrow",fullTransWrap);var amtSortArrow=$(".amount-sort-arrow",fullTransWrap);var dateOrderESADA=$(".date-order-ada",fullTransWrap);var descOrderESADA=$(".desc-order-ada",fullTransWrap);var amtOrderESADA=$(".amt-order-ada",fullTransWrap);var transTBody=$("tbody.trans-tbody-wrap",fullTransWrap);var tbodyRowsLen=$("tr:not(table.trans-expanded-details tr)",transTBody).length;var dateSortedGlob;var i,j,rowForSortCell,rowForSort;var amtGlob=[];var amtRowForSortCell,amtRowForSort,amtSortedTbody;var descGlob=[];var descRowForSortCell,descRowForSort,descSortedTbody;var rowForSortClass,rowForSortMarkup;var noTransFromFiltMsg=$(".no-trans-from-filt",fullTransWrap);styleLastRow();styleEvenOdd();if($(".ad-transaction-module-card-skin .client-side-sort").length>0){$(".date-sort-head.client-side-sort",fullTransWrap).click(function(e){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}fullTransTheadWrap=$("thead",fullTransWrap);if(!$(noTransFromFiltMsg).hasClass("hide")){return false}hideBalances();$(descSortArrow).html("");$(amtSortArrow).html("");$(descOrderESADA).html(descAlphaOrderText);$(amtOrderESADA).html(amtDescOrderText);dateGlob=[];dateRowForSortCell=$("#transactions td.trans-date-cell");if($(dateSortArrow).hasClass("already-sorted")){i=0;for(var perfIx=0;perfIx<dateRowForSortCell.length;perfIx++){dateGlob[i++]=$(dateRowForSortCell[perfIx]).text().trim()}dateGlob=dateGlob.sort();dateSortedGlob="";for(j=0;j<dateGlob.length;j++){for(perfIx=0;perfIx<dateRowForSortCell.length;perfIx++){dateHolder=dateRowForSortCell[perfIx];if(($.trim($(dateHolder).text())===$.trim(dateGlob[j]))&&!$(dateHolder).data("used")){dateRowForSort=$(dateHolder).parent("tr");rowForSortMarkup=$(dateRowForSort).html();rowForSortClass=$(dateRowForSort).attr("class");dateSortedGlob+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(dateHolder).data("used",true)}}}$(transTBody).html(dateSortedGlob);$(dateSortArrow).html("&uarr;");$(dateOrderESADA).html(dateRevChronoOrderText);$(dateSortArrow).removeClass("already-sorted")}else{i=0;for(var perfIx=0;perfIx<dateRowForSortCell.length;perfIx++){dateGlob[i++]=$(dateRowForSortCell[perfIx]).text().trim()}dateGlob=dateGlob.sort();dateSortedGlob="";for(j=dateGlob.length-1;j>-1;j--){for(perfIx=0;perfIx<dateRowForSortCell.length;perfIx++){dateHolder=dateRowForSortCell[perfIx];if(($.trim($(dateHolder).text())===$.trim(dateGlob[j]))&&!$(dateHolder).data("used")){dateRowForSort=$(dateHolder).parent("tr");rowForSortMarkup=$(dateRowForSort).html();rowForSortClass=$(dateRowForSort).attr("class");dateSortedGlob+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(dateHolder).data("used",true)}}}for(perfIx=0;perfIx<dateRowForSortCell.length;perfIx++){$(dateRowForSortCell[perfIx]).data("used",false)}$(transTBody).html(dateSortedGlob);$(dateSortArrow).html("&darr;");$(dateOrderESADA).html(dateChronoOrderText);$(dateSortArrow).addClass("already-sorted")}styleLastRow();styleEvenOdd();reBindDetailExpands()});$(".desc-sort-head.client-side-sort",fullTransWrap).click(function(e){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}fullTransTheadWrap=$("thead",fullTransWrap);var descHolder;if(!$(noTransFromFiltMsg).hasClass("hide")){return false}hideBalances();$(dateSortArrow).html("");$(amtSortArrow).html("");$(dateOrderESADA).html(dateChronoOrderText);$(amtOrderESADA).html(amtDescOrderText);var descSortArrow=$(this).find(".desc-sort-arrow");transTBody=$("#transactions tbody.trans-tbody-wrap");descGlob=[];descRowForSortCell=$("#transactions td.trans-desc-cell .expand-trans");descRowForSort="";descSortedTbody="";if($(descSortArrow).hasClass("not-sorted")){i=0;for(var perfIx=0;perfIx<descRowForSortCell.length;perfIx++){descGlob[i++]=$(descRowForSortCell[perfIx]).text()}descGlob=descGlob.sort();descSortedTbody="";for(j=0;j<descGlob.length;j++){for(perfIx=0;perfIx<descRowForSortCell.length;perfIx++){descHolder=descRowForSortCell[perfIx];if(($.trim($(descHolder).text())===$.trim(descGlob[j]))&&!$(descHolder).data("used")){descRowForSort=$(descHolder).parent("td").parent("tr");rowForSortMarkup=$(descRowForSort).html();rowForSortClass=$(descRowForSort).attr("class");descSortedTbody+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(descHolder).data("used",true)}}}for(perfIx=0;perfIx<descRowForSortCell.length;perfIx++){$(descRowForSortCell[perfIx]).data("used",false)}$(transTBody).html(descSortedTbody);$(descSortArrow).html("&uarr;");$(descOrderESADA).html(descRevAlphaOrderText);$(descSortArrow).removeClass("not-sorted").removeClass("hide")}else{i=0;for(var perfIx=0;perfIx<descRowForSortCell.length;perfIx++){descGlob[i++]=$(descRowForSortCell[perfIx]).text()}descGlob=descGlob.sort();descSortedTbody="";for(j=descGlob.length-1;j>-1;j--){for(perfIx=0;perfIx<descRowForSortCell.length;perfIx++){descHolder=descRowForSortCell[perfIx];if(($.trim($(descHolder).text())===$.trim(descGlob[j]))&&!$(descHolder).data("used")){descRowForSort=$(descHolder).parent("td").parent("tr");rowForSortMarkup=$(descRowForSort).html();rowForSortClass=$(descRowForSort).attr("class");descSortedTbody+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(descHolder).data("used",true)}}}for(perfIx=0;perfIx<descRowForSortCell.length;perfIx++){$(descRowForSortCell[perfIx]).data("used",false)}$(transTBody).html(descSortedTbody);$(descSortArrow).html("&darr;");$(descOrderESADA).html(descAlphaOrderText);$(descSortArrow).addClass("not-sorted")}$(dateSortArrow).removeClass("already-sorted");styleLastRow();styleEvenOdd();reBindDetailExpands()});$(".amount-sort-head.client-side-sort",fullTransWrap).click(function(e){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}fullTransTheadWrap=$("thead",fullTransWrap);if(!$(noTransFromFiltMsg).hasClass("hide")){return false}hideBalances();$(dateSortArrow).html("");$(descSortArrow).html("");$(dateOrderESADA).html(dateChronoOrderText);$(descOrderESADA).html(descAlphaOrderText);var amtSortArrow=$(this).find(".amount-sort-arrow");transTBody=$(".ad-transaction-module-card-skin tbody.trans-tbody-wrap");amtGlob=new Array();amtRowForSortCell="";amtRowForSort="";amtSortedTbody="";if($(amtSortArrow).hasClass("not-sorted")){i=0;amtRowForSortCell=$(".ad-transaction-module-card-skin td.trans-amount-cell");$(amtRowForSortCell).each(function(){amtGlob[i++]=parseFloat($(this).html().replace(",","").replace("$",""))});amtGlob=quicksort(amtGlob);for(i=0;i<amtGlob.length;i++){if(amtGlob[i]<0){amtGlob[i]=amtGlob[i].toFixed(2).toString().replace("-","-$")}else{amtGlob[i]="$"+amtGlob[i].toFixed(2).toString()}}amtSortedTbody="";for(j=0;j<amtGlob.length;j++){$(amtRowForSortCell).each(function(){if(amtGlob[j].indexOf($(this).html().replace(",",""))!==-1&&!$(this).data("used")){amtRowForSort=$(this).parent("tr");rowForSortClass=$(amtRowForSort).attr("class");rowForSortMarkup=$(amtRowForSort).html();amtSortedTbody+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(this).data("used",true)}})}$(amtRowForSortCell).each(function(){$(this).data("used",false)});$(transTBody).html(amtSortedTbody);$(amtOrderESADA).html(amtDescOrderText);$(amtSortArrow).html("&darr;");$(amtSortArrow).removeClass("not-sorted");$(amtSortArrow).removeClass("hide")}else{i=0;amtRowForSortCell=$(".ad-transaction-module-card-skin td.trans-amount-cell");$(amtRowForSortCell).each(function(){amtGlob[i++]=parseFloat($(this).html().replace(",","").replace("$",""))});amtGlob=quicksort(amtGlob);for(i=0;i<amtGlob.length;i++){if(amtGlob[i]<0){amtGlob[i]=amtGlob[i].toFixed(2).toString().replace("-","-$")}else{amtGlob[i]="$"+amtGlob[i].toFixed(2).toString()}}amtSortedTbody="";for(j=amtGlob.length-1;j>-1;j--){$(amtRowForSortCell).each(function(){if(amtGlob[j].indexOf($(this).html().replace(",",""))!==-1&&!$(this).data("used")){amtRowForSort=$(this).parent("tr");rowForSortClass=$(amtRowForSort).attr("class");rowForSortMarkup=$(amtRowForSort).html();amtSortedTbody+='<tr class="'+rowForSortClass+'">'+rowForSortMarkup+"</tr>";$(this).data("used",true)}})}$(amtRowForSortCell).each(function(){$(this).data("used",false)});$(transTBody).html(amtSortedTbody);$(amtOrderESADA).html(amtAscOrderText);$(amtSortArrow).html("&uarr;");$(amtSortArrow).addClass("not-sorted")}$(dateSortArrow).removeClass("already-sorted");styleLastRow();styleEvenOdd();reBindDetailExpands()})}}})(jQuery);$(document).ready(function(){$(".ad-transaction-module-card-skin #transactions").transSorts();$("#leave-bac-interstitial-close").click(function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}$("#leave-bac-interstitial-layer").dialog("close")});if($("html").attr("lang").toLowerCase()==="es-us"){$(".ad-transaction-module-card-skin .print-trans-view").css("padding-right","55px");if(typeof minTxt!=="undefined"&&minTxt!==null){minTxt=$("<div/>").html(minTxt).text()}if(typeof maxTxt!=="undefined"&&maxTxt!==null){maxTxt=$("<div/>").html(maxTxt).text()}}$(".ad-transaction-module-card-skin .card-show-hide-deals").live("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}var cardModShowHideActionURI=$(this).attr("rel");$(".ui-dialog").remove();var showDealsLinks=$(".ad-transaction-module-card-skin .card-show-hide-deals");var newName="";var nameShow=showDealsTxt.toLowerCase().replace(" ","_");var nameHide=hideDealsTxt.toLowerCase().replace(" ","_");if($(".cardlytics-transaction-offer").length>0){$(".cardlytics-transaction-offer").each(function(){if($(this).hasClass("hide")){$(this).removeClass("hide");$(showDealsLinks).each(function(){$(this).html(hideDealsTxt);newName=$(this).attr("name");$(this).attr("name",newName.replace(nameShow,nameHide))})}else{$(this).addClass("hide");$(showDealsLinks).each(function(){$(this).html(showDealsTxt);newName=$(this).attr("name");$(this).attr("name",newName.replace(nameHide,nameShow))})}})}else{$(showDealsLinks).each(function(){newName=$(this).attr("name");if($(this).text().indexOf(showDealsTxt)!==-1){$(this).text(hideDealsTxt);$(this).attr("name",newName.replace(nameShow,nameHide))}else{$(this).text(showDealsTxt);$(this).attr("name",newName.replace(nameHide,nameShow))}})}$.post(cardModShowHideActionURI)});var isKeyPressed=false,KEY_ENTER=13;$("#goto_select_trans_top,#goto_select_trans_bottom").live("keydown",function(e){var keyPressCode=(window.event)?window.event.keyCode:e.keyCode;var gotoDD=$(this);if(keyPressCode){if(keyPressCode==KEY_ENTER){isKeyPressed=false;setTimeout(function(){$(gotoDD).trigger("change")},300)}else{isKeyPressed=true}}});$("#goto_select_trans_top,#goto_select_trans_bottom").change(function(e){if(!isKeyPressed){var val=$(this).find("option:selected").attr("value");window.location=val;var cmName=$(this).find("option:selected").attr("name");if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,cmName,passedPageID)}}});$("body").live("click",function(e){if($(".ad-transaction-module-card-skin").length>0){if($(e.target).hasClass("select-bofa")){isKeyPressed=false}}});if($(".ad-transaction-module-card-skin").length&&$(".ad-transaction-module-card-skin a.action-more-options").length){window.keydown="keydown";window.openingLayerInProgress=false;window.doNotSetFocus=false;window.openingLayerInProgress=false;window.doNotSetFocus=false;window.isIE=false;if($.browser.msie){isIE=true;userAgent=$.browser.version;ieVersion=userAgent.substring(0,userAgent.indexOf("."))}searchAction();var isAmountRangeChosen=false,isCheckRangeChosen=false;var amt1DefaultTxt=$("#search-amount-from").val(),amt2DefaultTxt=$("#search-amount-to").val();$(".ad-transaction-module-card-skin .advancedTransSearchLayer input").change(function(e){$(this).addClass("changed").removeClass("greyed")});$(".ad-transaction-module-card-skin .advancedTransSearchLayer input").live({focus:function(e){$(this).addClass("focused");$("body").unbind(keydown,atm_typeDropSelectKeyHandlerADD);var inputId=$(this).attr("id").toLowerCase();var inputVal=$.trim($(this).val());if(inputId=="search-amount-from"){if(inputVal==allTxt||inputVal==minTxt){$(this).val("").focus().setCursorPosition(0)}}else{if(inputId=="search-amount-to"){if(inputVal==maxTxt){$(this).val("").focus().setCursorPosition(0)}}}}});$(".ad-transaction-module-card-skin   .advancedTransSearchLayer input").blur(function(e){if($(this).val()==""||$.trim($(this).val())==""){var val=$(this).attr("id").toLowerCase();$(this).removeClass("changed");switch(val){case"search-amount-from":(isAmountRangeChosen==false)?($(this).val(allTxt)):($(this).val(minTxt));amt1DefaultTxt=$("#search-amount-from").val();break;case"search-amount-to":$(this).val(maxTxt);amt2DefaultTxt=$("#search-amount-to").val();break}}else{$(this).addClass("changed")}$(this).removeClass("focused")});$("div.advancedTransSearchLayer a").click(function(e){var val=$(this).attr("id");if(val=="amountTriggerRange"){isAmountRangeChosen=true;$("input#search-amount-from").attr({value:minTxt}).removeClass("changed");$("input#search-amount-to").attr({value:maxTxt}).removeClass("changed")}if(val=="amountCancelRange"){isAmountRangeChosen=false;$("input#search-amount-from").attr({value:allTxt}).removeClass("changed")}});if($(".ad-transaction-module-card-skin   .search-msg").length>0){$(".ad-transaction-module-card-skin   .search-msg").focus()}}if($boaLangObj.boaLang.toLowerCase()=="es-us"){if(typeof keywordDefault!=="undefined"&&keywordDefault!==null){keywordDefault=$("<div/>").html(keywordDefault).text()}}if(typeof isAutoSearchEnabled!="undefined"&&isAutoSearchEnabled!=null&&isAutoSearchEnabled===true){var predictive_search={module:$(".ad-transaction-module-card-skin"),searchList:[],isSearchFocus:false,matchSearchList:function(keyWords){var reg=new RegExp(keyWords,"i");var searchSuggestions=[];for(searchWord in predictive_search.searchList){if(predictive_search.searchList[searchWord].match(reg)){searchSuggestions.push(predictive_search.searchList[searchWord])}}return searchSuggestions},generateSearchList:function(val){if(predictive_search.module.find("#transaction-search-input").val()!=""){var searchResult=predictive_search.matchSearchList(val);predictive_search.module.find("#search_suggestions").html("");if(searchResult.length>0){for(var searchIndex in searchResult){predictive_search.module.find("#search_suggestions").append('<li><a href="javascript:void(0);"><span class="ada-hidden">'+lblSearchFor+'&nbsp;</span><span class="searchText">'+searchResult[searchIndex]+'</span><span class="ada-hidden">&nbsp;'+lblTxnDesc+"</span></a></li>");predictive_search.module.find("#search_container").show()}}else{predictive_search.module.find("#search_container").hide();predictive_search.module.find("#search_suggestions li").removeClass("focussed")}}else{predictive_search.module.find("#search_container").hide();predictive_search.module.find("#search_suggestions li").removeClass("focussed")}}};if(typeof autoSearchList!="undefined"&&autoSearchList!=null&&autoSearchList.length>0){predictive_search.searchList=autoSearchList}predictive_search.module.find("#transaction-search-input").blur(function(e){predictive_search.isSearchFocus=false;if(isEmpty($(this).val())){$(this).val(keywordDefault);$(this).removeClass("focused")}if($(this).val()!==keywordDefault){$(this).addClass("focused")}setTimeout(function(){if(!predictive_search.isSearchFocus){predictive_search.module.find("#search_container").hide();predictive_search.module.find("#search_suggestions li").removeClass("focussed")}},300)});predictive_search.module.find(".search_container, .searchButtonSimulator, .search_sugg_header, #search_suggestions li, #search_suggestions li a").focus(function(){predictive_search.isSearchFocus=true});predictive_search.module.find("#transaction-search-input").bind("focus keyup",function(e){if(!(e.type=="keyup"&&(e.keyCode=="38"||e.keyCode=="40"))){atm_nullFieldForSearchBean(this);$(this).addClass("focused");predictive_search.generateSearchList($(this).val())}});predictive_search.module.find("#transaction-search-input").bind("change",function(e){$(this).addClass("changed")});predictive_search.module.find("#transaction-search-input").bind("keydown",function(e){if(e.keyCode=="38"){if(predictive_search.module.find("#search_container").is(":visible")){e.preventDefault();if(predictive_search.module.find("#search_suggestions li.focussed").length>0){if(predictive_search.module.find("#search_suggestions li.focussed").prev("li").length>0){predictive_search.module.find("#search_suggestions li.focussed").removeClass("focussed").prev().addClass("focussed");predictive_search.module.find("#transaction-search-input").val(predictive_search.module.find("#search_suggestions li.focussed").find("a span.searchText").text());predictive_search.module.find("#search_container").scrollTop(predictive_search.module.find("#search_container").scrollTop()-20)}}}}else{if(e.keyCode=="40"){if(predictive_search.module.find("#search_container").is(":visible")){e.preventDefault();if(predictive_search.module.find("#search_suggestions li.focussed").length==0){$(predictive_search.module.find("#search_suggestions li")[0]).addClass("focussed");predictive_search.module.find("#transaction-search-input").val(predictive_search.module.find("#search_suggestions li.focussed").find("a span.searchText").text())}else{if(predictive_search.module.find("#search_suggestions li.focussed").next("li").length>0){predictive_search.module.find("#search_suggestions li.focussed").removeClass("focussed").next().addClass("focussed");predictive_search.module.find("#transaction-search-input").val(predictive_search.module.find("#search_suggestions li.focussed").find("a span.searchText").text());predictive_search.module.find("#search_container").scrollTop(predictive_search.module.find("#search_container").scrollTop()+20)}}}}}});predictive_search.module.find("#search_suggestions li").live("click",function(){predictive_search.module.find("#transaction-search-input").val($(this).find("a span.searchText").text());predictive_search.module.find("#search_container").hide();predictive_search.module.find(".searchButtonSimulator").trigger("click")});predictive_search.module.find("#search_suggestions li a").live("click",function(){predictive_search.module.find("#transaction-search-input").val($(this).find("span.searchText").text());predictive_search.module.find("#search_container").hide();predictive_search.module.find(".searchButtonSimulator").trigger("click")});predictive_search.module.find("#search_suggestions li a").live("focus",function(){predictive_search.module.find("#search_suggestions li").removeClass("focussed");$(this).parent("li").addClass("focussed")});predictive_search.module.find(".searchButtonSimulator").bind("click",function(ev){atm_nullFieldForSearchBean("#transaction-search-input");$(this).parents("form.transactionSearchForm").submit();$("#transaction-search-input").unbind("click")})}if(typeof isFinancialWellnessEnabled!="undefined"&&isFinancialWellnessEnabled!=null&&isFinancialWellnessEnabled===true){$(document).on("keyup","table.trans-expanded-details input.txt-merchant-name",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");var oldValue=$parentDetailCell.find(".lblMerchantNameVal").text().substring(0,40);$parentDetailCell.find(".btn-save-merchant-name").removeClass("btn-disabled");if($(this).val()!=oldValue){$parentDetailCell.find(".btn-save-merchant-name").removeClass("btn-disabled");$parentDetailCell.find(".btn-save-merchant-name .btn-status-text").html(txt_btn_enabled)}else{$parentDetailCell.find(".btn-save-merchant-name").addClass("btn-disabled");$parentDetailCell.find(".btn-save-merchant-name .btn-status-text").html(txt_btn_disabled)}});$(document).on("change","table.trans-expanded-details select.txnMerchantcategory",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");var currentSelectedValue=$parentDetailCell.find(".categ-edit-section .txnMerchantcategory").val();var oldValue=$parentDetailCell.find(".lblCategoryCode").text();if(typeof fixCategorizationEnableIndicator!=="undefined"&&fixCategorizationEnableIndicator!==null&&fixCategorizationEnableIndicator===true){var oldValueCategoryName=$parentDetailCell.find(".lblCategoryName").html();var selectedValue=$parentDetailCell.find(".categ-edit-section .txnMerchantcategory option:selected").html();var selectedMerchantName=$parentDetailCell.find(".merchantNameEditLinkSec .lblMerchantNameVal").text();var categorySpentAmount=$parentDetailCell.parent(".trans-desc-cell").siblings(".trans-amount-cell").html().replace(/\$|,/g,"");var txnId=$parentDetailCell.attr("rel");var fixCatEligibility=$(this).attr("rel");if(oldValue!==currentSelectedValue&&typeof(sa_edit_category)!=="undefined"&&sa_edit_category!==null&&typeof(sa_edit_category.invokeEditCategory)!=="undefined"&&sa_edit_category.invokeEditCategory!==null){var updateTxnObj={sourceScreen:"ad-card",currentCategory:{id:oldValue,name:oldValueCategoryName},updatedCategory:{id:currentSelectedValue,name:selectedValue},merchantName:selectedMerchantName,spentAmount:parseFloat(categorySpentAmount),fixCatEligibility:fixCatEligibility,transactionId:txnId};setTimeout(function(){sa_edit_category.invokeEditCategory(updateTxnObj)},100)}}else{if(currentSelectedValue!=oldValue){$parentDetailCell.find(".btn-save-merchant-transaction").removeClass("btn-disabled");$parentDetailCell.find(".btn-save-merchant-transaction .btn-status-text").html(txt_btn_enabled)}else{$parentDetailCell.find(".btn-save-merchant-transaction").addClass("btn-disabled");$parentDetailCell.find(".btn-save-merchant-transaction .btn-status-text").html(txt_btn_disabled)}}});$(document).on("click","table.trans-expanded-details .categ-merchant-name-edit-link",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");$parentDetailCell.find(".merchantNameEditLinkSec").hide();var merchantNameLabel=$parentDetailCell.find(".lblMerchantNameVal").text().substring(0,40);$parentDetailCell.find(".merchant-name-text-edit-sec .txt-merchant-name").val(merchantNameLabel);$parentDetailCell.find(".merchant-name-text-edit-sec .merchant-ada-val").html(merchantNameLabel);$parentDetailCell.find(".merchant-name-text-edit-sec").closest("tr").show();$parentDetailCell.find(".txt-merchant-name").focus().setCursorPosition(merchantNameLabel.length);$parentDetailCell.find(".btn-save-merchant-name").addClass("btn-disabled")});$(document).on("click","table.trans-expanded-details .trans-categ-edit-link",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");$parentDetailCell.find(".transCategoryEditLinkSec").hide();var categoryNameLabel=$parentDetailCell.find(".lblCategoryName").text();var categoryCodeLabel=$parentDetailCell.find(".lblCategoryCode").text();$parentDetailCell.find(".categ-edit-section .txnMerchantcategory").val(categoryCodeLabel);if(categoryCodeLabel==998){$parentDetailCell.find(".categ-edit-section .txnMerchantcategory option.pending-categ-option").show()}else{$parentDetailCell.find(".categ-edit-section .txnMerchantcategory option.pending-categ-option").remove()}$parentDetailCell.find(".categ-edit-section .transCategAdaVal").html(categoryNameLabel);$parentDetailCell.find(".categ-edit-section").closest("tr").show();$parentDetailCell.find(".btn-save-merchant-transaction").addClass("btn-disabled")});$(document).on("click","table.trans-expanded-details .btn-save-merchant-name",function(){if((!$(this).hasClass("btn-disabled"))&&!isOBOUser){var currentBtnSaveSection=$(this).closest("table.trans-expanded-details"),isSpecialCharViolation=false;var currentBtnSaveSectionVal=$("input.txt-merchant-name",currentBtnSaveSection).val();var categoryCodeLabel=currentBtnSaveSection.find(".lblCategoryCode").text();var errorSection=currentBtnSaveSection.find(".merchantNameError");errorSection.removeClass("background-adjust");var originalVal=$(".lblMerchantName",currentBtnSaveSection).text();var saveUrl=$(this).attr("rel");if(!currentBtnSaveSectionVal.match(merchantNameEditDescRegex)){isSpecialCharViolation=true}if(currentBtnSaveSectionVal==""||$.trim(currentBtnSaveSectionVal).length==0){errorSection.find("div").hide();errorSection.find(".mer-name-empty-error-sec").show();errorSection.closest("tr").show();if(typeof window.cmCreateCustomError=="function"){cmCreateCustomError(passedPageID,null,null,null,"ADD_merchant_name_edit_empty_error",passedCatID,merchantNameEditError)}$(".merchantNameError",currentBtnSaveSection).focus();$(".lbl-merchant-name",currentBtnSaveSection).addClass("lbl-error")}else{if(isSpecialCharViolation){errorSection.find("div").hide();errorSection.find(".special-char-error-sec").show();errorSection.closest("tr").show();if(typeof window.cmCreateCustomError=="function"){cmCreateCustomError(passedPageID,null,null,null,"ADD_merchant_name_edit_special_chars_error",passedCatID,specialCharsMerchantNameErrMsg)}$(".merchantNameError",currentBtnSaveSection).focus();$(".lbl-merchant-name",currentBtnSaveSection).addClass("lbl-error")}else{if(currentBtnSaveSectionVal==originalVal){$(this).siblings(".btn-cancel-merchant-name-edit").click()}else{var freshUserValue=atm_trim(encodeURIComponent($("input.txt-merchant-name",currentBtnSaveSection).val()));if(freshUserValue.search(/'/)!==-1){freshUserValue=freshUserValue.replace(/'/g,"apostrophe")}if(fixCategorizationEnableIndicator===true){var reqData={};var currentRowTransId=$(currentBtnSaveSection).attr("rel");saveUrl=transactionUpdateUrl_v4;reqData={payload:{transaction:{txnId:currentRowTransId,preferredDesc:currentBtnSaveSectionVal}}};$.ajax({url:saveUrl,data:JSON.stringify(reqData),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8",timeout:20000,beforeSend:function(){currentBtnSaveSection.find(".btn-save-merchant-name").addClass("btn-disabled")},success:function(data){if(data.payload!=null&&data.payload!==undefined&&data.payload.responseCode!=null&&data.payload.responseCode==200){merchantNameSaveSuccess(currentBtnSaveSection)}else{merchantNameSaveError(currentBtnSaveSection,errorSection)}},error:function(textStatus){boaTLAddCustomEvent("AJAX error. Data is empty with textStatus "+textStatus,"ADD Edit Merchant Name AJAX Err","TransDetails");merchantNameSaveError(currentBtnSaveSection,errorSection)},complete:function(){currentBtnSaveSection.find(".btn-save-merchant-name").removeClass("btn-disabled")}})}else{saveUrl=saveUrl.split("&optType=")[0];saveUrl+="&optType=merchantName&userValMerName="+freshUserValue;$.ajax({url:saveUrl,dataType:"json",beforeSend:function(){currentBtnSaveSection.find(".btn-save-merchant-name").addClass("btn-disabled")},success:function(data){if(data.accountTransactionDetailUpdateWrapper!=null&&data.accountTransactionDetailUpdateWrapper!==undefined&&data.accountTransactionDetailUpdateWrapper.responseCode!=null&&(data.accountTransactionDetailUpdateWrapper.responseCode).toString()==="0"&&data.accountTransactionDetailUpdateWrapper.responseValue.toString().toLowerCase()==="success"){merchantNameSaveSuccess(currentBtnSaveSection)}else{merchantNameSaveError(currentBtnSaveSection,errorSection)}},error:function(textStatus){boaTLAddCustomEvent("AJAX error. Data is empty with textStatus "+textStatus,"ADD Edit Merchant Name AJAX Err","TransDetails");merchantNameSaveError(currentBtnSaveSection,errorSection)},complete:function(){currentBtnSaveSection.find(".btn-save-merchant-name").removeClass("btn-disabled")}})}}}}}else{var currentBtnSaveSection=$(this).closest("table.trans-expanded-details");var errorSection=currentBtnSaveSection.find(".merchantNameError");boaTLAddCustomEvent("OBO User Error","OBO User ADD Error Save Merchant Name Error","TransDetails");if(typeof window.cmCreateCustomError=="function"){cmCreateCustomError(passedPageID,null,null,null,"ADD_trans_edit_OBO_error",passedCatID,"OBO User ADD Error Save Merchant Name Error")}errorSection.find("div").hide();errorSection.find(".OBO-error-sec").show();errorSection.closest("tr").show();$(".merchantNameError",currentBtnSaveSection).focus();errorSection.addClass("background-adjust");$(".lbl-merchant-name",currentBtnSaveSection).addClass("lbl-error")}});$(document).on("click","table.trans-expanded-details .btn-cancel-merchant-name-edit",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");var merchantNameErrorSec=$parentDetailCell.find(".merchantNameError").closest("tr");$parentDetailCell.find(".merchant-name-text-edit-sec").closest("tr").hide();$parentDetailCell.find(".merchantNameEditLinkSec").show();merchantNameErrorSec.fadeOut("fast",function(){merchantNameErrorSec.hide()});$(".lbl-merchant-name",$parentDetailCell).removeClass("lbl-error")});$(document).on("click","table.trans-expanded-details .btn-save-merchant-transaction",function(){if((!$(this).hasClass("btn-disabled"))&&!isOBOUser){var currentBtnSaveSection=$(this).closest("table.trans-expanded-details");var updatedTransCategVal=$("select.txnMerchantcategory",currentBtnSaveSection).val();var originalVal=$(".lblCategoryCode",currentBtnSaveSection).text();var merchantNameVal=$(".lblMerchantNameVal",currentBtnSaveSection).text();var errorSection=currentBtnSaveSection.find(".categTransError");errorSection.removeClass("background-adjust");var saveUrl=$(this).attr("rel");saveUrl=saveUrl.split("&optType=")[0];saveUrl+="&optType=txnCategoryCode&userValCode="+encodeURIComponent(updatedTransCategVal);$.ajax({url:saveUrl,dataType:"json",beforeSend:function(){currentBtnSaveSection.find(".btn-save-merchant-transaction").addClass("btn-disabled")},success:function(data){if(data.accountTransactionDetailUpdateWrapper!=null&&data.accountTransactionDetailUpdateWrapper!==undefined&&data.accountTransactionDetailUpdateWrapper.responseCode!=null&&(data.accountTransactionDetailUpdateWrapper.responseCode).toString()==="0"&&data.accountTransactionDetailUpdateWrapper.responseValue.toString().toLowerCase()==="success"){var transCategoryErrorSec=$(".categTransUpdateError").closest("tr");$("select.txnMerchantcategory",currentBtnSaveSection).val(updatedTransCategVal);$(".lblCategoryCode",currentBtnSaveSection).text(updatedTransCategVal);$(".lblCategoryName",currentBtnSaveSection).text(transCategoryName[updatedTransCategVal]);$(".transCategoryEditLinkSec",currentBtnSaveSection).show();currentBtnSaveSection.find(".categ-edit-section").closest("tr").hide();transCategoryErrorSec.fadeOut("fast",function(){transCategoryErrorSec.hide()});$(".lbl-trans-category",currentBtnSaveSection).removeClass("lbl-error")}else{errorSection.find("div").hide();errorSection.find(".sys-unavail-trans-sec").show();errorSection.closest("tr").show();$(".categTransError",currentBtnSaveSection).focus();errorSection.addClass("background-adjust");$(".lbl-trans-category",currentBtnSaveSection).addClass("lbl-error")}},error:function(textStatus){boaTLAddCustomEvent("AJAX error. Data is empty with textStatus "+textStatus,"ADD Edit Transaction Category AJAX Err","TransDetails");errorSection.find("div").hide();errorSection.find(".sys-unavail-trans-sec").show();errorSection.closest("tr").show();$(".categTransError",currentBtnSaveSection).focus();errorSection.addClass("background-adjust");$(".lbl-trans-category",currentBtnSaveSection).addClass("lbl-error")},complete:function(){currentBtnSaveSection.find(".btn-save-merchant-transaction").removeClass("btn-disabled")}})}else{var currentBtnSaveSection=$(this).closest("table.trans-expanded-details");var errorSection=currentBtnSaveSection.find(".categTransError");boaTLAddCustomEvent("OBO User Error","OBO User ADD Error Save Transaction Category Error","TransDetails");if(typeof window.cmCreateCustomError=="function"){cmCreateCustomError(passedPageID,null,null,null,"ADD_trans_edit_OBO_error",passedCatID,"OBO User ADD Error Save Transaction Category Error")}errorSection.find("div").hide();errorSection.find(".OBO-error-sec").show();errorSection.closest("tr").show();errorSection.addClass("background-adjust");$(".categTransError",currentBtnSaveSection).focus();$(".lbl-trans-category",currentBtnSaveSection).addClass("lbl-error")}});$(document).on("click","table.trans-expanded-details .cancel-merchant-save-transaction",function(){var $parentDetailCell=$(this).closest("table.trans-expanded-details");var transCategoryErrorSec=$parentDetailCell.find(".categTransError").closest("tr");$parentDetailCell.find(".categ-edit-section").closest("tr").hide();$parentDetailCell.find(".transCategoryEditLinkSec").show();transCategoryErrorSec.fadeOut("fast",function(){transCategoryErrorSec.hide()});$(".lbl-trans-category",$parentDetailCell).removeClass("lbl-error")})}});function searchAction(){var parentWrapper=$(".ad-transaction-module-card-skin");var customSelectedActivated=false;var searchLayerWrapper=$(".advancedTransSearchLayer",parentWrapper);$(".searchButtonSimulator").bind("click",function(ev){if($(".advancedTransSearchLayer:visible",parentWrapper).length){if($("#searchMoreOptionsPanelUsed").length>0){$("#searchMoreOptionsPanelUsed").val("true")}$("a.moreoptions-search",searchLayerWrapper).click()}else{$(".transactionSearchForm input",parentWrapper).each(function(){atm_nullFieldForSearchBean(this)});if($("#searchMoreOptionsPanelUsed").length>0){$("#searchMoreOptionsPanelUsed").val("false")}$(this).parents("form.transactionSearchForm").submit()}});window.doNotSetFocus=false;$("#transaction-search-input").unbind("click");$("#transaction-search-input").bind(keydown,atm_searchFormEnterSubmit);$(".transactionSearchForm input",parentWrapper).click(function(){$(this).data("clicked","true")});$("a.action-more-options",parentWrapper).click(function(e){var offset=$(this).offset();if($(".advancedTransSearchLayer",parentWrapper).length){var searchLayerWrapper=$(".advancedTransSearchLayer",parentWrapper);var w=$(".advancedTransSearchLayer",parentWrapper).outerWidth()-$(this).outerWidth();if(isIE){var ieLeft=$(parentWrapper).offset().left;$(".advancedTransSearchLayer",parentWrapper).css("left",ieLeft).css("top",offset.top+25)}else{$(".advancedTransSearchLayer",parentWrapper).css("left",(offset.left-w)).css("top",offset.top+25)}if($(".advancedTransSearchLayer").css("display")=="block"){$("a.action-more-options span.ada-hidden").text("Show")}else{$("a.action-more-options span.ada-hidden").text("Hide")}$(".advancedTransSearchLayer",parentWrapper).toggle("fast");if($(".advancedTransSearchLayer",parentWrapper).css("display")=="block"){$("body").data("activeOptionsPanel","true")}else{$("body").data("activeOptionsPanel","false")}$("body").bind(keydown,atm_moreOptsEscListen);if(!customSelectedActivated){$("select.search-select-type").change(function(e){cusSelectLinkName="type_select_"+atm_makePurty($(this).val());if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,cusSelectLinkName,passedPageID)}});customSelectedActivated=true;$("a.triggerRange").click(function(rangeE){$(this).attr("style","display:none !important;");$(this).next("span").toggle();$(this).prev("input").focus();$("label:first .ada-hidden",$(this).parents(".formRow")).html(function(){return $(this).html()+" "+minTxt})});$("a.cancelRange").click(function(cancelE){$(this).parent("span").toggle();$(this).parent("span").siblings("a.triggerRange").toggle();$(this).siblings("input").val("");$("input:first",$(this).parents(".formRow")).focus();$("label:first .ada-hidden",$(this).parents(".formRow")).text(($("label:first .ada-hidden",$(this).parents(".formRow")).text()).replace(minTxt,""))});$("a.moreoptions-search",searchLayerWrapper).click(function(e){var amtRE=/^\$?([0-9]*|\d*\.\d{1,2}?)$/,badAmtFmt=false,badAmtComp=false,isValid=true;var amt1=$("#search-amount-from",searchLayerWrapper).val(),$amt2=$("#search-amount-to",searchLayerWrapper);var $errLayer=$(".formRow.search-error",searchLayerWrapper);if($amt2.is(":visible")===true){if(!((amt1==minTxt||$.trim(amt1)==""||amt1.match(amtRE)!==null)&&($amt2.val()==maxTxt||$.trim($amt2.val())==""||$amt2.val().match(amtRE)!==null))){(amt1.match(amtRE)===null||$amt2.val().match(amtRE)===null)?badAmtFmt=true:null;(parseFloat($amt2.val().replace("$",""))<=parseFloat(amt1.replace("$","")))?badAmtComp=true:null}else{(parseFloat($amt2.val().replace("$",""))<=parseFloat(amt1.replace("$","")))?badAmtComp=true:null}(parseFloat($amt2.val().replace("$",""))>=10000000000000||parseFloat(amt1.replace("$",""))>=10000000000000)?badAmtFmt=true:null}else{$amt2.val("");(amt1.match(amtRE)===null&&$.trim(amt1)!==""&&amt1!==allTxt)?badAmtFmt=true:null;(amt1.match(amtRE)!==null&&$.trim(amt1)!==""&&parseFloat(amt1.replace("$",""))>=10000000000000)?badAmtFmt=true:null}if(badAmtFmt||badAmtComp){isValid=false}if(isValid===true){if(!$errLayer.hasClass("hide")){$errLayer.addClass("hide")}$(".transactionSearchForm input",parentWrapper).each(function(){atm_nullFieldForSearchBean(this)});if($("#searchMoreOptionsPanelUsed").length>0){$("#searchMoreOptionsPanelUsed").val("true")}$(this).parents("form").submit()}else{var errHtml='<span class="ada-hidden">Alt:Error</span>';(badAmtFmt===true)?(errHtml+='<span id="TLu_ERROR_AmtFmtError">'+dollaFmtMsg+"</span><br/>"):null;(badAmtComp===true)?(errHtml+='<span id="TLu_ERROR_AmtCmpError">'+amtCompMsg+"</span><br/>"):null;$errLayer.html(errHtml).removeClass("hide");if(typeof window.cmCreateCustomError=="function"){cmCreateCustomError(passedPageID,null,null,null,"ADD_search_form_field_level_error",passedCatID,errHtml)}}})}}});$("body").live({click:function(e){if($("body").data("activeOptionsPanel")==="true"){if(!$(e.target).closest(".action-more-options").length&&!$(e.target).closest(".advancedTransSearchLayer").length&&$(".advancedTransSearchLayer").css("display")!=="none"&&!$(e.target).closest(".ui-datepicker").length){$(".advancedTransSearchLayer").hide("fast");$("a.action-more-options span.ada-hidden").text("Show");$("body").data("activeOptionsPanel","false")}}}})}window.showInterstitialLayer=function(){var options={size:"large",buttons:{Continue:true,Cancel:false},buttonsAltText:{Continue:"Continue",Cancel:"Cancel"},callback:gotoVendor};$("#leave-bac-interstitial-layer").boaModal(options);function gotoVendor(val){if(val==true){CARDLYTICS.logClientEventLinkContinue();window.open(vendorURL)}}};function openOlbAcctTransCheckCopyModal(date,amt,url){var $modal=$("#olbAcctTransCheckCopyModal");var checkDate=date;var checkAmt=amt;var checkUrl=url;var modalData={checkAmt:checkAmt,checkDate:checkDate,checkUrl:checkUrl};var options={skin:"modal-flex",width:565};$modal.boaFlexModal(options);$modal.data(modalData);$(".acc-copy-modal-request",$modal).removeClass("hide");$(".acc-copy-modal-confirm",$modal).addClass("hide");$("#olbAcctTransCheckCopyModalSubmit",$modal).bind("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}var modalData=$modal.data();$.post(modalData.checkUrl,{checkAmt:modalData.checkAmt,checkDate:modalData.checkDate});$(".acc-copy-modal-request",$modal).addClass("hide");$(".acc-copy-modal-confirm",$modal).removeClass("hide")});$("#olbAcctTransCheckCopyModalCancel",$modal).bind("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("name"),passedPageID)}$("#olbAcctTransCheckCopyModal").dialog("close")})}function atm_nullFieldForSearchBean(field){var fieldId=$(field).attr("id").toLowerCase();var fieldVal=$.trim($(field).val());var maxAmountFieldVal=$.trim($(".ad-transaction-module-card-skin .advancedTransSearchLayer input#search-amount-to").val());switch(fieldId){case"search-amount-from":if(fieldVal==allTxt){$(field).val("")}else{if(fieldVal==minTxt&&maxAmountFieldVal==maxTxt){$(field).val("")}else{if(fieldVal==minTxt&&maxAmountFieldVal!=maxTxt){$(field).val(0)}}}break;case"search-amount-to":if(fieldVal==maxTxt){$(field).val("")}break;case"transaction-search-input":if(fieldVal==keywordDefault){$(field).val("")}break}}function atm_searchFormEnterSubmit(e){var KEY_ENTER=13;var keyPressedCode=(window.event)?window.event.keyCode:e.keyCode;if(keyPressedCode==KEY_ENTER){if($(".ad-transaction-module-card-skin   .advancedTransSearchLayer:visible").length){if($("#searchMoreOptionsPanelUsed").length>0){$("#searchMoreOptionsPanelUsed").val("true")}$(".ad-transaction-module-card-skin   .transactionSearchForm input").each(function(){atm_nullFieldForSearchBean(this)});$(".ad-transaction-module-card-skin   .advancedTransSearchLayer a.moreoptions-search").click()}else{$(".ad-transaction-module-card-skin   .transactionSearchForm input").each(function(){atm_nullFieldForSearchBean(this)});if($("#searchMoreOptionsPanelUsed").length>0){$("#searchMoreOptionsPanelUsed").val("false")}$(".ad-transaction-module-card-skin   form.transactionSearchForm").submit()}}return}function atm_moreOptsEscListen(e){var KEY_ESC=27;var keyPressedCode=(window.event)?window.event.keyCode:e.keyCode;if(keyPressedCode==KEY_ESC){$(".ad-transaction-module-card-skin .advancedTransSearchLayer").hide("fast")}}function atm_typeDropSelectKeyHandlerADD(e){var KEY_ENTER=13,KEY_TAB=9,KEY_UP=38,KEY_DOWN=40,KEY_ESC=27;var keyPressedCode=(window.event)?window.event.keyCode:e.keyCode;if(keyPressedCode==KEY_ESC){$("div.selectmenu").hide("fast");$("body").unbind(keydown,atm_typeDropSelectKeyHandlerADD)}typeTraverseDown=function(curr){$(curr).removeClass("keyhover");$(curr).next().addClass("keyhover")};typeTraverseUp=function(curr){$(curr).removeClass("keyhover");$(curr).prev().addClass("keyhover")};var typeItems=$(e.data.box).find("li"),typeItemsCnt=typeItems.length,currTypeItem=$(e.data.box).find(".keyhover");if($(currTypeItem).size()>0){var itemTypeIx=$(typeItems).index(currTypeItem);if(keyPressedCode===KEY_ENTER){$("a",currTypeItem).click();$("body").unbind(keydown,atm_typeDropSelectKeyHandlerADD)}if(itemTypeIx===0){if(keyPressedCode===KEY_DOWN){typeTraverseDown(currTypeItem)}}else{if(itemTypeIx===typeItemsCnt-1){if(keyPressedCode===KEY_UP){typeTraverseUp(currTypeItem)}}else{if(keyPressedCode===KEY_UP){typeTraverseUp(currTypeItem)}else{if(keyPressedCode===KEY_DOWN){typeTraverseDown(currTypeItem)}}}}}else{if(keyPressedCode===KEY_DOWN){currTypeItem=typeItems[0]}else{if(keyPressedCode===KEY_UP){currTypeItem=typeItems[typeItemsCnt-1]}}$(currTypeItem).addClass("keyhover")}return false}function atm_makePurty(optVal){return optVal.toLowerCase().replace(/\s+|\-+/g,"_")}function isEmpty(str){return typeof str=="string"&&!str.trim()||typeof str=="undefined"||str===null}$.fn.setCursorPosition=function(pos){this.each(function(index,elem){if(elem.setSelectionRange){elem.setSelectionRange(pos,pos)}else{if(elem.createTextRange){var range=elem.createTextRange();range.collapse(true);range.moveEnd("character",pos);range.moveStart("character",pos);range.select()}}});return this};function atm_trim(s){s=s.replace(/(^\s*)|(\s*$)/gi,"");s=s.replace(/[ ]{2,}/gi," ");s=s.replace(/\n /,"\n");return s}function merchantNameSaveSuccess(currentBtnSaveSection){var merchantNameErrorSec=$(".merchantNameError").closest("tr");var newValue=$("input.txt-merchant-name",currentBtnSaveSection).val();$(".lblMerchantNameVal",currentBtnSaveSection).text(newValue);$(".merchantNameEditLinkSec",currentBtnSaveSection).show();currentBtnSaveSection.find(".merchant-name-text-edit-sec").closest("tr").hide();merchantNameErrorSec.fadeOut("fast",function(){merchantNameErrorSec.hide()});$(".lbl-merchant-name",currentBtnSaveSection).removeClass("lbl-error")}function merchantNameSaveError(currentBtnSaveSection,errorSection){errorSection.find("div").hide();errorSection.find(".sys-unavail-sec").show();errorSection.closest("tr").show();$(".merchantNameError",currentBtnSaveSection).focus();errorSection.addClass("background-adjust");$(".lbl-merchant-name",currentBtnSaveSection).addClass("lbl-error")}function expandTransDetails(e){if(window.asyncDetailsCallInProgress===true){return false}var transURI;if($(this).hasClass("expand-trans-from-desc")){transURI=$(e.target).parents("tr").find(".trans-date-cell img").attr("rel")}else{transURI=$(e.target).attr("rel")}var preExpandedImg="";var currTransDesc=$(e.target).parents("tr").find(".trans-desc-cell");var currDetails=$(currTransDesc).children(".trans-expanded-details");var currRow=$(e.target).parents("tr");var arrowImg,fromDesc,eventTargetTmp=$(e.target),extraADATmp,fullMontyADA;if($(this).hasClass("expand-trans-from-desc")){arrowImg=$(e.target).parents("tr").find(".trans-date-cell img");fromDesc=true}else{arrowImg=$(e.target);fromDesc=false}if($(arrowImg).attr("alt").toLowerCase().indexOf("expand")!==-1){closeAnyExpandedLayers();if(currDetails.length>0){$(currDetails).removeClass("hide");$(arrowImg).attr("src",showDetailsExpandedImgPath);expandTransText=htmlDecode(expandTransText);extraADATmp=$(arrowImg).attr("alt").split(expandTransText)[1];fullMontyADA=collapseTransText+extraADATmp;$(arrowImg).attr("alt",fullMontyADA);extraADATmp=$("a.expand-trans span.ada-hidden",currTransDesc).html().split(expandTransText)[1];fullMontyADA=collapseTransText+extraADATmp;$("a.expand-trans span.ada-hidden",currTransDesc).html(fullMontyADA);$(arrowImg).parent().parent().parent("tr").addClass("trans-expanded")}else{window.asyncDetailsCallInProgress=true;$.post(transURI,function(data){var transtemp;if($(".cardlytics-transaction-offer",currRow).length>0){var $cardlyticsinlne=$(".cardlytics-transaction-offer",currRow).clone();$(".cardlytics-transaction-offer",currRow).remove()}currTransDesc=$(e.target).parents("tr").find(".trans-desc-cell");var currTransDescHTML=$(currTransDesc).html();var expandedTransDescHTML=currTransDescHTML+data;if(typeof $cardlyticsinlne!=="undefined"){expandedTransDescHTML+='<div class="'+$cardlyticsinlne.attr("class")+'" id="'+$cardlyticsinlne.attr("id")+'">'+$cardlyticsinlne.html()+"</div>"}if(fromDesc==true){arrowImg=$(eventTargetTmp).parents("tr").find("td.trans-date-cell").find("img")}else{if(fromDesc==false){arrowImg=$(eventTargetTmp)}}$(currTransDesc).html(expandedTransDescHTML);if(typeof fixCategorizationEnableIndicator!=="undefined"&&fixCategorizationEnableIndicator!==null&&fixCategorizationEnableIndicator===true){$(currTransDesc).find(".txnMerchantcategory").html(categoryTransOptions)}$(arrowImg).attr("src",showDetailsExpandedImgPath);expandTransText=htmlDecode(expandTransText);extraADATmp=$(arrowImg).attr("alt").split(expandTransText)[1];fullMontyADA=collapseTransText+extraADATmp;$(arrowImg).attr("alt",fullMontyADA);extraADATmp=$("a.expand-trans span.ada-hidden",currTransDesc).html().split(expandTransText)[1];fullMontyADA=collapseTransText+extraADATmp;$("a.expand-trans span.ada-hidden",currTransDesc).html(fullMontyADA);$(arrowImg).parent().parent().parent("tr").addClass("trans-expanded");window.asyncDetailsCallInProgress=false;setTimeout(function(){if(typeof cX==="function"&&cX!==null){cX("onload")}},100)})}}else{if(currDetails.length>0){$(currDetails).addClass("hide")}$(arrowImg).attr("src",showDetailsImgPath);collapseTransText=htmlDecode(collapseTransText);extraADATmp=$(arrowImg).attr("alt").split(collapseTransText)[1];fullMontyADA=expandTransText+extraADATmp;$(arrowImg).attr("alt",fullMontyADA);extraADATmp=$("a.expand-trans span.ada-hidden",currTransDesc).html().split(collapseTransText)[1];fullMontyADA=expandTransText+extraADATmp;$("a.expand-trans span.ada-hidden",currTransDesc).html(fullMontyADA);$(arrowImg).parent().parent().parent("tr").removeClass("trans-expanded")}}function wireDetailsExpandADA(e){$(this).unbind("keydown");$(this).bind("keydown",function(e){var keyPressedCode=(window.event)?e.which:e.keyCode;if(keyPressedCode==KEY_ENTER){$(e.target).find(".expand-trans").click()}})}function generateMerchantTxnCategoryDropdown(){$.ajax({url:getTransCategListUrl,data:"{}",type:"POST",datatype:"json",contentType:"application/json; charset=UTF-8",timeout:20000,error:function(XMLHTTPRequest,textStatus,errorThrown){boaTLAddCustomEvent("AJAX error. Data is empty with textStatus "+textStatus,"Transaction category dropdown AJAX Err","TransDetails")},success:function(data){if(data!=null||typeof(data)!=="undefined"||data.length!==0){var categoryList=data.payload;categoryTransOptions="<option value='998' class='hide pending-categ-option'>"+selectCategory+"</option>";$.each(categoryList,function(idx,val){var categoryCode=val.categoryId;var categoryName=val.categoryName;var option="<option value='"+categoryCode+"'>"+categoryName+"</option>";categoryTransOptions=categoryTransOptions+option});isTransCatPopulated=true;setTimeout(function(){if(typeof cX==="function"&&cX!==null){cX("onload")}},100)}else{boaTLAddCustomEvent("AJAX error. Data is empty","Get transaction categories AJAX Err","TransDetails")}}})}function htmlDecode(input){var e=document.createElement("div");e.innerHTML=input;return e.childNodes[0].nodeValue}$(document).ready(function(){$(".ad-transaction-module-card-skin .expand-trans").live("click",expandTransDetails);$(".ad-transaction-module-card-skin .expand-trans-from-arrow-ada").live("focus",wireDetailsExpandADA);$(".ad-transaction-module-fraud-skin .expand-trans").live("click",expandTransDetails);$(".ad-transaction-module-fraud-skin .expand-trans-from-arrow-ada").live("focus",wireDetailsExpandADA);if(typeof fixCategorizationEnableIndicator!=="undefined"&&fixCategorizationEnableIndicator!==null&&fixCategorizationEnableIndicator===true&&typeof isTransCatPopulated!=="undefined"&&isTransCatPopulated!==null&&isTransCatPopulated===false){generateMerchantTxnCategoryDropdown()}});function displaySSPopup(url){var newWindow=window.open(url,"","width=465,height=300,dependent=0,resizable=no,scrollbars=no");newWindow.focus();return false}$(document).ready(function(){if($("html").attr("lang").toLowerCase().indexOf("es")!==-1){$(".ad-side-well-module-featured-benefits-skin a:first").click(function(){cmCreatePageviewTag("OLB:Content;Continuar_en_Ingles_Interstitial"+locAppendage,null,null,"OLB:Content",false,false,null,false,false,cmAdlink,null,cmAdlob,null,cmPageViewSessionIDForConf,null,null,null,cmAttrParam,null,null,null)})}});function OOLPopUpShopSafe(link,contentId,appName){var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");var redirectLink=link+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");var newWindow=window.open(redirectLink,"shopSafe","width=465,height=300,dependent=0,resizable=no,scrollbars=no");newWindow.focus();$("#continue a").unbind("click")});return false}$(document).ready(function(){$(".ad-side-well-module-persistent-cash-skin .rollon").mouseover(function(){$(".ad-side-well-module-persistent-cash-skin .rolloff").show();$(".ad-side-well-module-persistent-cash-skin .rollon").hide();$(".ad-side-well-module-persistent-cash-skin .before-expand").hide("fast");$(".ad-side-well-module-persistent-cash-skin .on-expand").slideToggle("fast")});$(".ad-side-well-module-persistent-cash-skin .hide-details-rolloff").click(function(){$(".ad-side-well-module-persistent-cash-skin .rolloff").hide();$(".ad-side-well-module-persistent-cash-skin .rollon").show();$(".ad-side-well-module-persistent-cash-skin .on-expand").slideToggle("fast");$(".ad-side-well-module-persistent-cash-skin .before-expand").show("fast")})});$(document).ready(function(){if($(".ad-alternate-offer-module .enhancement-skin").length>0){if(typeof oboUser==="undefined"){var oboUserFlag=false}else{var oboUserFlag=oboUser}var altOfferUpdateLink="";$("a.alt-offer-link").live("click",function(e){$altOfferLink=$(this);$("div.err-msg-alt-flyout").addClass("hide");var currentDealSec=$altOfferLink.closest(".deal-section");var currentDealImgSec=$altOfferLink.closest(".multi-deals-img-section");var currentDealValueSec=currentDealSec.find(".deal-value");var currentMultiDealNextSec=$altOfferLink.closest(".deal-section").next(".deal-section");var altOfferLinkContent=$altOfferLink.attr("rel");var altOfferLinkContentId="#"+altOfferLinkContent;var offerState=$(this).attr("offerStateRel");var altOfferId=$(this).attr("offerIdRel");if(!$(altOfferLinkContentId).is(":visible")){if((oboUserFlag=="true")&&((typeof offerState!="undefined")&&offerState=="new")){}else{$(".multi-deals-img-section").removeClass("selected");currentDealImgSec.addClass("selected");currentDealValueSec.addClass("selected");$(".arrow-down").hide();currentDealSec.find(".arrow-down").show();if($altOfferLink.next(".cardlytics-alt-merchant-status").hasClass("add-deal")){$altOfferLink.next(".cardlytics-alt-merchant-status").addClass("ready-to-use").removeClass("add-deal")}if(typeof altOfferId!="undefined"){fsdBamdUpdate.renew(altOfferId,"A")}var dealDivIndex=$("div.deal-section").index(currentDealSec);if(dealDivIndex%2===0){$(altOfferLinkContentId).insertAfter(currentMultiDealNextSec)}else{$(altOfferLinkContentId).insertAfter(currentDealSec)}$(".alt-cardlytics-flyout").hide();$(altOfferLinkContentId).show();if($(altOfferLinkContentId).find(".earn-msg").text().indexOf("href")!=-1){$(altOfferLinkContentId).find(".earn-msg").html($(altOfferLinkContentId).find(".earn-msg").text())}}}else{$(".alt-cardlytics-flyout").hide();$(".multi-deals-img-section").removeClass("selected");$(".arrow-down ").hide()}if(typeof offerState==="undefined"){window.altOfferIconStat=offerState}else{window.altOfferIconStat=""}if(oboUserFlag!="true"){boaTLAddEvent(e);altOfferUpdateLink=$altOfferLink.attr("id");altOfferIdForCMTmp=$altOfferLink.attr("rel").split("_");window.altOfferIdForCM=altOfferIdForCMTmp[altOfferIdForCMTmp.length-1];window.altOfferMerchantNameForCM=$("#"+$altOfferLink.attr("rel")+" .offer-modal-merchant-name").html().toLowerCase().replace(new RegExp("\\s","g"),"_");var cardlyticsEnz=$("#post-msg-cardlytics-enz-"+altOfferId).attr("rel");if(cardlyticsEnz!==null&&cardlyticsEnz!==undefined){$.get(cardlyticsEnz)}if((typeof offerState!="undefined")&&offerState!="active"){$.ajax({url:altOfferUpdateLink,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){$("div.err-msg").addClass("hide");$("div.please-wait").removeClass("hide")},error:function(textStatus){if(typeof window.cmCreateCustomError=="function"&&typeof passedPageID!=="undefined"){cmCreateCustomError(passedPageID,null,null,null,"AD_BAMD_alternate_offer_module_error",passedCatID,"cannot_open_flyout")}$("div.err-msg").removeClass("hide");$("div.err-msg").attr("role","region").attr("aria-live","rude").focus()},success:function(data){if((data.targetedOffersWidgetUpdate)!=="undefined"&&(data.targetedOffersWidgetUpdate)!==null&&(data.targetedOffersWidgetUpdate.manageOfferResult).toString()==="true"){if((typeof offerState!="undefined")&&offerState!="active"){$altOfferLink.addClass("ready-to-use").removeClass("add-deal");$(".unselected").removeClass("unselected").addClass("selected");$altOfferLink.attr("offerStateRel","active");if($(".ad-inline-offer-module").length>0){if((typeof altOfferId!="undefined")&&($("#"+altOfferId).length>0)){var offerIcon=$("#"+altOfferId);var offerIconAlt=$(offerIcon).attr("alt");var offerIconStatArr=$(offerIcon).attr("src").toLowerCase().split("-offer-icon-18");var offerIconStatArr2=offerIconStatArr[0].split("graphic/");var offerIconPathPre=offerIconStatArr2[0],offerIconStat=offerIconStatArr2[1];if(offerIconStat.indexOf("new")!==-1){$(offerIcon).attr("src",offerIconPathPre+"graphic/ready-offer-icon-18.gif");offerIconAlt=offerIconAlt.toLowerCase().replace("new","Active");$(offerIcon).attr("alt",offerIconAlt)}}}}if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_flyout_activated_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}$(".deal-close").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_flyout_closed_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}});$(".earn-msg.alt-earned a").unbind("click");$(".earn-msg.alt-earned a").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_merchant_link_clicked_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}});$("div.please-wait").addClass("hide")}else{$("div.err-msg").removeClass("hide");$("div.err-msg").attr("role","region").attr("aria-live","rude").focus()}},complete:function(textStatus){$("div.please-wait").addClass("hide");if(typeof cX=="function"){cX("onload")}}})}else{$.post(altOfferUpdateLink);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_flyout_activated_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}$(".deal-close").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_flyout_closed_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}});$(".earn-msg.alt-earned a").unbind("click");$(".earn-msg.alt-earned a").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_merchant_link_clicked_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}})}}else{}});$("a.alt-offer.boa-bamd-interstitial.merchant-link").unbind("click");$("a.alt-offer.boa-bamd-interstitial.merchant-link").live("click",function(){if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,$(this).attr("title"),passedPageID)}$("div.err-msg-alt-flyout").addClass("hide");window.CardlyticsVendorURL=$(this).attr("rel");var merchantLinkClickedURI=altOfferUpdateLink.replace("Activated","MerchantLinkClicked");var options={size:"medium",buttons:{Continue:true,Cancel:false}};if(oboUserFlag!="true"){$.ajax({url:merchantLinkClickedURI,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){$("div.please-wait-alt-flyout").removeClass("hide")},error:function(XMLHttpRequest,textStatus,errorThrown){$("div.err-msg-alt-flyout").removeClass("hide");if(typeof window.cmCreateCustomError=="function"&&typeof passedPageID!=="undefined"&&typeof passedCatID!=="undefined"){cmCreateCustomError(passedPageID,null,null,null,"AD_BAMD_flyout_error",passedCatID,"cannot_connect_to_external_site")}$("div.err-msg-alt-flyout").attr("role","region").attr("aria-live","rude").focus()},success:function(data){$("#boa-interstitial-layer").boaModal(options);$("#boa-interstitial-layer-close").unbind("click");$("#boa-interstitial-layer-close").bind("click",function(e){$(this).children(".ada-hidden").remove();$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_modal_interstitial_close_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}});$("#boa-interstitial-layer div.buttons").addClass("plt-15 pbtm-10");$("#boa-interstitial-layer .buttons a:first").removeClass("button-gray").addClass("button-blue");$("#boa-interstitial-layer .buttons a:first").unbind("click");$("#boa-interstitial-layer .buttons a:first").bind("click",function(e){boaTLAddEvent(e);var continueButtonClicked=altOfferUpdateLink.replace("Activated","TransferredToMerchant");if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_modal_interstitial_continue_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}$.post(continueButtonClicked);$(".ui-dialog").remove();window.open(window.CardlyticsVendorURL)});$($("#boa-interstitial-layer .buttons a")[1]).unbind("click");$($("#boa-interstitial-layer .buttons a")[1]).bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_modal_interstitial_cancel_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}})},complete:function(textStatus){$("div.please-wait-alt-flyout").addClass("hide");if(typeof cX=="function"){cX("onload")}}})}else{$("#boa-interstitial-layer").boaModal(options);$("#boa-interstitial-layer-close").unbind("click");$("#boa-interstitial-layer-close").bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_modal_interstitial_close_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}});$("#boa-interstitial-layer div.buttons").addClass("plt-15 pbtm-10");$("#boa-interstitial-layer .buttons a:first").removeClass("button-gray").addClass("button-blue");$("#boa-interstitial-layer .buttons a:first").unbind("click");$("#boa-interstitial-layer .buttons a:first").bind("click",function(e){boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_interstitial_continue_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}window.open(window.CardlyticsVendorURL)});$($("#boa-interstitial-layer .buttons a")[1]).unbind("click");$($("#boa-interstitial-layer .buttons a")[1]).bind("click",function(e){$("#boa-interstitial-layer").dialog("close");$(".ui-dialog").remove();boaTLAddEvent(e);if(typeof window.cmCreateManualLinkClickTag=="function"){window.reallyDetailedAltLinkNameForCM=window.altOfferIdForCM+"_"+window.altOfferMerchantNameForCM+"_"+window.altOfferIconStat;cmCreateManualLinkClickTag(window.location.href,"alt_offer_modal_interstitial_cancel_button_"+window.reallyDetailedAltLinkNameForCM,passedPageID)}})}});$(".cardlytics-flyout-header a.deal-close").click(function(){$(this).closest(".alt-cardlytics-flyout").hide();$(".multi-deals-img-section").removeClass("selected");$(".arrow-down ").hide()});if($(".deal-empty").length>0){var dealSectionHeight=0;var dealSectionWidth=0;$(".deal-section").each(function(index){if(!$(this).children().hasClass("deal-empty")){currentDealSectionHeight=$(this).height();currentDealSectionWidth=$(this).width();if(currentDealSectionHeight>dealSectionHeight){dealSectionHeight=currentDealSectionHeight}if(currentDealSectionWidth>dealSectionWidth){dealSectionWidth=currentDealSectionWidth}}});$(".deal-empty").closest(".deal-section").height(dealSectionHeight);$(".deal-empty").closest(".deal-section").width(dealSectionWidth)}if($(".signup-alerts-image-container").length>0){var dealSectionHeight=0;$(".multi-deals-img-section").each(function(){currentDealSectionHeight=$(this).height();if(currentDealSectionHeight>dealSectionHeight){dealSectionHeight=currentDealSectionHeight}});$(".multi-deals-img-section.signup-alerts").height(dealSectionHeight-1)}$(".multi-deals-img-section a.alt-offer-link").hover(function(){$(this).closest(".multi-deals-img-section").addClass("active")},function(){$(this).closest(".multi-deals-img-section").removeClass("active")})}});$(document).ready(function(){if($(".ad-info-service-module").length>0){$(".info-service-fee").css("width","243px");$(".info-service-label-fix").css("width","157px");$(".info-service-class-fix").css("width","157px");$(".sr-right-data").css("width","49px");if($("html").attr("lang").toLowerCase()==="es-us"){$(".info-service-fee").css("margin-right","56px")}}if($(".ad-info-service-module").length>0){if($(".width-fix").height()>19&&$(".width-fix").width()>174){$(".info-service-label-fix").css("width","139px");$(".info-service-class-fix").css("margin-right","42px")}}if($(".ad-info-service-module").length>0){if($("html").attr("lang").toLowerCase()==="es-us"){$(".info-service-label-fix").css("width","165px");$(".info-service-class-fix").css("width","165px");if($(".info-service-fee").height()>19&&$(".info-service-fee").width()>174){$(".info-service-fee").css("width","220px");$(".top-fix").css("padding-top","15px");$(".class-fix").css("margin-top","20px")}if($(".width-fix").height()>19&&$(".width-fix").width()>174){$(".info-service-label-fix").css("width","164px");$(".class-fix").css("margin-top","0px")}}var currNickValue="";var nickValue="";$(".edit").click(function(){nickValue=$.trim($(".nickname").html());$(".edit-off").hide();$(".edit-on").show();$(".nick").val(nickValue)});$(".save").click(function(){currNickValue=$.trim($(".nick").val());var that=this;if(!$("#restServiceErrors").hasClass("hide")){$("#restServiceErrors").addClass("hide");if($("#errorCodeContainer").find("span").length>0){$("#errorCodeContainer").empty()}}var formatRedErrMsg=function(text){var _foo='<span class="redErrorMsg">'+text+"</span>";return _foo};var formatRedBlackMsg=function(text){var _bar='<span class="redErrorMsg">'+text.split(".")[0]+".</span>"+text.split(".")[1]+".";return _bar};function showError(msg){$("#clientSideErrors").removeClass("hide").find(".error-text").empty().html(msg)}var validator=function(){var nickname={isOboUser:function(){var oboUserObj=cardOboUser?false:true;return oboUserObj},noChanges:function(input){var boolObj=false;if(nickValue===($.trim(input))){boolObj=false}else{boolObj=true}return boolObj},alphanumericspace:function(input){return/^$|^[a-zA-Z0-9 ]+$/.test($.trim(input))},maxLength:function(input){return $.trim(input).length>30?false:true}};return nickname}();var isValid=true;if(!validator.isOboUser()){showError(formatRedErrMsg(cardOboUserErrorMsg));isValid=false}else{if(!validator.noChanges(currNickValue)){showError(formatRedBlackMsg(noChangesMadeErrorMsg));isValid=false}else{if(!validator.alphanumericspace(currNickValue)){showError(formatRedErrMsg(alphaNumericMaxLenErorMsg));isValid=false}else{if(!validator.maxLength(currNickValue)){showError(formatRedErrMsg(alphaNumericMaxLenErorMsg));isValid=false}else{$("#clientSideErrors").addClass("hide").find(".error-text").empty();isValid=true}}}}if(isValid==true){var requestObj={applicationId:applicationId,adx:adx,nickname:currNickValue,traceId:traceID};$.ajax({url:editNickNameURL,dataType:"json",data:requestObj,type:"GET",timeout:10000,beforeSend:function(xhr){$(that).parent().append('<img src="'+waitLoadingPath+'" width="30" height="30" />')},success:function(response,status,xhr){if(typeof cX=="function"){cX("onload")}var statusMsg=response.statusMessage;var errorCode=response.errorCode;var statusCode=response.statusCode;var errorCodeDesc="";switch(errorCode){case"tl_ERRCD10007":errorCodeDesc=formatRedErrMsg(alphaNumericMaxLenErorMsg);break;case"tl_ERRCD100008":errorCodeDesc=formatRedBlackMsg(uniqueNickNameErrorMsg);break;case"tl_ERRCD100009":errorCodeDesc=formatRedBlackMsg(newNickNameErrorMsg);break;case"tl_ERRCD100010":errorCodeDesc=formatRedBlackMsg(requestFailedErrorMsg);break;case"tl_ERRCD100011":errorCodeDesc=formatRedBlackMsg(noChangesMadeErrorMsg);break;case"tl_ERRCD100013":errorCodeDesc=formatRedErrMsg(oboUserErrorMsg);break}if(statusCode=="500"||statusCode=="400"){$("#restServiceErrors").removeClass("hide");$("#errorCodeContainer").html("");$("#errorCodeContainer").append(errorCodeDesc)}else{$("#restServiceErrors").addClass("hide");$("#errorCodeContainer").empty();if(currNickValue==""){$(".edit-on").hide();$(".create_nickname").show();updateAccountSelector(productName);if(typeof fsdBuildAO!=="undefined"&&fsdBuildAO!==undefined&&fsdBuildAO!==null){fsdBuildAO.renew()}}else{updateNickName(currNickValue);updateAccountSelector(currNickValue);if(typeof fsdBuildAO!=="undefined"&&fsdBuildAO!==undefined&&fsdBuildAO!==null){fsdBuildAO.renew()}}}$(that).parent().find("img").remove()},error:function(xhr,status,error){if(status=="timeout"||status=="error"){$("#restServiceErrors").removeClass("hide");$("#errorCodeContainer").html("");$("#errorCodeContainer").append(formatRedBlackMsg(requestFailedErrorMsg))}$(that).parent().find("img").remove()}})}if($(".error-text").find("span").length>0){var _errorMsg=$(".error-text span").html();var _noColonErrorMsg=$.trim(_errorMsg.replace(/:/g,""));$(".error-text span").html(_noColonErrorMsg)}});$(".cancel").click(function(){$(".edit-on").hide();$(".edit-off").show();$(".nickname").html(nickValue);$("#clientSideErrors").addClass("hide").find(".error-text").empty();$(".error-fix").removeClass("field-level-error");$("#restServiceErrors").addClass("hide");$("#errorCodeContainer").empty()});$(".ad-info-service-module span.grey-text").each(function(){$(this).parents("li").css("color","#b0b0b0")})}function updateNickName(currNickValue){$(".ad-info-service-module #nick-chk span.nickname").html(currNickValue);$(".ad-info-service-module #nick-chk div.edit-on").hide();$(".ad-info-service-module #nick-chk div.edit-off").show()}function updateCoherenceCache(nickName){var url=coherenceCacheURL;var requestObj={userValue:nickName};$.post(url,requestObj,function(data,status,jqxhr){if(status=="success"){}})}function updateAccountSelector(currNickValue){$(".ad-acct-title-module a[name=page_title_acct_switcher]").find("span:last-child").html(currNickValue)}if($(".ad-info-service-module").length>0){if($("html").attr("lang").toLowerCase()==="es-us"){$(".info-service-label").css("margin-right","65px")}}var logATMLocationLink="/myaccounts/details/card/log-atmlocation-event.go?";var $infoServModule=$(".ad-info-service-module");$(".ad-info-service-module .info-service-label").each(function(){if($(this).height()>18){$(this).siblings(".info-service-value").addClass("ptop-18")}});if($infoServModule.length>0){if($(".ad-info-service-module .card-fee-skin").length>0){$(".ad-info-service-module .card-fee-skin .info-service-label").css("margin-right","10px");$(".ad-info-service-module .maintenance-fee .info-service-label").css("width","80%");$(".ad-info-service-module .payment-fee .info-service-label").css("width","65%")}if($(".ad-info-service-module .card-acct-skin").length>0){boaEqualWidth($(".ad-info-service-module .card-acct-skin .info-service-label"))}if($(".ad-info-service-module .card-contact-skin").length>0){boaEqualWidth($(".ad-info-service-module .card-contact-skin .info-service-label"))}if($("html").attr("lang").toLowerCase()==="es-us"){$(".label-spanish").width("165px");$(".ad-info-service-module .info-service-fix").each(function(){$(this).css("padding-right","52px")})}var $acctDefault=$(".ad-info-service-module #acctDefault");var $acctShow=$acctDefault.next("div#acctShow");$("a.show-details-action",$acctDefault).live("click",function(){if($(this).hasClass("un-ajaxed")){$.ajax({url:$(this).attr("rel"),dataType:"json",beforeSend:function(){$(this).parent().append('<img src="'+waitLoadingPath+'" width="18" height="18" />')},success:function(data){if(typeof cX=="function"){cX("onload")}$(this).parent().next("img").remove();$acctShow.find("span:first").html(data.dynamicShowAccountDetailsWrapper.showAccountNumber);$acctShow.removeClass("hide");$acctDefault.addClass("hide");$(this).removeClass("un-ajaxed")}})}else{if($acctShow.hasClass("hide")){$acctShow.removeClass("hide");$acctDefault.addClass("hide")}}});$("a.edit-action-inside",$acctShow).click(function(){$acctShow.addClass("hide");$acctDefault.removeClass("hide")})}var $noPinInfoLayer=$(".atm-location");if($noPinInfoLayer.length>0){$noPinInfoLayer.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=atmcenters")}})}var $needcash=$("a.needcash");if($needcash.length>0){$needcash.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=nicp")}})}var $disputestatus=$("a.disputestatus");if($disputestatus.length>0){$disputestatus.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=ds")}})}var $annualmaintenance=$("a.annual-maintenance");if($annualmaintenance.length>0){$annualmaintenance.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink="+feeType)}})}var $latepayment=$("a.late-payment");if($latepayment.length>0){$latepayment.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=lp")}})}var $overlimit=$("a.over-limit");if($overlimit.length>0){$overlimit.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=ol")}})}var $returnpayment=$("a.return-payment");if($returnpayment.length>0){$returnpayment.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=rp")}})}var $hide=$("a.edit-action-inside");var $show=$("a.show-details-action");if($show.length>0||$hide.length>0){$show.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=show")}});$hide.click(function(){if(typeof logATMLocationLink!="undefined"&&logATMLocationLink!==null&&logATMLocationLink.length>0){$.post(logATMLocationLink+"eventLink=hide")}})}$(".acc-show").click(function(){$(".acc-show").hide();$(".acc-hide").show();$(".acc-num").show()});$(".acc-hide").click(function(){$(".acc-show").show();$(".acc-hide").hide();$(".acc-num").hide()});$(document).on("click","a[name=paypal_enroll]",function(){if($(this).attr("rel")!=null){window.open($(this).attr("rel"))}})});function fnPrintPopUp(url){var newWindow=window.open(url,"","width=465,height=300,dependent=0,resizable=no,scrollbars=no");newWindow.focus();return false}function OOLPopUpShopSafeForIFS(link,contentId,appName){var options={size:"small",buttons:{}};$("#continue").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");$("#continue a").unbind("click")});$("#continue a").click(function(){$(".modal-description").dialog("close");$("#continue").hide();$(".modal-description").dialog("destroy");var redirectLink=link+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");var newWindow=window.open(redirectLink,"shopSafe","width=465,height=300,dependent=0,resizable=no,scrollbars=no");newWindow.focus();$("#continue a").unbind("click")});return false}function showReqCheckCopyWindow(){var targetModalId=$(".show-req-check-copy-modal").attr("rel");var $targetModal=$("#"+targetModalId).clone();splitedVar=$(".show-req-check-copy-modal").attr("rev").split("^");var options={width:"600"};$targetModal.boaFlexModal(options);var $dateDiv=$("#modal-row-value-date",$targetModal),$amountDiv=$("#modal-row-value-amount",$targetModal);$dateDiv.find("span:first").html(splitedVar[0]);$amountDiv.find("span:first").html(splitedVar[1]);var $checkCopyModal=$("#req-check-copy-modal-ModalContainer");if($checkCopyModal.length>0){$checkCopyModal.find(".ui-dialog-titlebar-close, .req-check-copy-modal-leave-button").click(function(){boaCSValidate.fn.validateClear($checkCopyModal.find("#checkNum"));$targetModal.dialog("close").remove();$(".ui-dialog").remove()});var checkNumber="";$checkCopyModal.find("#checkNum").live("keyup",function(e){var $this=$(this);if($this.val().length>0){if(/[^0-9]/.test($this.val())){boaCSValidate.fn.validateFields($this,reqCheckCopySkinErrors.errorMessage.GLOBAL.CHECKNUM.E01);$checkCopyModal.find("#modal_submit").addClass("btn-disabled");$checkCopyModal.find(".modal_submit_txt").html("&nbsp;button disabled")}else{checkNumber=$this.val();boaCSValidate.fn.validateClear(this);if($this.val().length>2){$checkCopyModal.find("#modal_submit").removeClass("btn-disabled");$checkCopyModal.find(".modal_submit_txt").html("")}else{$checkCopyModal.find("#modal_submit").addClass("btn-disabled");$checkCopyModal.find(".modal_submit_txt").html("&nbsp;button disabled")}}}else{boaCSValidate.fn.validateClear(this);$checkCopyModal.find("#modal_submit").addClass("btn-disabled");$checkCopyModal.find(".modal_submit_txt").html("&nbsp;button disabled")}});$checkCopyModal.find(".req-check-copy-modal-submit-button").unbind("click");$checkCopyModal.find(".req-check-copy-modal-submit-button").bind("click",function(){if(!($(this).hasClass("btn-disabled"))){if(checkNumber.length>0){var targetModalSuccessId=$(this).attr("rel");var $targetModalSuccess=$("#"+targetModalSuccessId).clone();var options={width:"600"};$(".ui-dialog").remove();var url=splitedVar[2]+"&checkNumber="+checkNumber;$.ajax({timeout:2000,url:url,dataType:"json"});$targetModalSuccess.boaFlexModal(options);$(".ui-dialog-titlebar-close",$targetModalSuccess).click(function(){$targetModalSuccess.dialog("close").remove()})}}})}}$(document).ready(function(){var $adSummaryContainer=$(".ad-summary-container");var $adSummaryDetails;if($(".ad-acct-summary-module-deposit-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module-deposit-skin",$adSummaryContainer)}else{if($(".ad-acct-summary-module-card-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module-card-skin",$adSummaryContainer)}else{if($(".shared-olb-summary-module",$adSummaryContainer).length>0){$adSummaryDetails=$(".shared-olb-summary-module",$adSummaryContainer)}else{if($(".ad-acct-summary-module.olb-summary-common",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module.olb-summary-common",$adSummaryContainer)}else{if($(".ad-acct-summary-module-loan-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module-loan-skin",$adSummaryContainer)}else{if($(".ad-acct-summary-module .sbcard-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module .sbcard-skin",$adSummaryContainer)}else{if($(".ad-acct-summary-module-loc-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module-loc-skin",$adSummaryContainer)}else{if($(".ad-acct-summary-module .card-trans-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module .card-trans-skin",$adSummaryContainer)}else{if($(".ad-acct-summary-module-mortgage-in-process-skin",$adSummaryContainer).length>0){$adSummaryDetails=$(".ad-acct-summary-module-mortgage-in-process-skin",$adSummaryContainer)}}}}}}}}}var $adSummaryCollapse=$(".summary-collapse",$adSummaryContainer);var $adSummaryADAAction=$(".ada-action",$adSummaryContainer);var adSummaryEffect="";if(navigator.appVersion.indexOf("MSIE 7")===-1){adSummaryEffect="blind"}if($adSummaryContainer.length>0){function setSummaryWidgetState(openState){if(typeof(pipadUrlForCloseOrOpen)!=="undefined"&&pipadUrlForCloseOrOpen!==""){$.ajax({url:pipadUrlForCloseOrOpen+"&snippetArea="+openState})}}if(adSummaryWidgetOpenState==="close"){$adSummaryCollapse.addClass("summary-expand").attr("name","ad_summary_toggle_show");$adSummaryDetails.hide();$adSummaryADAAction.html($boaLangObj.show)}else{if(typeof $adSummaryDetails!=="undefined"){$adSummaryCollapse.removeClass("summary-expand").attr("name","ad_summary_toggle_hide");$adSummaryDetails.show(adSummaryEffect);$adSummaryADAAction.html($boaLangObj.hide)}}$adSummaryCollapse.show();$adSummaryCollapse.click(function(){if($(this).hasClass("summary-expand")){$(this).removeClass("summary-expand").attr("name","ad_summary_toggle_show");$adSummaryDetails.show(adSummaryEffect);$adSummaryADAAction.html($boaLangObj.hide);if($("#shared-olb-summary-ada-focus-target").length>0){$("#shared-olb-summary-ada-focus-target").focus()}setSummaryWidgetState("OP");$(".tabstrip-module").hide();$(".tabstrip-module").show()}else{$(this).addClass("summary-expand").attr("name","ad_summary_toggle_hide");$adSummaryDetails.hide(adSummaryEffect);$adSummaryADAAction.html($boaLangObj.show);setSummaryWidgetState("CL");$(".tabstrip-module").hide();$(".tabstrip-module").show()}})}});$(document).ready(function(){$("a.ad-leave-bac-interstitial-layer").on("click",function(e){e.preventDefault();var link=$(this).attr("rel");var url=link.match(/^http[s]*:\/\//)?link:"http://"+link;if(typeof showBACLeaveInterstitialLayer==="function"){showBACLeaveInterstitialLayer(url)}});function showBACLeaveInterstitialLayer(url){var $targetModal=$("#ad-leave-bac-interstitial-layer");if($targetModal.length>0){var options={width:"700",buttons:{}};$targetModal.boaFlexModal(options);var continueBtn=$targetModal.find("#boa_continue");var cancelBtn=$targetModal.find("#boa_cancel");$(continueBtn).off("click").on("click",function(e){e.preventDefault();var site=window.open(url);$targetModal.dialog("close")});$(cancelBtn).off("click").on("click",function(e){e.preventDefault();$targetModal.dialog("close")})}}});function OOLPopUpShopSafe(link,contentId,appName){var options={size:"small",buttons:{}};$("#continueInEnglish").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn").click(function(){$(".modal-description").dialog("close");$("#continueInEnglish").hide();$(".modal-description").dialog("destroy");$("#continueInEnglish a").unbind("click")});$("#continueInEnglish a").click(function(){var redirectLink;redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href=";redirectLink=redirectLink+encodeURIComponent(link);$(".modal-description").dialog("close");$("#continueInEnglish").hide();$(".modal-description").dialog("destroy");redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked");var newWindow=window.open(redirectLink,"shopSafe","width=465,height=300,dependent=0,resizable=no,scrollbars=no");newWindow.focus();$("#continueInEnglish a").unbind("click")});return false}function OOLPopUpAD(link,contentId,appName){var options={size:"small",buttons:{}};$("#continueInEnglish").show();$("#"+contentId).boaModal(options);$("#cancel a,#cancelBtn,.ui-dialog-titlebar-close").live("click",function(){$("div.modal-description").dialog("close");$("#continueInEnglish").hide();$(".modal-description").dialog("destroy");$("#continueInEnglish a").unbind("click")});$("#continueInEnglish a").click(function(){var redirectLink="/myaccounts/interstitial/mlinterstitial.go?src=redir&href="+encodeURIComponent(link);$(".modal-description").dialog("close");$("#continueInEnglish").hide();$(".modal-description").dialog("destroy");if(appName=="overview"||appName=="offers"||appName=="coupons"||appName=="PIPADAO"||appName=="ADMIN_PAYMENTS"){redirectLink=redirectLink+"&OOLSuppVal="+$("#OOLSuppression").attr("checked")}if(appName=="coupons"){window.open(redirectLink)}else{window.location=redirectLink}$("#continueInEnglish a").unbind("click")});return false}$(document).ready(function(){if($(".ad-modal-module .loading-skin").length>0||$(".ad-modal-module .select-acct").length>0){$("a.card-replacement").click(function(){if(!$(this).hasClass("force-visited")){$(this).addClass("force-visited")}var options={width:"700"};if(cardUpgradeFlag){$("#card-replacement-unavail").boaFlexModal(options)}else{var postTarget=$(this).attr("rel");$.ajax({type:"POST",async:true,url:postTarget,beforeSend:function(xhr){$("#loading-content").boaFlexModal(options)},success:function(data){if($("body").find("#card-replacement-scrollmodal").length>0){$("body #card-replacement-scrollmodal").remove()}$("#eligibility-response").html(dynamicScrollContent(data));$("#loading-content").dialog("close");$("#eligibility-response").boaFlexModal(options);if(navigator.appVersion.toLowerCase().indexOf("ie 10")!==-1){$("#oo_bar").css("bottom","15px !important")}},error:function(data){$("#loading-content").dialog("close");$("#ajax-fail-modal").boaFlexModal(options);if(typeof cmCreatePageviewTag=="function"){cmCreatePageviewTag("OLB:Content:AcctDetails:Card;InfoSvcs_Error",null,null,"OLB:Content:AcctDetails:Card",false,false,null,false,false,null,null,null,null,cmPageViewSessionIDForConf,null,null,null,null,null,null,null)}},complete:function(data){if(typeof cX=="function"){cX("onload")}var cmView="";if($("#response-container").length>0){if($("#response-container").find("div.service-failure").length>0){cmView="OLB:Content:AcctDetails:Card;InfoSvcs_Error"}else{if($("#response-container").find("p.head-text").length>0){cmView="OLB:Content:AcctDetails:Card;InfoSvcs_Card_Replace_No_Eligible_Accts_Modal"}else{if($("#response-container").find("#scroll-cardreplace input:radio").length>0){cmView="OLB:Content:AcctDetails:Card;InfoSvcs_Card_Replace_AD_Acct_Select_Modal"}else{if($("#response-container").find("span.one-eligible-acct").length>0){cmView="OLB:Content:AcctDetails:Card;InfoSvcs_Card_Replace_Select_Account"}}}}}if(typeof cmCreatePageviewTag=="function"&&cmView.length>0){cmCreatePageviewTag(cmView,null,null,"OLB:Content:AcctDetails:Card",false,false,null,false,false,null,null,null,null,cmPageViewSessionIDForConf,null,null,null,null,null,null,null)}}})}function dynamicScrollContent(input){var _cardData='<div id="card-replacement-scrollmodal" class="hide">'+input+"</div>",op="";$("body").append(_cardData);if($(_cardData).find("#scroll-cardreplace").length>0){var eligibileLen=$(_cardData).find("#scroll-cardreplace").find("input:radio").length;var ineligibleLen=$(_cardData).find("div.back-fix").find("div").length;if(eligibileLen+ineligibleLen>10){$("body").find("#card-replacement-scrollmodal").find("#scroll-cardreplace").addClass("scroll-dozen-accounts");op=$("body").find("#card-replacement-scrollmodal").html()}else{$("body").find("#card-replacement-scrollmodal").find("#scroll-cardreplace").removeClass("scroll-dozen-accounts");op=$("body").find("#card-replacement-scrollmodal").html()}return op}else{return input}}});$("#modal_cancel,.ui-dialog-titlebar-close").live("click",function(){var eligibilityModal=$("div.eligibility-modal").dialog();$(eligibilityModal).dialog("close");if(cG7!==undefined&&cG7!==null&&cG7!==""){cG7.cM0[cm_ClientID]="OLB:Content:AcctDetails:Card;InfoSvcs"}});$("input[name=accounts]").live("click",function(){var id=$(this).attr("id");var acctName=$("label[for="+id+"]").html().replace(/ /,"_").toLowerCase();if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,"eligible_account"+acctName,passedPageID)}});$("#order_cards").live("click",function(){var _sendadx="";if($("#response-container").find("#scroll-cardreplace input:radio").length>0){_sendadx=$("input:checked").val()}else{_sendadx=$("span.one-eligible-acct").length>0?$("span.one-eligible-acct").attr("id").replace(/id_/,""):""}$("input[name=adx]").val(_sendadx);$("#form1").submit()});$("#card-replacement-unavail .ok-btn").live("click",function(){$("#card-replacement-unavail").dialog("close")})}});$(document).ready(function(){if($(".ad-transaction-module").length>0||$(".ad-transaction-module-card-skin").length>0){var assetPathNew;if(typeof assetPath==="undefined"){var assetPathNew="/pa/components/modules/ad-transaction-module/1.4"}else{assetPathNew=assetPath}if($("html").attr("lang").toLowerCase()==="es-us"){$(".icon-legend-result, .icon-legend-res").css("background-image",'url("'+assetPathNew+'/graphic/toggle-layer-spanish.png")')}if($("html").attr("lang").toLowerCase()==="en-us"){$(".icon-legend-result, .icon-legend-res").css("background-image",'url("'+assetPathNew+'/graphic/toggle-layer-english.png")')}var dealValTop,dealValBtm;var dealState=false;var dealsOnOffFlag="";var iconLegendMenuTop="";var iconLegendMenuBtm="";var iconTriggerTop="";var iconTriggerBtm="";var topOpenState="closed";var bottomOpenState="closed";if(typeof dealStatus==="undefined"){dealState=false;dealValTop="deals-off";dealValBtm="deals-off-new"}else{dealState=dealStatus;if(dealStatus==true){dealValTop="deals-on";dealValBtm="deals-on-new"}else{dealValTop="deals-off";dealValBtm="deals-off-new"}}if($(".icon-legend-container").length>0){iconTriggerTop=$(".icon-legend-link");iconLegendMenuTop=$(".icon-legend");function expandCollapseIconLegend(){if($(iconLegendMenuTop).hasClass("hide")){if(($("#icon-legend-download").length>0)&&(!($("#icon-legend-download").hasClass("hide")))){$(".icon-legend-download").addClass("hide");$(".ada-download").text("Expand ")}$("div.deals-pls-wait.top").addClass("hide");$(".icon-legend .err-msg").addClass("hide");$(iconLegendMenuTop).removeClass("hide");$(".upper-link").addClass("invisible");if($('html[lang="es-US"]').length&&$(".ad-transaction-module-card-skin").length==0){$(".icon-legend-result").width($(".icon-legend-result .deal-class").width()+9)}else{$(".icon-legend-result").width($(".icon-legend-result .deal-class").width())}$("#"+dealValTop).attr("checked","true");topOpenState="open";$(".ad-transaction-module .left-links-btm").removeClass("rel")}else{$(".icon-legend-container").removeAttr("style");$(iconLegendMenuTop).addClass("hide");$(".upper-link").removeClass("invisible");topOpenState="closed";$(".ad-transaction-module .left-links-btm").addClass("rel")}}$(iconTriggerTop).click(function(){if($(".prev-next-btm").hasClass("IEfixPosRel")){$(".prev-next-btm").removeClass("IEfixPosRel")}if($(".ad-transaction-module .transaction-links .left-links").length>0){$(".ad-transaction-module .transaction-links .left-links").addClass("rel")}expandCollapseIconLegend();$(".icon-legend-cont").removeAttr("style");$(iconLegendMenuBtm).addClass("hide");$(".bottom-link").removeClass("invisible");bottomOpenState="closed";var iconTriggerTopPassName=$(this).attr("name")+"_deals_"+$("#legend_deals_state_top").text().toLowerCase();if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,iconTriggerTopPassName,passedPageID)}})}if($(".icon-legend-cont").length>0){iconTriggerBtm=$(".icon-link");iconLegendMenuBtm=$(".icon-legend-new");function expCollIconLegend(){if($(iconLegendMenuBtm).hasClass("hide")){$("div.deals-pls-wait.bottom").addClass("hide");$(".icon-legend-new .err-msg").addClass("hide");$(iconLegendMenuBtm).removeClass("hide");$(".bottom-link").addClass("invisible");if($('html[lang="es-US"]').length&&$(".ad-transaction-module-card-skin").length==0){$(".icon-legend-res").width($(".icon-legend-res .deal-class").width()+9)}else{$(".icon-legend-res").width($(".icon-legend-res .deal-class").width())}$("#"+dealValBtm).attr("checked","true");bottomOpenState="open";$(".ad-transaction-module .left-links-btm").removeClass("rel")}else{$(".icon-legend-cont").removeAttr("style");$(iconLegendMenuBtm).addClass("hide");$(".bottom-link").removeClass("invisible");bottomOpenState="closed";$(".ad-transaction-module .left-links-btm").addClass("rel")}}$(iconTriggerBtm).click(function(){expCollIconLegend();$(".icon-legend-container").removeAttr("style");$(iconLegendMenuTop).addClass("hide");$(".upper-link").removeClass("invisible");topOpenState="closed";if($(".ad-transaction-module-card-skin .prev-next-btm").length>0){$(".ad-transaction-module-card-skin .prev-next-btm").toggleClass("IEfixPosRel")}if($(".ad-transaction-module .transaction-links .left-links-btm").length>0){$(".ad-transaction-module .transaction-links .left-links-btm").addClass("rel")}var iconTriggerBtmPassName=$(this).attr("name")+"_deals_"+$("#legend_deals_state_btm").text().toLowerCase();if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,iconTriggerBtmPassName,passedPageID)}})}function dealsRadioCheck(dealTrue,dealFalse){$("input:radio[id="+dealTrue+"]").attr("checked",true);$("input:radio[id="+dealFalse+"]").attr("checked",false)}function resetDealsRadio(deal){if(deal===true){dealsRadioCheck("deals-on","deals-off");dealsRadioCheck("deals-on-new","deals-off-new")}else{dealsRadioCheck("deals-off","deals-on");dealsRadioCheck("deals-off-new","deals-on-new")}}if(dealsOnTxt.search("iacute")!=-1){dealsOnTxt=dealsOnTxt.replace(/&iacute;/g,"\xED")}function resetDealsValue(deal){if(deal===false){$("#deals_state_btm").text(dealsOnTxt);$("#deals_state_top").text(dealsOnTxt);$("#legend_deals_state_btm").text(dealsOnTxt);$("#legend_deals_state_top").text(dealsOnTxt);if($("#outage_adc_activity").length>0){$("#outage_adc_activity").removeClass("hide")}}else{$("#deals_state_btm").text(dealsOffTxt);$("#deals_state_top").text(dealsOffTxt);$("#legend_deals_state_btm").text(dealsOffTxt);$("#legend_deals_state_top").text(dealsOffTxt);if($("#outage_adc_activity").length>0){$("#outage_adc_activity").addClass("hide")}}}$("body").click(function(e){if(!$(e.target).parents("div").hasClass("icon-legend")&&!$(e.target).hasClass("icon-legend")&&!$(e.target).parents("div").hasClass("icon-legend-container")&&!$(e.target).hasClass("icon-legend-container")&&!$(e.target).parents("div").hasClass("icon-legend-new")&&!$(e.target).hasClass("icon-legend-new")&&!$(e.target).parents("div").hasClass("icon-legend-cont")&&!$(e.target).hasClass("icon-legend-cont")){$(".icon-legend").addClass("hide");$(".icon-legend .err-msg").addClass("hide");$(".icon-legend-container").removeAttr("style");$(".icon-legend-new").addClass("hide");$(".icon-legend-new .err-msg").addClass("hide");$(".icon-legend-cont").removeAttr("style");$(".upper-link").removeClass("invisible");$(".bottom-link").removeClass("invisible");topOpenState="closed";bottomOpenState="closed";resetDealsRadio(dealState);if($(".ad-transaction-module-card-skin .prev-next-btm").length>0){if($(".ad-transaction-module-card-skin .prev-next-btm").hasClass("IEfixPosRel")){$(".ad-transaction-module-card-skin .prev-next-btm").removeClass("IEfixPosRel")}}if($(".ad-transaction-module .transaction-links .left-links").length>0){if($(".ad-transaction-module .transaction-links .left-links").hasClass("rel")){$(".ad-transaction-module .transaction-links .left-links").removeClass("rel")}}}});if(typeof oboUsr==="undefined"){var oboUserFlag=false}else{var oboUserFlag=oboUsr}$(".save").click(function(){var dealValueTop=$("input[name=deals]:radio:checked").val();var dealIdTop=$("input[name=deals]:radio:checked").attr("id");var cardModShowHideActionURI=$(this).attr("rel");var topNamePass=$(this).attr("name");$("div.deals-pls-wait.top").addClass("hide");$(".icon-legend .err-msg").addClass("hide");if($("input:radio[id=deals-on]").is(":checked")===true){dealsOnOffFlag="true";topNamePass+="_show_deals_on"}else{if($("input:radio[id=deals-off]").is(":checked")===true){dealsOnOffFlag="false";topNamePass+="_show_deals_off"}}if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,topNamePass,passedPageID)}cardModShowHideActionURI=cardModShowHideActionURI+"?dealsOnOffFlag="+dealsOnOffFlag;if(dealValTop!=dealIdTop){if(oboUserFlag!==true){$.ajax({url:cardModShowHideActionURI,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){$("div.deals-pls-wait.top").removeClass("hide")},error:function(textStatus){if(dealState){$("#top_red_err").html(dealsOffErr)}else{$("#top_red_err").html(dealsOnErr)}$(".icon-legend .err-msg").removeClass("hide");resetDealsRadio(dealState);$(".icon-legend .err-msg").attr("role","region").attr("aria-live","rude").focus()},success:function(data){if(data.dynamicTargetedOffersUpdate.updateProgramDataResult.toString()==="false"){if(dealState){$("#top_red_err").html(dealsOffErr)}else{$("#top_red_err").html(dealsOnErr)}$(".icon-legend .err-msg").removeClass("hide");resetDealsRadio(dealState);$(".icon-legend .err-msg").attr("role","region").attr("aria-live","rude").focus()}else{if(data.dynamicTargetedOffersUpdate.updateProgramDataResult.toString()==="true"){if($(".cardlytics-transaction-offer").length>0){$(".cardlytics-transaction-offer").each(function(){if(dealState){$(this).addClass("hide");$(".cardlytics-flyout").parent(".ui-dialog.ui-widget").hide()}else{$(this).removeClass("hide")}});$(".open .cardlytics-transaction-offer").addClass("hide")}if($(".transaction-records .record-offer").length>0){$(".transaction-records .record-offer").each(function(){if($(this).children(".description").children("div.cardlytics-transaction-offer").length>0){if($(this).hasClass("hide")){$(this).removeClass("hide")}else{$(this).addClass("hide")}}})}$(iconLegendMenuTop).addClass("hide");$(".upper-link").removeClass("invisible");$(".icon-legend-container").removeAttr("style");resetDealsValue(dealState);if(dealState){offersShow=false;dealState=false;dealValTop="deals-off";dealValBtm="deals-off-new"}else{offersShow=true;dealState=true;dealValTop="deals-on";dealValBtm="deals-on-new"}$(".icon-legend .err-msg").addClass("hide")}}},complete:function(textStatus){$("div.deals-pls-wait.top").addClass("hide")}})}else{$(iconLegendMenuTop).addClass("hide");$(".upper-link").removeClass("invisible");$(".icon-legend-container").removeAttr("style")}}else{$(iconLegendMenuTop).addClass("hide");$(".upper-link").removeClass("invisible");$(".icon-legend .err-msg").addClass("hide");$(".icon-legend-container").removeAttr("style")}});$(".save-new").click(function(){var dealValueBtm=$("input[name=deals-new]:radio:checked").val();var dealIdBtm=$("input[name=deals-new]:radio:checked").attr("id");var cardModShowHideActionURI=$(this).attr("rel");var btmNamePass=$(this).attr("name");$("div.deals-pls-wait.bottom").addClass("hide");$(".icon-legend-new .err-msg").addClass("hide");if($("input:radio[id=deals-on-new]").is(":checked")===true){dealsOnOffFlag="true";btmNamePass+="_show_deals_on"}else{if($("input:radio[id=deals-off-new]").is(":checked")===true){dealsOnOffFlag="false";btmNamePass+="_show_deals_off"}}if(typeof cmCreateManualLinkClickTag=="function"&&typeof passedPageID!=="undefined"){cmCreateManualLinkClickTag(window.location.href,btmNamePass,passedPageID)}cardModShowHideActionURI=cardModShowHideActionURI+"?dealsOnOffFlag="+dealsOnOffFlag;if(dealValBtm!=dealIdBtm){if(oboUserFlag!==true){$.ajax({url:cardModShowHideActionURI,type:"POST",dataType:"json",crossDomain:false,cache:false,timeout:2000,async:false,beforeSend:function(){$("div.deals-pls-wait.bottom").removeClass("hide")},error:function(textStatus){if(dealState){$("#btm_red_err").html(dealsOffErr)}else{$("#btm_red_err").html(dealsOnErr)}$(".icon-legend-new .err-msg").removeClass("hide");resetDealsRadio(dealState);$("#btm_red_err").attr("role","region").attr("aria-live","rude").focus()},success:function(data){if(data.dynamicTargetedOffersUpdate.updateProgramDataResult.toString()==="false"){if(dealState){$("#btm_red_err").html(dealsOffErr)}else{$("#btm_red_err").html(dealsOnErr)}$(".icon-legend-new .err-msg").removeClass("hide");resetDealsRadio(dealState);$("#btm_red_err").attr("role","region").attr("aria-live","rude").focus()}else{if(data.dynamicTargetedOffersUpdate.updateProgramDataResult.toString()==="true"){if($(".cardlytics-transaction-offer").length>0){$(".cardlytics-transaction-offer").each(function(){if($(this).hasClass("hide")){$(this).removeClass("hide")}else{$(this).addClass("hide")}})}if($(".transaction-records .record-offer").length>0){$(".transaction-records .record-offer").each(function(){if($(this).children(".description").children("div.cardlytics-transaction-offer").length>0){if($(this).hasClass("hide")){$(this).removeClass("hide")}else{$(this).addClass("hide")}}})}$(iconLegendMenuBtm).addClass("hide");$(".bottom-link").removeClass("invisible");$(".icon-legend-cont").removeAttr("style");resetDealsValue(dealState);if(dealState){offersShow=false;dealState=false;dealValTop="deals-off";dealValBtm="deals-off-new"}else{offersShow=true;dealState=true;dealValTop="deals-on";dealValBtm="deals-on-new"}$(".icon-legend-new .err-msg").addClass("hide")}}},complete:function(textStatus){$("div.deals-pls-wait.bottom").addClass("hide")}})}else{$(iconLegendMenuBtm).addClass("hide");$(".bottom-link").removeClass("invisible");$(".icon-legend-cont").removeAttr("style")}}else{$(iconLegendMenuBtm).addClass("hide");$(".bottom-link").removeClass("invisible");$(".icon-legend-new .err-msg").addClass("hide");$(".icon-legend-cont").removeAttr("style")}})}});$(document).ready(function(){$("body").click(function(e){if(!$(e.target).parents("div").hasClass("icon-legend-download")&&!$(e.target).hasClass("icon-legend-download")&&!$(e.target).hasClass("download-bottom")&&!$(e.target).parents("div").hasClass("icon-legend-container")&&!$(e.target).hasClass("icon-legend-container")){$(".icon-legend-download").addClass("hide");$(".icon-legend-download .err-msg").addClass("hide")}});$(".ad-transaction-module-card-skin .download-upper").live("click",function(){if($(".icon-legend-download").hasClass("hide")){if(($(".icon-legend").length>0)&&(!($(".icon-legend").hasClass("hide")))){$(".icon-legend-container").removeAttr("style");$(".icon-legend").addClass("hide");$(".upper-link").removeClass("invisible");topOpenState="closed"}$(".label-file").removeClass("red");$(".icon-legend-download").removeClass("hide")}else{$(".icon-legend-download").addClass("hide");$(".icon-legend-download .err-msg").addClass("hide")}});$(".ad-transaction-module-card-skin .download-bottom").live("click",function(){if($(".icon-legend-download").hasClass("hide")){if(($(".icon-legend").length>0)&&(!($(".icon-legend").hasClass("hide")))){$(".icon-legend-container").removeAttr("style");$(".icon-legend").addClass("hide");$(".upper-link").removeClass("invisible");topOpenState="closed"}$(".icon-legend-download").removeClass("hide");window.location="#icon-legend-download"}else{$(".icon-legend-download").addClass("hide")}});$(".ad-transaction-module-card-skin .close-dcont").live("click",function(){$(".icon-legend-download").addClass("hide")});window.firstBodyClick=true;window.listItemClickedState=false;$(".submit-download").unbind("click");$(".submit-download").live("click",function(){if($("#select_filetype").val()=="select_file_type"){$(".icon-legend-download .err-msg").removeClass("hide");$(".label-file").addClass("red")}else{var transPeriodRel=$("#select_transaction").val();var fileTypeRel=$("#select_filetype").val();var downloadUrl=transPeriodRel+fileTypeRel;window.location=downloadUrl;$(".icon-legend-download .err-msg").addClass("hide");$(".icon-legend-download").addClass("hide");$(".label-file").removeClass("red")}});$("#select_transaction,#select_filetype").change(function(e){var cmName=$(this).find("option:selected").attr("name");if(typeof window.cmCreateManualLinkClickTag=="function"){cmCreateManualLinkClickTag(window.location.href,cmName,passedPageID)}})});function setupMarketingAdLogging(id){if($("#"+id).length>0){var ad=$("#"+id).html();if(ad.indexOf("createBOAOnClickBE")>0){return}var MetketingAdADT=findADT(ad);$("#"+id).click(function(){logEvent(MarketingAdLoggingLink,MetketingAdADT)});logEvent(MarketingAdLoggingLink+"&eventType=impression",MetketingAdADT)}else{return false}}function findADT(link){var adLink="";if(link.indexOf("adlink")>0){var start=link.indexOf("adlink")+7;var end=link.length;adLink=link.substring(start,end);var breakId=adLink.length;if(adLink.indexOf("&")>0){breakId=adLink.indexOf("&");adLink=adLink.substring(0,breakId)}if(adLink.indexOf('"')>0){breakId=adLink.indexOf('"');adLink=adLink.substring(0,breakId)}if(adLink.indexOf(" ")>0){breakId=adLink.indexOf(" ");adLink=adLink.substring(0,breakId)}}return adLink}function logEvent(eventUrl,ADT){if(eventUrl!=""){if(eventUrl.indexOf("?")>0){eventUrl=eventUrl+"&"}else{eventUrl=eventUrl+"?"}eventUrl=eventUrl+"ADT="+ADT;$.post(eventUrl)}}function createBOAOnClickTargetSelfBE(ADT,mboxName,offerCode,href){var newEventUrl="";var eventType="click";if(isBusinessEventEnabled!=undefined&&isBusinessEventEnabled==true){if(eventUrl!=""){if(eventUrl.indexOf("?")>0){newEventUrl=eventUrl+"&"}else{newEventUrl=eventUrl+"?"}newEventUrl=newEventUrl+"ADT="+ADT+"&mboxName="+mboxName+"&eventType="+eventType+"&offerCode="+offerCode;$.ajax({url:newEventUrl,type:"POST",timeout:5000,complete:function(XMLHttpRequest,textStatus,errorThrown){if(href!=undefined){window.location=href}else{window.location=document.getElementById("eclo-tola").getAttribute("href")}}})}}}$(document).ready(function(){var $globalMessagingModuleErrorSkin=$(".ad-message-module .page-error-skin");if($globalMessagingModuleErrorSkin.length>0){$(".error-text",$globalMessagingModuleErrorSkin).each(function(){$(this).css("width",$(this).closest(".ad-message-module .page-error-skin").width()-60).boaVertAlign()})}});window.boa=window.boa||{};window.boa.feedback=window.boa.feedback||{};window.boa.feedback.setup=function(message,language){if(!OOo||!OOo.Ocode){return false}var config={bar:{caption:message},customVariables:{sid:OOo.readCookie("SID")},disableNoniOS:true,disableMobile:false};if(language==="es-us"){config.referrerRewrite={searchPattern:/:\/\//g,replacePattern:"://es-us."}}window.oo_bar=new OOo.Ocode(config)};(function(b,a){if(("disabled"==="enabled")&&(typeof define==="function")&&define.amd){define([],a)}else{b.OOo=a()}}(this,function(){window.OOo={__detectBrowser:function(b){var a=Object.prototype.toString.call(window.opera)==="[object Opera]",c=b.indexOf("MSIE ")>-1||b.indexOf("Trident/")>-1,d={IE:!!c,MSEdge:b.indexOf("Edge/")>-1,Opera:a,WebKit:b.indexOf("AppleWebKit/")>-1,Chrome:b.indexOf("Chrome")>-1&&b.indexOf("Edge/")===-1,Gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile.*Safari/.test(b),iOs:b.indexOf("iPad")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPod")>-1,iOS67:b.search(/OS 6(.*)|7(.*) like Mac OS/i)>-1,BlackBerry:b.indexOf("BlackBerry")>-1,Fennec:b.indexOf("Fennec")>-1,IEMobile:b.indexOf("IEMobile")>-1,WindowsPhone:b.toLowerCase().indexOf("windows phone")>-1,WindowsTablet:b.toLowerCase().indexOf("windows nt")>-1&&b.toLowerCase().indexOf("touch")>-1,OperaMobile:b.search(/Opera (?:Mobi|Mini)/)>-1,Kindle:b.search(/[ ](Kindle|Silk)/)>-1,isChromeIOS:/crios/i.test(b),ua:b,Android:/Android/.test(b),facebookWebview:/FBAV/.test(b),googleWebview:/GSA/.test(b),AndroidChromiumWebview:/Chrome\/.* Mobile/.test(b),iOsWebview:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(b)},e=false;d.isMobile=(d.MobileSafari||d.BlackBerry||d.Fennec||d.IEMobile||d.OperaMobile||d.Kindle||d.iOs||d.Android||d.WindowsPhone||d.WindowsTablet||d.AndroidChromiumWebview||d.iOsWebview||d.facebookWebview||d.googleWebview);d.isMobileNonIOS=(d.isMobile&&!d.iOs);return d}};OOo.Browser=OOo.__detectBrowser(navigator.userAgent);OOo.Cache={};OOo.instanceCount=0;OOo.K=function(){};var E=E||OOo;(function(){function x(b){return document.getElementById(b)}function y(b,a){var c;for(c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}return b}function u(b,a,c,d){if(b.addEventListener){b.addEventListener(a,c,d)}else{if(b.attachEvent){b.attachEvent("on"+a,c)}}}function w(b,a,c,d){if(b.removeEventListener){b.removeEventListener(a,c,d)}else{if(b.detachEvent){b.detachEvent("on"+a,c)}}}function z(b){var a=[],c;for(c in b){if(b.hasOwnProperty(c)){a.push(c+"="+(encodeURIComponent(b[c])||""))}}return a.join("&")}function A(b){var a=z(b.metrics),c=b.tealeafId+"|"+b.clickTalePID+"/"+b.clickTaleUID+"/"+b.clickTaleSID;a+="&custom_var="+OOo.createLegacyVars(b.legacyVariables,c);if(b.metrics.type==="OnPage"){a+="|iframe"}if(b.asm){a+="&asm=2"}a+="&_rev=2";if(b.customVariables){a+="&customVars="+encodeURIComponent(OOo.serialize(b.customVariables))}return a}function C(b,a){var c=document,d=c.createElement("form"),e=c.createElement("input"),g=b.referrerRewrite;b.metrics.referer=location.href;if(g){b.metrics.referer=OOo.referrerRewrite(g)}d.style.display="none";d.method="post";d.target=a||"OnlineOpinion";d.action=b.onPageCard?"https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp?r="+location.href:"https://secure.opinionlab.com/ccc01/comment_card_d.asp";if(b.commentCardUrl){d.action=b.commentCardUrl;if(b.onPageCard){d.action+="?r="+location.href}}e.name="params";e.value=A(b);d.appendChild(e);c.body.appendChild(d);return d}function B(){return{width:screen.width,height:screen.height,referer:location.href,prev:document.referrer,time1:(new Date()).getTime(),time2:null,currentURL:location.href,ocodeVersion:"5.9.9"}}function F(b){var a="";if(b&&b.search("://")>-1){var c=b.split("/");for(var d=3;d<c.length;d++){a+="/";a+=c[d]}}return a}function G(b,a){b=b||{};if(typeof b==="string"){return a+"|"+b}return b.override?b.vars:a+(b.vars?"|"+b.vars:"")}function H(b,a){if(!a){a=location}if(typeof b==="string"){return b}return b.searchPattern?a.href.replace(b.searchPattern,b.replacePattern):b.replacePattern}function T(b){var a,c=false,d=document.getElementsByTagName("meta");if(d!=="undefined"){for(a=0;a<d.length;a+=1){if(d[a].getAttribute("name")===b){c=true}}}return c}var I=(function(){if(navigator.appName==="Microsoft Internet Explorer"&&navigator.userAgent.search("MSIE 6")!==-1){return true}var b=document.body,a,c;if(document.createElement&&b&&b.appendChild&&b.removeChild){a=document.createElement("iframe");c=false;a.setAttribute("name","oo_test");a.style.display="none";b.appendChild(a);c=!!!document.getElementsByName("oo_test")[0];b.removeChild(a);return c}else{return null}}());function J(b,a){var c=b||window.event,d=OOo.$("oo_waypoint_content"),e=OOo.$("oo_waypoint_company_logo"),g=OOo.$("oo_waypoint_close_prompt"),h=c.target;if(c.srcElement&&!c.target){h=c.srcElement}if(c.preventDefault&&c.stopPropagation){c.preventDefault();c.stopPropagation()}else{c.returnValue=false}if((h!==d&&!d.contains(h))&&(h!==e&&!e.contains(h))||(h.className==="waypoint_icon"||h.className==="waypoint_icon last")){var f=OOo.$("oo_waypoint_container"),l=f.parentNode;l.removeChild(f)}if(a){a.focus()}}function K(){var b=this.options;var a="<div id='oo_waypoint_prompt' role='dialogue' aria-describedby='oo_waypoint_message'><div id='oo_waypoint_company_logo'></div><div id='oo_waypoint_content'><p id='oo_waypoint_message'>Select a category</p><p id='waypoint_icons'></p><p id='ol_waypoint_brand_logo'><span aria-label='Powered by OpinionLab.'></span></p></div><a id='oo_waypoint_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialogue</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->";if(typeof b.wpmarkup!=="undefined"){a=b.wpmarkup}var c=OOo.$("oo_waypoint_prompt");if(c){var d=OOo.$("oo_waypoint_container");this.showWaypoint(d);return}this.showWaypoint(a)}function L(d){var e=document,g=0,h=typeof d==="string"?e.createElement("div"):d,f=e.createElement("div"),l,j,m,i,k=this.options,o=k.categories,n,p,q=e.activeElement,t;f.id="oo_waypoint_overlay";h.id="oo_waypoint_container";h.style.visibility="hidden";if(typeof d==="string"){h.innerHTML=d;e.body.appendChild(h)}h.appendChild(f);if(k.companyLogo&&k.companySlogan){l=new Image();l.src=k.companyLogo;l.alt=k.companySlogan;OOo.$("oo_waypoint_company_logo").appendChild(l);OOo.$("oo_waypoint_prompt").setAttribute("aria-label",k.companySlogan)}m=new Image();m.src=k.pathToAssets+"oo_opinionlab_logo.png";m.alt="powered by OpinionLab";OOo.$("ol_waypoint_brand_logo").children[0].appendChild(m);n=OOo.$("oo_waypoint_close_prompt");for(var r in o){if(o.hasOwnProperty(r)){var s=document.createElement("a"),v=k.categories[r].icon,D=k.categories[r].buttonText;s.className="waypoint_icon";s.href="#";s.innerHTML=D+'<span class="screen_reader">This will open a new window</span>';if(v&&e.addEventListener){s.style.backgroundImage="url("+k.pathToAssets+v+")"}if(typeof k.categories[r].oCode==="string"){OOo.addEventListener(s,"click",(function(c){return function(b){var a=b||window.event;window.open(k.categories[c].oCode,"_0","scrollbars=yes,location=yes,menubar=yes,resizable=yes");OOo.hideWaypoint(a,q)}})(r),false);s.onkeydown=(function(c){return function(b){var a=b||window.event;if(a.keyCode!==13){return}window.open(k.categories[c].oCode,"_0","scrollbars=yes,location=yes,menubar=yes,resizable=yes");OOo.hideWaypoint(a,q)}})(r)}else{OOo.addEventListener(s,"click",(function(c){return function(b){var a=b||window.event;OOo.Waypoint[c].show(a);OOo.hideWaypoint(a,q)}})(r),false);s.onkeydown=(function(c){return function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.Waypoint[c].show(a);OOo.hideWaypoint(a,q)}})(r)}g++;OOo.$("waypoint_icons").appendChild(s)}}OOo.addEventListener(h,"click",function(b){var a=b||window.event;OOo.hideWaypoint(a,q)},false);i=OOo.$("waypoint_icons").children;p=i[0];p.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(a.shiftKey){n.focus();return false}}};n.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.hideWaypoint(a,q)};n.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(!a.shiftKey){p.focus();return false}}};i[g-1].className="waypoint_icon last";h.style.visibility="visible";h.style.display="block";f.className="no_loading";if(k.linkFocus===true){p.focus()}}function M(b,a){var c=b||window.event;if(c.preventDefault&&c.stopPropagation){c.preventDefault();c.stopPropagation()}else{c.returnValue=false}OOo.$("oo_container").style.display="none";if(a){a.focus()}}function N(){var b="<div id='oo_invitation_prompt' role='dialog' aria-describedby='oo_invite_message'><div id='oo_invitation_company_logo'></div><div id='oo_invite_content'><p id='oo_invite_message'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class='prompt_button'><a href='#' id='oo_launch_prompt'>Yes<span class='screen_reader'>This will open a new window</span></a></p><p class='prompt_button'><a href='#' id='oo_no_thanks'>No Thanks</a></p><p id='ol_invitation_brand_logo'><span aria-label='Powered by OpinionLab.'></span></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialog</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->";var a=this.options;if(typeof a.inviteMarkup!=="undefined"){b=a.inviteMarkup}else{if(typeof a.events.prompt.promptMarkup){b=a.events.prompt.promptMarkup}}var c=OOo.$("oo_invitation_prompt");if(c){var d=OOo.$("oo_container");this.showPrompt(d);return}this.showPrompt(b)}function O(c,d){var e=document,g=typeof c==="string"?e.createElement("div"):c,h=e.createElement("div"),f,l,j,m,i=this.options,k,o,n,p,q=e.activeElement;h.id="oo_invitation_overlay";g.id="oo_container";g.style.visibility="hidden";if(typeof c==="string"){g.innerHTML=c;e.body.appendChild(g)}g.appendChild(h);k=OOo.$("oo_launch_prompt");o=OOo.$("oo_no_thanks");n=OOo.$("oo_close_prompt");p=OOo.$("oo_invitation_company_logo");if(i.companyLogo&&i.companySlogan){f=new Image();f.src=i.companyLogo;f.alt=i.companySlogan;p.appendChild(f);OOo.$("oo_invitation_prompt").setAttribute("aria-label",i.companySlogan)}else{if(i.events.prompt.companyLogo&&i.events.prompt.companySlogan){f=new Image();f.src=i.events.prompt.companyLogo;f.alt=i.events.prompt.companySlogan;p.appendChild(f);OOo.$("oo_invitation_prompt").setAttribute("aria-label",i.events.prompt.companySlogan)}}j=new Image();j.src=i.pathToAssets+"oo_opinionlab_logo.png";j.alt="powered by OpinionLab";OOo.$("ol_invitation_brand_logo").children[0].appendChild(j);if(i.callBacks){if(typeof i.callBacks.prompt==="function"){i.callBacks.prompt()}if(typeof i.callBacks.yesClick==="function"){OOo.addEventListener(k,"click",function(){i.callBacks.yesClick()},false)}if(typeof i.callBacks.noClick==="function"){OOo.addEventListener(o,"click",function(){i.callBacks.noClick()},false)}if(typeof i.callBacks.closeClick==="function"){OOo.addEventListener(n,"click",function(){i.callBacks.closeClick()},false)}}OOo.addEventListener(k,"click",d.bind(this),false);OOo.addEventListener(o,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,q)},false);OOo.addEventListener(n,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,q)},false);k.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}d.bind(this)}.bind(this);k.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(a.shiftKey){n.focus();return false}}};o.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.hidePrompt(a,q)};n.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.hidePrompt(a,q)};n.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(!a.shiftKey){k.focus();return false}}};g.style.visibility="visible";g.style.display="block";h.className="no_loading";q.blur();k.focus()}function P(){var b="<div id='oo_entry_prompt' role='dialog' aria-describedby='oo_entry_message'><div id='oo_entry_company_logo'></div><div id='oo_entry_content'><p id='oo_entry_message'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class='entry_prompt_button'><a href='#' id='oo_launch_entry_prompt'>Yes<span class='screen_reader'>This will open a new window</span></a></p><p class='entry_prompt_button'><a href='#' id='oo_entry_no_thanks'>No Thanks</a></p><p id='ol_entry_brand_logo'><span aria-label='Powered by OpinionLab.'></span></p></div><a id='oo_entry_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialog</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_entry_prompt #oo_entry_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->";var a=this.options;if(typeof a.events.prompt.promptMarkup){b=a.events.prompt.promptMarkup}var c=OOo.$("oo_entry_prompt");if(c){var d=OOo.$("oo_container");this.showEntryPrompt(d);return}this.showEntryPrompt(b)}function Q(c,d){var e=document,g=typeof c==="string"?e.createElement("div"):c,h=e.createElement("div"),f,l,j,m,i=this.options,k,o,n,p,q=e.activeElement;h.id="oo_entry_overlay";g.id="oo_container";g.style.visibility="hidden";if(typeof c==="string"){g.innerHTML=c;e.body.appendChild(g)}g.appendChild(h);k=OOo.$("oo_launch_entry_prompt");o=OOo.$("oo_entry_no_thanks");n=OOo.$("oo_entry_close_prompt");p=OOo.$("oo_entry_company_logo");if(i.companyLogo&&i.companySlogan){f=new Image();f.src=i.companyLogo;f.alt=i.companySlogan;p.appendChild(f);OOo.$("oo_entry_prompt").setAttribute("aria-label",i.companySlogan)}else{if(i.events.prompt.companyLogo&&i.events.prompt.companySlogan){f=new Image();f.src=i.events.prompt.companyLogo;f.alt=i.events.prompt.companySlogan;p.appendChild(f);OOo.$("oo_entry_prompt").setAttribute("aria-label",i.events.prompt.companySlogan)}}j=new Image();j.src=i.pathToAssets+"oo_opinionlab_logo.png";j.alt="powered by OpinionLab";OOo.$("ol_entry_brand_logo").children[0].appendChild(j);OOo.addEventListener(k,"click",d.bind(this),false);OOo.addEventListener(o,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,q)},false);OOo.addEventListener(n,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,q)},false);k.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}d.bind(this)}.bind(this);k.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(a.shiftKey){n.focus();return false}}};o.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.hidePrompt(a,q)};n.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}OOo.hidePrompt(a,q)};n.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(!a.shiftKey){k.focus();return false}}};g.style.visibility="visible";g.style.display="block";h.className="no_loading";q.blur();k.focus()}var R=function(b,a,c,d){var e="width="+c;var g="height="+d;var h=window.open(b,a,e,g);var f=window.setInterval(function(){if(h.closed!==false){window.clearInterval(f);OOo.oo_feedback.launchOOPopup()}},200)};var S=function(){return/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10};y(OOo,{extend:y,toQueryString:z,addEventListener:u,$:x,appendOOForm:C,removeEventListener:w,createMetrics:B,truncateMetric:F,createLegacyVars:G,DYNAMIC_FRAME_NAME_IS_BUGGY:I,getFormParams:A,referrerRewrite:H,hidePrompt:M,getPrompt:N,showPrompt:O,hideWaypoint:J,getWaypoint:K,showWaypoint:L,getEntryPrompt:P,showEntryPrompt:Q,exitChat:R,checkIfIE9orBelow:S})}());(function(){function g(b){if(!b){return null}switch(typeof b){case"number":case"boolean":case"function":return b;case"string":return'"'+b+'"';case"object":var a,c,d,e;if(b.constructor===Array||typeof b.callee!=="undefined"){a="[";d=b.length;for(c=0;c<d-1;c+=1){a+=g(b[c])+","}a+=g(b[c])+"]"}else{a="{";for(e in b){if(b.hasOwnProperty(e)){a+=e+":"+g(b[e])+","}}a=a.replace(/\,$/,"")+"}"}return a;default:return null}}OOo.extend(OOo,{serialize:g})}());(function(){function e(b,a,c){var d;if(b.search(a[0])!==-1){OOo.createCookie(c,0);return false}else{if(OOo.readCookie(c)){d=parseInt(OOo.readCookie(c),10);if((b.search(a[d+1])!==-1)&&(d+1!==a.length-1)){OOo.createCookie(c,d+1);return false}else{if(b.search(a[d])!==-1){return false}else{if(d+1===a.length-1&&b.search(a.pop())!==-1){OOo.eraseCookie(c);return true}else{OOo.eraseCookie(c);return false}}}}else{return false}}}OOo.extend(OOo,{checkTunnel:e})}());(function(){function q(b){var a="",c;for(c=7;c>=0;c-=1){a+="0123456789abcdef".charAt((b>>(c*4))&15)}return a}function t(b){var a=((b.length+8)>>6)+1,c=new Array(a*16),d;for(d=0;d<a*16;d+=1){c[d]=0}for(d=0;d<b.length;d+=1){c[d>>2]|=b.charCodeAt(d)<<(24-(d%4)*8)}c[d>>2]|=128<<(24-(d%4)*8);c[a*16-1]=b.length*8;return c}function r(b,a){var c=(b&65535)+(a&65535),d=(b>>16)+(a>>16)+(c>>16);return(d<<16)|(c&65535)}function s(b,a){return(b<<a)|(b>>>(32-a))}function v(b,a,c,d){if(b<20){return(a&c)|((~a)&d)}if(b<40){return a^c^d}if(b<60){return(a&c)|(a&d)|(c&d)}return a^c^d}function D(b){return(b<20)?1518500249:(b<40)?1859775393:(b<60)?-1894007588:-899497514}function x(b){var a=t(b),c=new Array(80),d=1732584193,e=-271733879,g=-1732584194,h=271733878,f=-1009589776,l,j,m,i,k,o,n,p;for(n=0;n<a.length;n+=16){l=d;j=e;m=g;i=h;k=f;for(p=0;p<80;p+=1){if(p<16){c[p]=a[n+p]}else{c[p]=s(c[p-3]^c[p-8]^c[p-14]^c[p-16],1)}o=r(r(s(d,5),v(p,e,g,h)),r(r(f,c[p]),D(p)));f=h;h=g;g=s(e,30);e=d;d=o}d=r(d,l);e=r(e,j);g=r(g,m);h=r(h,i);f=r(f,k)}return q(d)+q(e)+q(g)+q(h)+q(f)}OOo.extend(OOo,{sha1:x})}());(function(){function f(b,a){if(!a){a=location}var c=b.cookieName||"oo_abandon",d=OOo.readCookie(c),e=b.startPage,g=b.endPage,h=b.middle;if(!d){if(a.pathname.indexOf(e)!==-1){OOo.createCookie(c)}return false}else{if(a.pathname.indexOf(g)!==-1){OOo.eraseCookie(c);return false}else{if(a.pathname.search(h)!==-1){return false}else{OOo.eraseCookie(c);return true}}}}OOo.extend(OOo,{checkAbandonment:f})}());(function(){function d(b){var a,c;for(a=b.length-1;a>=0;a-=1){if(b[a].read){c=OOo.readCookie(b[a].name);if(!!c&&c===b[a].value){return true}else{if(typeof b[a].value==="undefined"&&!!OOo.readCookie(b[a].name)){return true}}}}return false}function e(b){var a;for(a=b.length-1;a>=0;a-=1){if(b[a].set){OOo.createCookie(b[a].name,b[a].value,b[a].expiration)}}}OOo.extend(OOo,{checkThirdPartyCookies:d,setThirdPartyCookies:e})}());OOo.extend(Function.prototype,(function(){if(typeof Function.prototype.bind!=="undefined"){return}var e=Array.prototype.slice;function g(b,a){var c=b.length,d=a.length;while(d){d-=1;b[c+d]=a[d]}return b}function h(b,a){b=e.call(b,0);return g(b,a)}function f(a){if(arguments.length<2&&typeof a==="undefined"){return this}var c=this,d=e.call(arguments,1);return function(){var b=h(d,arguments);return c.apply(a,b)}}return{bind:f}}()));(function(){function g(b){if(!b){b=location}var a;if(b.host.search(/\.[a-z]+/)!==-1){a=b.host.split(".").reverse();if(a.length>3){return b.host}a="."+a[1]+"."+a[0]}else{a=b.host}return a}function h(b,a,c){var d="",e="";if(c){d=new Date();d.setTime(d.getTime()+(c*1000));e="; expires="+d.toGMTString()}if(location.host!==g()){document.cookie=b+"="+a+e+"; path=/; domain="+g()+";"}else{document.cookie=b+"="+a+e+"; path=/;"}}function f(b){var a=b+"=",c=document.cookie.split(";"),d,e;for(e=0;e<c.length;e+=1){d=c[e];while(d.charAt(0)===" "){d=d.substring(1,d.length)}if(d.indexOf(a)===0){return d.substring(a.length,d.length)}}return null}function l(b){h(b,"",-1)}OOo.extend(OOo,{getCookieDomain:g,createCookie:h,readCookie:f,eraseCookie:l})}());OOo.Ocode=function(b){var a=OOo.Browser,c,d;if(b.disableMobile&&a.isMobile){return}if(b.disableNoniOS&&a.isMobileNonIOS){return}OOo.instanceCount+=1;this.options={tealeafCookieName:"TLTSID"};OOo.extend(this.options,b);c=this.options;c.metrics=OOo.createMetrics();this.frameName=c.onPageCard?"OnlineOpinion"+OOo.instanceCount:"OnlineOpinion";if(c.cookie&&OOo.Ocode.matchUrl(c.cookie,location)){return}if(c.thirdPartyCookies&&OOo.checkThirdPartyCookies(c.thirdPartyCookies)){return}if(c.abandonment&&!OOo.checkAbandonment(c.abandonment)){return}if(c.tunnel&&!OOo.checkTunnel(location.pathname,c.tunnel.path,c.tunnel.cookieName)){return}if(c.events&&c.events.onSingleClick){this.singProbability=Math.random()<1-c.events.onSingleClick/100}c.tealeafId=OOo.readCookie(c.tealeafCookieName)||OOo.readCookie(c.sessionCookieName);if(c.events){this.setupEvents();if(c.events.disableLinks||c.events.disableFormElements){this.setupDisableElements()}}if(c.floating){this.floating()}else{if(c.bar){this.bar()}else{if(c.tab){this.tab()}}}};OOo.Ocode.prototype={show:function(e,g){var h=e||window.event;if(g!=="exit"&&g!=="entry"&&g!=="onSingleClick"){if(h.preventDefault&&h.stopPropagation){h.preventDefault();h.stopPropagation()}else{h.returnValue=false}}if(this.onPageCardVisible){return}var f=this.options,l;if(f.events&&f.events.prompt){if(f.cookie){OOo.eraseCookie(f.cookie.name||"oo_r")}OOo.hidePrompt(h)}if(this.interruptShow){return}if(!this.floatingLogo&&f.cookie&&OOo.Ocode.matchUrl(f.cookie)){return}if(!f.floating&&f.events&&this.singProbability){return}if(f.events&&f.events.onSingleClick){this.singProbability=true}if(f.cookie){OOo.Ocode.tagUrl(f.cookie)}if(f.thirdPartyCookies){if(OOo.checkThirdPartyCookies(f.thirdPartyCookies)){return}OOo.setThirdPartyCookies(f.thirdPartyCookies)}if(this.floatingLogo){this.floatingLogo.children[0].blur()}if(this.floatingLogo&&f.disappearOnClick){this.floatingLogo.style.display="none"}if(typeof window.ClickTale==="function"){if(!f.clickTalePID){f.clickTalePID=window.ClickTaleGetPID()||null}f.clickTaleUID=window.ClickTaleGetUID()||null;f.clickTaleSID=window.ClickTaleGetSID()||null;var j=function(b){if(b.origin==="https://secure.opinionlab.com"){if(typeof window.ClickTaleEvent==="function"&&b.data!==""){var a=JSON.parse(b.data),c=window.ClickTaleEvent;for(var d in a){c(d+":"+a[d])}}}};OOo.addEventListener(window,"message",j,false)}if(f.onPageCard&&!OOo.Browser.isMobile){this.setupOnPageCC()}else{this.launchOOPopup()}l=f.floating||f.tab||f.bar;if(l&&typeof l.onClickCallback==="function"){l.onClickCallback()}}};OOo.extend(OOo.Ocode,{tagUrl:function(b,a){if(!a){a=location}var c=b.name||"oo_r",d=b.type==="page"?a.href:a.hostname,e=OOo.readCookie(c)||"";if(OOo.Ocode.matchUrl(b,a)){return}OOo.createCookie(c,e+OOo.sha1(d),b.expiration)},matchUrl:function(b,a){if(!a){a=location}var c=OOo.readCookie(b.name||"oo_r"),d;if(!c){return false}d=b.type==="page"?a.href:a.hostname;return c.search(OOo.sha1(d))!==-1}});(function(){var l=0;function j(){var b=this.options,a=b.newWindowSize||[545,325],c=[parseInt((b.metrics.height-a[1])/2,10),parseInt((b.metrics.width-a[0])/2,10)],d,e,g="resizable=yes,location=no,status=no,scrollbars=1,width="+a[0]+",height="+a[1]+",top="+c[0]+",left="+c[1],h="OnlineOpinion";if(b.newWindow){h=h+(l++)}b.metrics.time2=(new Date()).getTime();b.metrics.type="Popup";d=OOo.appendOOForm(b,h);var f="https://secure.opinionlab.com/ccc01/comment_card_d.asp?"+d.children[0].value;if(b.commentCardUrl){f=b.commentCardUrl+"?"+d.children[0].value}if(OOo.Browser.isChromeIOS){h="_0"}if(OOo.Browser.isMobile&&OOo.Browser.ua.search("Android")!==-1){d.submit()}else{e=window.open(f,h,g);if(e&&!OOo.Browser.isChromeIOS){d.submit()}}}OOo.extend(OOo.Ocode.prototype,{launchOOPopup:j})}());(function(){function i(){var c=this.options.events,d=[false,false],e=["onExit","onEntry"],g="beforeunload",h,f,l,j,m;if(OOo.Browser.Opera){g="unload"}if(OOo.Browser.iOs){g="pagehide"}if(c.prompt){OOo.extend(this.options,{promptMarkup:c.prompt.promptMarkup,neverShowAgainButton:false,pathToAssets:c.prompt.pathToAssets})}for(l=e.length-1;l>=0;l-=1){h=e[l];if(c[h] instanceof Array){j=c[h];m=j.length;while(m&&!d[l]){m-=1;if(window.location.href.search(j[m].url)!==-1&&Math.random()>=1-j[m].p/100){d[l]=true}}}else{if(c[h]&&Math.random()>=1-c[h]/100){d[l]=true}}}if(d[0]){OOo.addEventListener(window,g,function(b){var a=b||window.event;this.show(a,"exit")}.bind(this),false)}if(d[1]){if(c.delayEntry){window.setTimeout(function(b){var a=b||window.event;if(c.prompt){this.getEntryPrompt()}else{this.show(a,"entry")}}.bind(this),c.delayEntry*1000)}else{if(c.prompt){this.getEntryPrompt()}else{(function(b){var a=b||window.event;this.show(a,"entry")}).bind(this)()}}}}function k(b){var a=b||window.event,c=b.target||b.srcElement,d=this.options.events,e=c.parentNode,g=5,h=0;while(e&&(c.nodeName!=="A"||c.nodeName!=="INPUT")&&h!==g){if(e.nodeName==="A"){c=e}e=e.parentNode;h+=1}if(d.disableFormElements&&(c.tagName==="INPUT"||c.tagName==="BUTTON")&&(c.type==="submit"||c.type==="image"||c.type==="reset"||c.type==="button")){this.interruptShow=true}if(d.disableLinks&&(c.nodeName==="A"||c.nodeName==="AREA")&&c.href.substr(0,4)==="http"&&c.href.search(d.disableLinks)!==-1){this.interruptShow=true}}function o(b){this.interruptShow=true}function n(){OOo.addEventListener(document.body,"mousedown",k.bind(this));if(!this.options.events.disableFormElements){return}var b=document.getElementsByTagName("form"),a;for(a=b.length-1;a>=0;a-=1){OOo.addEventListener(b[a],"submit",o.bind(this))}}OOo.extend(OOo.Ocode.prototype,{setupEvents:i,setupDisableElements:n,getEntryPrompt:function(){OOo.getEntryPrompt.call(this)},showEntryPrompt:function(b){if(this.options.cookie){OOo.Ocode.tagUrl(this.options.cookie)}OOo.showEntryPrompt.call(this,b,this.show)}})}());OOo.extend(OOo.Ocode.prototype,{floating:function(){var d=document,e=this.floatingLogo=document.createElement("div"),g=d.createElement("div"),h=d.createElement("div"),f=d.createElement("div"),l=d.createElement("span"),j=this.options.floating,m=OOo.$(j.contentId),i="10px",k=j.id,o=d.createElement("span"),n,p,q,t,r,s,v,D,x=this.options.mobileTouches||2,y=0;function u(b){return b.offsetLeft+b.offsetWidth}function w(b){t.style.left=u(m)+"px"}o.innerHTML="Screen reader users: Please switch to forms mode for this link.";o.className="screen_reader";if(k){e.id=k}e.className="oo_feedback_float";h.className="oo_transparent";g.className="olUp";f.className="olOver";g.tabIndex=0;g.onkeyup=function(b){n=b||window.event;if(n.keyCode!==13){return}this.show(n)}.bind(this);g.innerHTML=j.caption||"Feedback";e.appendChild(o);e.appendChild(g);l.innerHTML=j.hoverCaption||"Click here to<br>rate this page";f.appendChild(l);e.appendChild(f);e.appendChild(h);function z(b){var a=d.documentElement.scrollTop||d.body.scrollTop,c=d.documentElement.clientHeight||document.body.clientHeight;e.style.top=(a+c-(v||0)-10)+"px"}if(j.position&&j.position.search(/Content/)&&m){t=this.spacer=d.createElement("div");r=OOo.Browser.WebKit?d.body:d.documentElement;t.id="oo_feedback_fl_spacer";t.style.left=u(m)+"px";d.body.appendChild(t);switch(j.position){case"rightOfContent":s=function(b){e.style.left=(u(m)-r.scrollLeft)+"px"};break;case"fixedPreserveContent":s=function(b){var a=OOo.Browser.IE?d.body.clientWidth:window.innerWidth,c=r.scrollLeft;if(a<=u(m)+e.offsetWidth+parseInt(i,10)){e.style.left=(u(m)-c)+"px"}else{e.style.left="";e.style.right=i}};break;case"fixedContentMax":s=function(b){var a=OOo.Browser.IE?d.body.clientWidth:window.innerWidth;if(a<=u(m)+e.offsetWidth+parseInt(i,10)){e.style.left="";e.style.right=i}else{e.style.left=(u(m)-r.scrollLeft)+"px";e.style.right=""}};break}window.setTimeout(s,0);OOo.addEventListener(window,"scroll",s,false);OOo.addEventListener(window,"resize",s,false);OOo.addEventListener(window,"resize",w,false)}else{e.style.right=i}if(!this.options.disableShow===true){e.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}this.show(a)}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){e.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}y++}.bind(this);e.ontouchend=function(b){var a=b||window.event;if(y>=x){this.show(a);y=0}}.bind(this)}else{e.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{e.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{OOo.appendWaypointMobile(e,x)}d.body.appendChild(e)},removeFloatingLogo:function(){document.body.removeChild(this.floatingLogo);if(this.spacer){document.body.removeChild(this.spacer)}}});OOo.extend(OOo.Ocode.prototype,{bar:function(){var d=document,e=this.floatingLogo=d.createElement("a"),g,h,f,l=d.documentElement.scrollTop||d.body.scrollTop,j=d.createElement("div"),m=this.options,i=this.options.mobileTouches||2,k=0,o=d.createElement("span");function n(b){var a=0,c=0;if(b.offsetParent){do{a+=b.offsetLeft;c+=b.offsetTop}while(b==b.offsetParent);return[a,c]}}function p(b){var a=document.activeElement,c;if(!a){return}c=n(a);if(!c){return}if(c[1]+a.clientHeight>(window.innerHeight||document.body.clientHeight)+(window.pageYOffset||document.body.scrollTop)-e.clientHeight){if(navigator.appVersion.indexOf("MSIE 7.")!==-1){window.scrollBy(0,0)}else{window.scrollBy(0,a.clientHeight+20)}}}j.innerHTML="Launches comment card in new window";j.className="ada-hidden";this.reflowBar=OOo.K;e.id="oo_bar";e.href="#";o.innerHTML=m.bar.caption||"Feedback";e.appendChild(j);e.appendChild(o);if(typeof m.tabIndex==="number"){e.tabIndex=m.tabIndex}else{e.tabIndex=0}if(!this.options.disableShow===true){e.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}this.show(a)}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){e.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}k++}.bind(this);e.ontouchend=function(b){var a=b||window.event;if(k>=i){this.show(a);k=0}}.bind(this)}else{e.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{e.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{OOo.appendWaypointMobile(e,i)}document.body.className+=document.body.className<1?"oo_bar":" oo_bar";document.body.appendChild(e);OOo.addEventListener(document.body,"keyup",p,false)}});OOo.extend(OOo.Ocode.prototype,{tab:function(){var c=document,d=this.floatingLogo=c.createElement("div"),e=c.createElement("span"),g=c.createElement("div"),h=c.createElement("span"),f=this.options.tab,l=c.createElement("a"),j="Feedback",m=f.tabType,i="right",k=this.options.mobileTouches||2,o=0,n=0,p=OOo.readCookie("oo_tab_extend"),q=2592000;switch(m){case 1:var t=c.createElement("span");d=this.floatingLogo=c.createElement("a");e=c.createElement("span");d.href="#";d.id="oo_tab_"+m;if(f.position){i=f.position}if(f.extendEveryPage){n=f.extendEveryPage}if(f.extendExpiration){q=f.extendExpiration}d.className=tabClass="oo_tab_"+i+"_"+m;e.className="screen_reader";t.className="icon";if(typeof f.tabIndex==="number"){d.tabIndex=f.tabIndex}else{d.tabIndex=0}if(f.verbiage){j=f.verbiage}d.innerHTML=j;e.innerHTML="Launches comment card in new window";d.appendChild(e);d.appendChild(t);if(n==1){setTimeout(function(){d.className+=" small"},2500)}else{if(p==="prevent"){d.className+=" small"}else{OOo.createCookie("oo_tab_extend","prevent",q);setTimeout(function(){d.className+=" small"},2500)}}break;default:d=this.floatingLogo=c.createElement("a");d.id="oo_tab";d.className="oo_tab_"+(f.position||i);d.href="#";if(!document.addEventListener||OOo.checkIfIE9orBelow()){d.className+=" oo_legacy"}if(f.wcagBasePath){d.className+=" wcag"}var r=document.createElement("img");if(f.iconPath){r.setAttribute("src",f.iconPath+"oo_tab_icon_retina.gif")}else{r.setAttribute("src","/onlineopinionV5/oo_tab_icon_retina.gif")}r.setAttribute("alt","");if(f.verbiage){j=f.verbiage}var s=document.createTextNode(j);d.appendChild(r);d.appendChild(s);if(e){e.className="screen_reader";e.innerHTML=" Will open a new window";d.appendChild(e)}}if(!this.options.disableShow===true){d.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}this.show(a)}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){d.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}o++}.bind(this);d.ontouchend=function(b){var a=b||window.event;if(o>=k){this.show(a);o=0}}.bind(this)}else{d.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{d.onclick=function(b){var a=b||window.event;this.show(a)}.bind(this)}}else{OOo.appendWaypointMobile(d,k)}c.body.appendChild(d)}});OOo.extend(OOo.Ocode.prototype,{setupOnPageCC:function(){var e=document,g=OOo.Cache.overlay||e.createElement("div"),h=this.wrapper=e.createElement("div"),f=e.createElement("a"),l=e.createElement("div"),j=e.createElement("span"),m=this.frameName,i=e.createElement(OOo.DYNAMIC_FRAME_NAME_IS_BUGGY?'<iframe name="'+m+'">':"iframe"),k=e.createDocumentFragment(),o=this.options,n=o.onPageCard,p="https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp",q,t,r,s=false,v=this,D,x,y,u,w,z,A,C=e.createElement("span");function B(b){if(b&&b.preventDefault){b.preventDefault()}document.body.focus();i.tabIndex=-1;i.title="empty";i["aria-hidden"]="true";g.style.display="none";g.className="";e.body.removeChild(h);if(window.postMessage){OOo.removeEventListener(window,"message",w)}else{window.clearInterval(t)}s=false;v.onPageCardVisible=false;return false}w=OOo.Ocode.postMessageHandler(function(b){var a=parseInt(b,10),c,d;if(a>0){if(s){return}s=true;c=window.innerHeight||e.documentElement.clientHeight||e.body.clientHeight;d=a;A=h.offsetTop;if(d+A>c){d=c-40-A}i.style.width="555px";l.style.width="555px";i.style.height=d+"px";h.style.visibility="visible";if(j.clientHeight<20){j.style.height=h.offsetHeight+"px"}g.className="no_loading";v.onPageCardVisible=true;q&&e.body.removeChild(q)}else{if(b==="submitted"){B()}}if(OOo.Browser.IE&&e.compatMode==="BackCompat"){window.scrollTo(0,0)}},v.options.commentCardUrl);o.metrics.type="OnPage";OOo.Cache.overlay=g;g.id="oo_overlay";g.style.display="block";g.className="";l.className="iwrapper";h.className="oo_cc_wrapper";h.setAttribute("role","alert");h.setAttribute("aria-describedby","comment_card_description");C.className="screen_reader";C.id="comment_card_description";C.innerHTML="Please leave your feedback in the comment card you just activated";h.appendChild(C);f.className="oo_cc_close";f.innerHTML='<span class="screen_reader">Close dialog</span><span aria-hidden="true">&#10006;</span>';f.title=o.closeTitle?o.closeTitle:"Close dialog";if(!e.addEventListener){l.style.outline="1px solid #cdcdcd"}h.style.visibility="hidden";f.tabIndex=0;f.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return}B()};if(OOo.Browser.IE){i.frameBorder="0";if(!window.XMLHttpRequest||e.compatMode==="BackCompat"){z=Math.max(e.documentElement.clientWidth,e.body.offsetWidth);g.style.position="absolute";g.style.width=e.compatMode==="BackCompat"?(z-21)+"px":z+"px";g.style.height=Math.max(e.documentElement.clientHeight,e.body.offsetHeight)+"px";h.style.position="absolute";OOo.addEventListener(window,"scroll",function(){g.style.top=(e.body.scrollTop+document.body.clientHeight-g.clientHeight)+"px";h.style.top=(e.body.scrollTop+A+25)+"px"})}}OOo.addEventListener(f,"click",B);if(n.closeWithOverlay&&!OOo.Browser.isMobile){h.appendChild(j);j.onclick=B;g.onclick=B}i.src=" ";i.name=m;i.title="Comment Card";l.appendChild(f);l.appendChild(i);h.appendChild(l);k.appendChild(h);k.appendChild(g);e.body.appendChild(k);if(window.postMessage){OOo.addEventListener(window,"message",w)}else{t=setInterval(w,500)}o.metrics.time2=(new Date()).getTime();q=OOo.appendOOForm(o,m);q.submit()}});OOo.extend(OOo.Ocode,{postMessageHandler:function(d,e,g){return function(b){var a="https://secure.opinionlab.com",c;if(!g){g=location}if((b&&!(b.origin===a||b.origin.indexOf(e)!==0))||(!b&&g.hash.search("OL=")===-1)){return false}c=b?b.data:g.hash.split("=").pop();if(!b&&location.hash){location.hash=""}d(c);return c}}});OOo.Invitation=function(b){this.options={tunnelCookie:"oo_inv_tunnel",repromptTime:604800,responseRate:50,repromptCookie:"oo_inv_reprompt",promptMarkup:"oo_inv_prompt.html",promptStyles:"oo_inverstitial_style.css",percentageCookie:"oo_inv_percent",pagesHitCookie:"oo_inv_hit",popupType:"popunder",promptDelay:0,neverShowAgainButton:false,loadPopupInBackground:false,truncatePrevCurrentMetrics:false,disablePrevCurrentMetrics:false,tealeafCookieName:"TLTSID",monitorWindow:"oo_inv_monitor.html",companySlogan:"We value your opinion",beforePrompt:OOo.K,callBacks:{prompt:"",yesClick:"",noClick:"",closeClick:""},inviteMarkup:"<div id='oo_invitation_prompt' role='dialog' aria-describedby='oo_invite_message'><div id='oo_invitation_company_logo'></div><div id='oo_invite_content'><p id='oo_invite_message'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class='prompt_button'><a href='#' id='oo_launch_prompt'>Yes<span class='screen_reader'>This will open a new window</span></a></p><p class='prompt_button'><a href='#' id='oo_no_thanks'>No Thanks</a></p><p id='ol_invitation_brand_logo'><span aria-label='Powered by OpinionLab.'></span></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialog</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->",skipInvitePrompt:false};this.popupShown=false;OOo.extend(this.options,b);var a=this.options,c=parseInt(OOo.readCookie(a.pagesHitCookie),10)||0;OOo.Invitation.friendlyDomains=a.friendlyDomains||null;var d={weight:Number(OOo.readCookie("oo_OODynamicRewrite_weight")),searchPattern:OOo.readCookie("oo_OODynamicRewrite_searchPattern"),replacePattern:OOo.readCookie("oo_OODynamicRewrite_replacePattern")};OOo.eraseCookie("oo_OODynamicRewrite_weight");OOo.eraseCookie("oo_OODynamicRewrite_searchPattern");OOo.eraseCookie("oo_OODynamicRewrite_replacePattern");if(!window.OOoDynamicRewrite||window.OOoDynamicRewrite.weight<d.weight){window.OOoDynamicRewrite=d}if(window.OOoDynamicRewrite&&("number"===typeof window.OOoDynamicRewrite.weight)&&!isNaN(window.OOoDynamicRewrite.weight)){OOo.createCookie("oo_OODynamicRewrite_weight",window.OOoDynamicRewrite.weight);if(window.OOoDynamicRewrite.searchPattern){OOo.createCookie("oo_OODynamicRewrite_searchPattern",window.OOoDynamicRewrite.searchPattern)}if(window.OOoDynamicRewrite.replacePattern){OOo.createCookie("oo_OODynamicRewrite_replacePattern",window.OOoDynamicRewrite.replacePattern)}}if(location.search.search("evs")!==-1||OOo.readCookie("oo_evs_friendly")==="yes"){OOo.eraseCookie("oo_evs_friendly");a.loadPopupInBackground=true;this.launchPopup();OOo.createCookie(a.repromptCookie,1,a.repromptTime===-1?0:a.repromptTime)}setTimeout(function(){if(!window.oo_inv_monitor){return}if(a.area&&location.href.search(a.area)===-1){this.options.popupType="popup";this.launchPopup()}else{if(a.goal&&location.href.search(a.goal)!==-1){window.oo_inv_monitor.close()}}}.bind(this),1600);if(OOo.readCookie(a.repromptCookie)){return}if(a.thirdPartyCookies&&OOo.checkThirdPartyCookies(a.thirdPartyCookies)){return}if(!OOo.readCookie(a.percentageCookie)){OOo.createCookie(a.percentageCookie,(Math.random()>1-(a.responseRate/100))?"1":"0")}if(typeof a.promptTrigger!=="undefined"){if(a.promptTrigger instanceof RegExp){if(!window.location.href.match(a.promptTrigger)){return}}else{if(a.promptTrigger instanceof Array){if(!OOo.checkTunnel(location.pathname,a.promptTrigger,a.tunnelCookie)){return}}}}c+=1;OOo.createCookie(a.pagesHitCookie,c);if(a.pagesHit&&c<a.pagesHit){return}OOo.eraseCookie(a.tunnelCookie);if(OOo.readCookie(a.percentageCookie)==="1"){window.setTimeout(function(){OOo.createCookie(a.repromptCookie,1,a.repromptTime);this.options.beforePrompt();this.getPrompt()}.bind(this),a.promptDelay*1000)}};OOo.Invitation.notifyFriendlyLocationChange=function(b){if(window.oo_inv_monitor){OOo.createCookie("oo_evs_friendly","yes")}};OOo.Invitation.prototype={getPrompt:function(){OOo.getPrompt.call(this)},showPrompt:function(b){if(!this.options.skipInvitePrompt){OOo.showPrompt.call(this,b,this.launchPopup)}else{this.launchPopup()}},launchPopup:function(b){if(this.popupShown){return}this.popupShown=true;var a=b||window.event;if(typeof a!=="undefined"){if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}}var c=this.options,d=window.location.href,e=c.popupType==="popup"?"https://secure.opinionlab.com/ccc01/comment_card.asp?":c.pathToAssets+c.monitorWindow+"?time1="+(new Date()).getTime()+"&",g,h=[],f=c.asm?[555,500]:(OOo.Browser.Chrome?[400,400]:[400,350]),l,j=OOo.createMetrics(),m=OOo.readCookie(c.tealeafCookieName),i;if(c.clickTalePID&&window.ClickTaleGetUID&&window.ClickTaleGetSID||window.ClickTaleGetPID&&window.ClickTaleGetUID&&window.ClickTaleGetSID){m+="|"+[c.clickTalePID||window.ClickTaleGetPID(),window.ClickTaleGetUID(),window.ClickTaleGetSID()].join("/")}f=c.newWindowSize||f;i="scrollbars=1,resizable=1,location=no,status=no,width="+f[0]+",height="+f[1];if(c.referrerRewrite){j.referer=OOo.referrerRewrite(c.referrerRewrite)}if(c.truncatePrevCurrentMetrics){j.prev=OOo.truncateMetric(j.prev);j.currentURL=OOo.truncateMetric(j.currentURL)}if(c.disablePrevCurrentMetrics){j.prev="";j.currentURL=""}if(c.thirdPartyCookies){OOo.setThirdPartyCookies(c.thirdPartyCookies)}g=OOo.toQueryString(j)+"&type=Invitation";if(c.customVariables){g+="&customVars="+encodeURIComponent(OOo.serialize(c.customVariables))}g+="&custom_var="+OOo.createLegacyVars(c.legacyVariables,m);if(c.asm){g+="&asm=2";i+=",scrollbars=1"}e+=g;if(e.match(/\?/g).length===2){e=e.replace(/\?([^?]*)$/,"&$1")}this.popup=l=window.open(e,"OnlineOpinionInvitation",i);if(!c.loadPopupInBackground&&OOo.$("oo_container")){OOo.hidePrompt(a)}},killPrompt:function(b){var a=b||window.event;if(this.options.callBacks&&typeof this.options.callBacks.noClick==="function"){this.options.callBacks.noClick()}OOo.createCookie(this.options.repromptCookie,1,157680000);OOo.hidePrompt(a)}};OOo.extend(OOo.Invitation,{navigateToFriendlyDomain:function(b){location.href=b}});OOo.Waypoint=function(b){var a=OOo.Browser;if(b.disableMobile&&a.isMobile){return}if(b.disableNoniOS&&a.isMobileNonIOS){return}this.options={pathToAssets:"/onlineopinionV5/",waypointMarkup:"oo_waypoint.html",companySlogan:"Give us feedback",companyLogo:"waypoint_logo.png",linkFocus:true,categories:{website:{tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png",buttonText:"Website"},store:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://store."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png",buttonText:"Store"},product:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://product."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png",buttonText:"Product"},other:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://other."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png",buttonText:"Other"}},wpmarkup:"<div id='oo_waypoint_prompt' role='dialogue' aria-describedby='oo_waypoint_message'><div id='oo_waypoint_company_logo'></div><div id='oo_waypoint_content'><p id='oo_waypoint_message'>Select a category</p><p id='waypoint_icons'></p><p id='ol_waypoint_brand_logo'><span aria-label='Powered by OpinionLab.'></span></p></div><a id='oo_waypoint_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialogue</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->"};OOo.extend(this.options,b);var c=this.options,d=c.categories;for(var e in d){if(d.hasOwnProperty(e)){if(typeof c.categories[e].oCode==="object"){var g={};g[e]=new OOo.Ocode(d[e].oCode);OOo.extend(OOo.Waypoint,g)}}}OOo.extend(OOo.Waypoint,{getWaypoint:function(){this.getWaypoint()}.bind(this)})};OOo.Waypoint.prototype={getWaypoint:function(){OOo.getWaypoint.call(this)},showWaypoint:function(b){OOo.showWaypoint.call(this,b)},killWaypoint:function(b){var a=b||window.event;OOo.hideWaypoint(a)}};OOo.extend(OOo,{appendWaypoint:function(c){var d=OOo.$(c);if(!!d){if(!OOo.Browser.isMobile){OOo.addEventListener(d,"click",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}OOo.Waypoint.getWaypoint()},false);OOo.addEventListener(d,"keydown",function(b){var a=b||window.event;if(a.keyCode!==13){return}if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}OOo.Waypoint.getWaypoint()},false)}}}});OOo.extend(OOo,{appendWaypointMobile:function(c,d){var e=0;var g=d||2;if(typeof c==="string"){var c=OOo.$(c)}if(!!c){if(OOo.Browser.isMobile){if("ontouchstart" in window){OOo.addEventListener(c,"touchstart",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}e++},false);OOo.addEventListener(c,"touchend",function(b){var a=b||window.event;if(e>=g){OOo.Waypoint.getWaypoint();e=0}},false)}else{OOo.addEventListener(c,"click",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.returnValue=false}OOo.Waypoint.getWaypoint()},false)}}}}});return OOo}));$(document).ready(function(){if($(".olb-outoflang-interstitial-bdf-module").length>0){$("a.ool-lang-pref-popup").live("click",function(){oolURL=$(this).attr("rel");var className=$(this).hasClass("ool-new-window");var options={size:"small",buttons:{"Continuar en ingl&eacute;s":true,Cancelar:false},callback:goToOOLURL};function goToOOLURL(val){if(val){if(className){window.open(oolURL)}else{window.location=oolURL}}}$(".modal-description.correct-outoflang").boaModal(options);$(".cancel-button").click(function(){temp="";$(".modal-description.correct-outoflang").dialog("close");$(".modal-description.correct-outoflang").dialog("destroy")})})}});$(document).ready(function(){var $makePaymentWidgetModule=$(".ad-acct-summary-module-card-skin .card-skin");if($makePaymentWidgetModule.length>0){$makePaymentWidgetModule.find("#makePaymentWidget").bind("click",function(){var options={width:500,buttons:{}};var widgetAction=makePaymentWidgetUrl,widgetPageLocation="",params="",widgetdivId="widget-success",widgetdefaultdivId="widget-failure";var lang=$("html").attr("lang").toLowerCase();if(lang==="en-us"){XEngineWidgetFramework.callWidget(widgetAction,widgetPageLocation,params,widgetdivId,"en-US","Desktop","true",widgetdefaultdivId,60000)}else{if(lang==="es-us"){XEngineWidgetFramework.callWidget(widgetAction,widgetPageLocation,params,widgetdivId,"es-US","Desktop","true",widgetdefaultdivId,60000)}}var $cardMakePaymentWidgetModal=$("#card-make-payment-widget-modal");var attr=$("#widget-failure",$cardMakePaymentWidgetModal).attr("style");if(typeof attr!=="undefined"&&attr!==false&&attr!==null){if($("#widget-failure",$cardMakePaymentWidgetModal).attr("style").indexOf("display")!==-1){$("#widget-failure",$cardMakePaymentWidgetModal).removeAttr("style")}}$("#card-make-payment-widget-modal").boaFlexModal(options)})}function updatePaymentSchedule(newSchedule){if(newSchedule){console.log("call made"+newSchedule.amount)}}});$(document).ready(function(){sa_edit_category={module:$(".sa-modal-module .edit-category-skin"),modalDiv:$("#sa_edit_category_modal"),modalModule:$("#sa-edit-category-overlay"),isAccountListGenerated:false,isCategoryUpdated:false,totalAccounts:0,updateTxnDetails:{},screenState:"onLoad",previousPageId:"",currentPageId:"",cmCatId:"",isPresent:function(elem){if(typeof(elem)!=="undefined"&&elem!==null){return true}else{return false}},resetToDefault:function(){sa_edit_category.updateModalCloseLayer(sa_edit_category_ftl.content.closeModalLayer.editCategory);sa_edit_category.isAccountListGenerated=false;sa_edit_category.isCategoryUpdated=false;sa_edit_category.totalAccounts=0;sa_edit_category.updateTxnDetails={};sa_edit_category.screenState="onLoad";sa_edit_category.modalModule.find(".update-category-screen").show();sa_edit_category.modalModule.find(".update-category-success").hide();sa_edit_category.modalModule.find(".edit-category-screen").html("");sa_edit_category.modalModule.find(".hide-on-load").hide();sa_edit_category.modalModule.find("#done-state").hide();sa_edit_category.modalModule.find("#save-state").show();sa_edit_category.disableSaveChangesBtn();sa_edit_category.hideMessaging("messaging-overlay","overlay");sa_edit_category.modalDiv.dialog("destroy");if(typeof cX==="function"&&cX!==null){cX("onload")}},updateModalCloseLayer:function(content){var $modalCloseBtn=$("#sa_edit_category_modal-ModalContainer .ui-dialog-titlebar #sa_edit_category_modal-modalClose");var $modalClose=$modalCloseBtn.find("span.ada-hidden");if($modalClose.length>0&&sa_edit_category.isPresent(content)&&content!==""){$modalClose.html("&nbsp; "+content);$modalCloseBtn.focus()}},showLoading:function(id){if(sa_edit_category.isPresent(id)&&id!==""){sa_edit_category.modalModule.find("#"+id).show()}},hideLoading:function(id){if(sa_edit_category.isPresent(id)&&id!==""){sa_edit_category.modalModule.find("#"+id).hide()}},showMessaging:function(id,type){if(sa_edit_category.isPresent(type)&&type!==""){var messageObj=$.extend({},sa_edit_category_ftl.content.messaging[type]);var $message=sa_edit_category.modalModule.find("#"+id);$message.removeClass("error warning info").addClass(messageObj.type);$message.find(".messaging-icon .ada-hidden").html(messageObj.iconText);$message.find(".messaging-text .messaging-title").html(messageObj.title);$message.find(".messaging-text .messaging-content").html(messageObj.message)}if(sa_edit_category.isPresent(id)&&id!==""){sa_edit_category.modalModule.find("#"+id).show()}},hideMessaging:function(id,type){if(sa_edit_category.isPresent(type)&&type!==""){var $message=sa_edit_category.modalModule.find("#"+id);$message.removeClass("error warning info");$message.find(".messaging-icon .ada-hidden").html("");$message.find(".messaging-text .messaging-title").html("");$message.find(".messaging-text .messaging-content").html("")}if(sa_edit_category.isPresent(id)&&id!==""){sa_edit_category.modalModule.find("#"+id).hide()}},renderHBTemplate:function(options,callback){sa_edit_category.modalModule.find("#"+options.targetID).html("").show();var hbTemplateScript=sa_edit_category.module.find("#"+options.templateID).html();var hbTemplate=Handlebars.compile(hbTemplateScript);sa_edit_category.modalModule.find("#"+options.targetID).html(hbTemplate(options.templateData));setTimeout(function(){if(typeof callback==="function"&&callback!==null){callback()}if(typeof cX==="function"&&cX!==null){cX("onload")}},100)},makeServiceCall:function(requestObj){if(!sa_edit_category.isPresent(requestObj.requestData)){requestObj.requestData={}}if(!sa_edit_category.isPresent(requestObj.serviceTimeout)){requestObj.serviceTimeout=20000}$.ajax({url:requestObj.requestURL,data:JSON.stringify(requestObj.requestData),type:"POST",datatype:"json",contentType:"application/json; charset=UTF-8",timeout:requestObj.serviceTimeout,beforeSend:function(xhr){if(sa_edit_category.isPresent(requestObj.processBeforeRequest)&&typeof requestObj.processBeforeRequest==="function"){requestObj.processBeforeRequest()}},error:function(xhr){var errorMessage="AJAX error :: "+xhr.status+" - "+xhr.statusText;if(typeof bactm_cmCreateCustomError==="function"&&bactm_cmCreateCustomError!==null){bactm_cmCreateCustomError(sa_edit_category.currentPageId,null,null,null,"FinWellSpending_ErrorCode_130",sa_edit_category.cmCatId,errorMessage)}if(sa_edit_category.isPresent(requestObj.callbackError)&&typeof requestObj.callbackError==="function"){requestObj.callbackError()}},success:function(responseData){if(responseData===null||typeof(responseData)==="undefined"||responseData.length===0){if(typeof bactm_cmCreateCustomError==="function"&&bactm_cmCreateCustomError!==null){bactm_cmCreateCustomError(sa_edit_category.currentPageId,null,null,null,"FinWellSpending_ErrorCode_151",sa_edit_category.cmCatId,"FinWellSpending Data Null Error")}if(sa_edit_category.isPresent(requestObj.callbackError)&&typeof requestObj.callbackError==="function"){requestObj.callbackError()}}else{if(sa_edit_category.isPresent(requestObj.callbackSuccess)&&typeof requestObj.callbackSuccess==="function"){requestObj.callbackSuccess(responseData)}}}})},invokeEditCategory:function(updateTxnObj){sa_edit_category.updateTxnDetails=$.extend({},updateTxnObj);if(typeof Handlebars==="undefined"||Handlebars===null){$.getScript(sa_edit_category_ftl.serviceURL.handlebars_js,sa_edit_category.generateEditCategory)}else{sa_edit_category.generateEditCategory()}},generateEditCategory:function(){Handlebars.registerHelper("returnDollarSign",function(amount){if(typeof amount==="undefined"||amount===null||amount===""||isNaN(parseInt(amount))){amount=0}if(amount<0){return'<span aria-hidden="true">-</span><span class="ada-hidden">'+sa_edit_category_ftl.content.minusADA+"</span>$"}else{return"$"}});Handlebars.registerHelper("isAccountProcessed",function(accountStatus){if(!sa_edit_category.isPresent(accountStatus)){accountStatus="12"}if(accountStatus===""||accountStatus==="12"){return false}else{return true}});Handlebars.registerHelper("hbCompareValues",function(val1,op,val2){if(!sa_edit_category.isPresent(val1)){val1=""}if(!sa_edit_category.isPresent(val2)){val2=""}if(op==="equals"){return(val1===val2)}else{if(op==="equalsIgnoreCase"){return(val1.toLowerCase()===val2.toLowerCase())}else{if(op==="equalsIgnoreType"){return(val1==val2)}else{if(op==="greaterThan"){return(val1>val2)}else{if(op==="greaterThanEqualTo"){return(val1>=val2)}else{if(op==="lessThan"){return(val1<val2)}else{if(op==="lessThanEqualTo"){return(val1<=val2)}}}}}}}});if(sa_edit_category.modalDiv.length>0){if(sa_edit_category.updateTxnDetails.sourceScreen==="ad-deposit"||sa_edit_category.updateTxnDetails.sourceScreen==="ad-card"){if(sa_edit_category.isPresent(cG7)&&sa_edit_category.isPresent(cG7.cM0)&&sa_edit_category.isPresent(cm_ClientID)){sa_edit_category.previousPageId=cG7.cM0[cm_ClientID]}}var modalOptions={width:"790",buttons:{},closeOnEscape:false};sa_edit_category.modalDiv.boaFlexModal(modalOptions);sa_edit_category.showLoading("section-loading");if(sa_edit_category.updateTxnDetails.sourceScreen==="ad-deposit"||sa_edit_category.updateTxnDetails.sourceScreen==="ad-card"){if(sa_edit_category.isPresent(cmCreatePageviewTag)&&typeof cmCreatePageviewTag==="function"){cmCreatePageviewTag("OLB:Tool:AcctDetails;Edit_Category_Modal",null,null,"OLB:Tool:AcctDetails",false,false,null,false,false,null,null,null,null,null,null,null,null,null,null,null,null)}if(sa_edit_category.isPresent(cG7)&&sa_edit_category.isPresent(cG7.cM0)&&sa_edit_category.isPresent(cm_ClientID)){cG7.cM0[cm_ClientID]="OLB:Tool:AcctDetails;Edit_Category_Modal"}sa_edit_category.currentPageId="OLB:Tool:AcctDetails;Edit_Category_Modal";sa_edit_category.cmCatId="OLB:Tool:AcctDetails"}else{if(sa_edit_category.updateTxnDetails.sourceScreen==="category-details"){if(typeof(window.digitalData)!=="undefined"&&typeof(window.digitalData)==="object"&&window.digitalData.page!==null&&window.digitalData.page.pageInfo!==null&&typeof bactm_captureAddlPageview==="function"&&bactm_captureAddlPageview!==null){bactm_captureAddlPageview(5,0)}sa_edit_category.currentPageId="OLB:Tool:FinWell;Edit_Category_Modal";sa_edit_category.cmCatId="OLB:Tool:FinWell"}}var hbOptions={targetID:"edit-category-section",templateID:"edit-category-template",templateData:sa_edit_category.updateTxnDetails};sa_edit_category.renderHBTemplate(hbOptions,sa_edit_category.processEditCategory)}},processEditCategory:function(){var $lblAllMerchant=sa_edit_category.modalModule.find("#all_merchant_trans_label");if($lblAllMerchant.length>0){var all_merchant_label=$lblAllMerchant.html();var merchantName=$lblAllMerchant.attr("rel");if(merchantName.toLowerCase().indexOf("check")!==-1){merchantName=merchantName.replace(/[0-9]/g,"")}$lblAllMerchant.html(all_merchant_label.replace("merchant_name",merchantName))}var $lblAllMerchantAmount=sa_edit_category.modalModule.find("#all_merchant_trans_amount_label");if($lblAllMerchantAmount.length>0){var all_merchant_amt_label=$lblAllMerchantAmount.html();var spent_amount=sa_edit_category.modalModule.find("#spent_amount").html();var merchantName=$lblAllMerchantAmount.attr("rel");if(merchantName.toLowerCase().indexOf("check")!==-1){merchantName=merchantName.replace(/[0-9]/g,"")}$lblAllMerchantAmount.html((all_merchant_amt_label.replace("merchant_name",merchantName)).replace("spent_amount",spent_amount))}var $formatPrice=sa_edit_category.modalModule.find("#edit-category-section .formatPrice");if(typeof $formatPrice.formatCurrency==="undefined"||$formatPrice.formatCurrency===null){$.getScript(sa_edit_category_ftl.serviceURL.formatCurrency_js,function(){$formatPrice.formatCurrency({roundToDecimalPlace:2})})}else{$formatPrice.formatCurrency({roundToDecimalPlace:2})}sa_edit_category.validateSaveChangesBtn();sa_edit_category.hideLoading("section-loading");sa_edit_category.modalModule.find(".edit-category-content").show();sa_edit_category.modalModule.find("#edit-category-section input:radio[name=trans-radio]").on("click",function(){var selectedValue=$(this).val();var $accountList=sa_edit_category.modalModule.find("#account-list-section");sa_edit_category.validateSaveChangesBtn();if(selectedValue==="only_this_txn"){$accountList.hide();sa_edit_category.hideMessaging("account-list-error")}else{$accountList.show();if(sa_edit_category.isAccountListGenerated===false){sa_edit_category.isAccountListGenerated=true;var requestObj={requestURL:sa_edit_category_ftl.serviceURL.list_accounts,processBeforeRequest:function(){sa_edit_category.hideMessaging("account-list-error");sa_edit_category.showLoading("section-loading")},callbackError:sa_edit_category.accountListError,callbackSuccess:sa_edit_category.generateAccountList};sa_edit_category.makeServiceCall(requestObj)}}})},accountListError:function(){sa_edit_category.showMessaging("account-list-error");sa_edit_category.hideLoading("section-loading");sa_edit_category.isAccountListGenerated=false},generateAccountList:function(responseObj){if(sa_edit_category.isPresent(responseObj.payload)&&sa_edit_category.isPresent(responseObj.payload.accounts)){if(sa_edit_category.screenState==="onLoad"){sa_edit_category.isAccountListGenerated=true;sa_edit_category.totalAccounts=responseObj.payload.accounts.length}var hbOptions={targetID:"account-list-section",templateID:"accounts-list-template",templateData:responseObj};sa_edit_category.renderHBTemplate(hbOptions,sa_edit_category.processAccountList)}else{sa_edit_category.accountListError()}},processAccountList:function(){sa_edit_category.hideLoading("section-loading");if(sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_account]").length===1){sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_account]").prop("checked",true).prop("disabled",true)}if(sa_edit_category.screenState==="onLoad"){sa_edit_category.modalModule.find("#account-list-section input:checkbox").prop("checked",true)}sa_edit_category.validateSaveChangesBtn();sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_all_accounts]").on("click",function(){sa_edit_category.modalModule.find("#account-list-section .account input:checkbox:not(:disabled)").prop("checked",$(this).prop("checked"));sa_edit_category.validateSaveChangesBtn()});sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_account]").on("click",function(){if(sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_account]:checked").length===sa_edit_category.totalAccounts){sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_all_accounts]").prop("checked",true)}else{sa_edit_category.modalModule.find("#account-list-section input:checkbox[name=cb_all_accounts]").prop("checked",false)}sa_edit_category.validateSaveChangesBtn()})},validateSaveChangesBtn:function(){if(sa_edit_category.modalModule.find("#save-state").is(":visible")){var updateType=sa_edit_category.modalModule.find("#edit-category-section input:radio[name=trans-radio]:checked").val();if(sa_edit_category.isPresent(updateType)){if(updateType==="only_this_txn"){sa_edit_category.enableSaveChangesBtn()}else{if(sa_edit_category.modalModule.find("#account-list-section .account.selectable input:checkbox:checked").length>0){sa_edit_category.enableSaveChangesBtn()}else{sa_edit_category.disableSaveChangesBtn()}}}else{sa_edit_category.disableSaveChangesBtn()}}},enableSaveChangesBtn:function(){var $btn=sa_edit_category.modalModule.find("#btn-save-changes");$btn.removeClass("btn-disabled");$btn.find("#adaText").html("")},disableSaveChangesBtn:function(){var $btn=sa_edit_category.modalModule.find("#btn-save-changes");$btn.addClass("btn-disabled");$btn.find("#adaText").html(" "+sa_edit_category_ftl.content.disabled)},updateTransaction:function(){var updateType=sa_edit_category.modalModule.find("#edit-category-section input:radio[name=trans-radio]:checked").val();if(sa_edit_category.isPresent(updateType)){var requestObj={requestURL:sa_edit_category_ftl.serviceURL.transaction,requestData:{payload:{transaction:{txnId:sa_edit_category.updateTxnDetails.transactionId,preferredDesc:sa_edit_category.updateTxnDetails.merchantName,categoryCode:sa_edit_category.updateTxnDetails.updatedCategory.id,currentCategoryCode:sa_edit_category.updateTxnDetails.currentCategory.id}}},processBeforeRequest:function(){sa_edit_category.showLoading("overlay-loading")},callbackError:sa_edit_category.updateTransactionError,callbackSuccess:sa_edit_category.processUpdateTransaction};if(updateType!=="only_this_txn"){requestObj.serviceTimeout=60000;var processRulesList=[{name:"SpendingCategoryTransactionSetRule",value:""}];var accountsList=[];$.each(sa_edit_category.modalModule.find("#account-list-section li.sa-input-options-wrapper.account"),function(index,account){var $account=$(account);accountsList[index]={adx:$account.find("input.sa-edit-input-option").attr("rel"),nickName:$account.find("label.sa-edit-input-option-label .account-name").html(),status:""};if($account.hasClass("success")){accountsList[index].status="00"}else{if($account.hasClass("fatal")){accountsList[index].status="02"}else{if($account.find("input.sa-edit-input-option").is(":checked")){accountsList[index].status="11"}else{accountsList[index].status="12"}}}});requestObj.requestData.payload.accounts=accountsList.slice(0);if(updateType==="all_merchant_txn"){processRulesList[0].value="Merchant"}else{if(updateType==="all_merchant_txn_amt"){processRulesList[0].value="MerchantWithAmount";requestObj.requestData.payload.transaction.amount=sa_edit_category.updateTxnDetails.spentAmount}}requestObj.requestData.payload.processRules=processRulesList.slice(0)}sa_edit_category.makeServiceCall(requestObj)}},updateTransactionError:function(){sa_edit_category.showMessaging("messaging-overlay","retryError");sa_edit_category.hideLoading("overlay-loading");sa_edit_category.validateSaveChangesBtn()},processUpdateTransaction:function(responseObj){if(sa_edit_category.isPresent(responseObj.payload)&&sa_edit_category.isPresent(responseObj.payload.responseCode)&&responseObj.payload.responseCode!==""){sa_edit_category.hideLoading("overlay-loading");sa_edit_category.hideMessaging("messaging-overlay","overlay");sa_edit_category.isCategoryUpdated=true;if(sa_edit_category.isPresent(responseObj.payload.additionalMessage)&&responseObj.payload.additionalMessage.toLowerCase()==="transactionupdated"){sa_edit_category.modalModule.find("#only_this_trans").prop("disabled",true)}switch(responseObj.payload.responseCode){case"200":sa_edit_category.screenState="success";sa_edit_category.modalModule.find(".update-category-screen").hide();sa_edit_category.modalModule.find(".update-category-success").show();sa_edit_category.updateModalCloseLayer(sa_edit_category_ftl.content.closeModalLayer.success);break;case"207":sa_edit_category.screenState="done";sa_edit_category.showMessaging("messaging-overlay","partialFatalError");sa_edit_category.modalModule.find("#save-state").hide();sa_edit_category.modalModule.find("#done-state").show();if(sa_edit_category.isPresent(responseObj.payload.accounts)){sa_edit_category.generateAccountList(responseObj)}break;case"500":sa_edit_category.screenState="done";sa_edit_category.showMessaging("messaging-overlay","completeFatalError");sa_edit_category.modalModule.find("#save-state").hide();sa_edit_category.modalModule.find("#done-state").show();if(sa_edit_category.isPresent(responseObj.payload.accounts)){sa_edit_category.generateAccountList(responseObj)}break;default:sa_edit_category.screenState="retry";sa_edit_category.showMessaging("messaging-overlay","retryError");sa_edit_category.validateSaveChangesBtn();if(sa_edit_category.isPresent(responseObj.payload.accounts)){sa_edit_category.generateAccountList(responseObj)}}}else{sa_edit_category.updateTransactionError()}}};$(sa_edit_category.modalDiv).on("dialogclose",function(){if(sa_edit_category.isCategoryUpdated===false){if(sa_edit_category.updateTxnDetails.sourceScreen==="category-details"){var $unCatDropdown=$(".sa-parent-module .category-details-skin .transaction-table .trans-row.expand + .trans-expanded .trans-categ-select.pending-categ-option");var $catDropdown=$(".sa-parent-module .category-details-skin .transaction-table .trans-row.expand + .trans-expanded .trans-categ-select:not(.pending-categ-option)");if($unCatDropdown.length>0&&$catDropdown.length>0){if(sa_edit_category.updateTxnDetails.currentCategory.id===sa_edit_category_ftl.content.unCatPendingID){$unCatDropdown.addClass("sa-dropdown-select").show().focus();$catDropdown.hide()}else{$unCatDropdown.removeClass("sa-dropdown-select").hide();$catDropdown.show().focus();$catDropdown.find(".transSelectedValue").html(sa_edit_category.updateTxnDetails.currentCategory.name);$catDropdown.find(".transSelectedValue").attr("rel",sa_edit_category.updateTxnDetails.currentCategory.name);$catDropdown.find(".transSelectedValue").attr("categoryidrel",sa_edit_category.updateTxnDetails.currentCategory.id)}}}else{if(sa_edit_category.updateTxnDetails.sourceScreen==="ad-deposit"){var $adDepositDropdown=$(".ad-transaction-module .transaction-records .record.open + tr.record-detail td.transDetailCell .categ-edit-section .txnMerchantcategory");if($adDepositDropdown.length>0){$adDepositDropdown.val(sa_edit_category.updateTxnDetails.currentCategory.id)}if(sa_edit_category.isPresent(cG7)&&sa_edit_category.isPresent(cG7.cM0)&&sa_edit_category.isPresent(cm_ClientID)&&sa_edit_category.isPresent(sa_edit_category.previousPageId)&&sa_edit_category.previousPageId!==""){cG7.cM0[cm_ClientID]=sa_edit_category.previousPageId}}else{if(sa_edit_category.updateTxnDetails.sourceScreen==="ad-card"){var $adCardDropdown=$(".ad-transaction-module-card-skin #transactions tr.trans-expanded .trans-desc-cell .categ-edit-section .txnMerchantcategory");if($adCardDropdown.length>0){$adCardDropdown.val(sa_edit_category.updateTxnDetails.currentCategory.id)}if(sa_edit_category.isPresent(cG7)&&sa_edit_category.isPresent(cG7.cM0)&&sa_edit_category.isPresent(cm_ClientID)&&sa_edit_category.isPresent(sa_edit_category.previousPageId)&&sa_edit_category.previousPageId!==""){cG7.cM0[cm_ClientID]=sa_edit_category.previousPageId}}}}sa_edit_category.resetToDefault()}else{if(sa_edit_category.updateTxnDetails.sourceScreen==="category-details"&&sa_edit_category.isPresent(sa_parent_module)&&sa_edit_category.isPresent(sa_parent_module.reloadPage)&&typeof sa_parent_module.reloadPage==="function"){sa_parent_module.reloadPage()}else{window.location.reload(true)}}});if(sa_edit_category.modalModule.length>0){sa_edit_category.modalModule.find(".btn-close-modal").on("click",function(){if(sa_edit_category.screenState==="retry"&&$(this).hasClass("btn-cancel-changes")){sa_edit_category.modalModule.find(".update-category-screen").hide();sa_edit_category.modalModule.find(".cancel-confirmation-screen").show();sa_edit_category.updateModalCloseLayer(sa_edit_category_ftl.content.closeModalLayer.cancelConfirmation)}else{sa_edit_category.modalDiv.dialog("close")}});sa_edit_category.modalModule.find("#btn-save-changes").on("click",function(){if(!$(this).hasClass("btn-disabled")){$(this).addClass("btn-disabled");if($(this).hasClass("oboUser")){sa_edit_category.showMessaging("messaging-overlay","oboError")}else{sa_edit_category.updateTransaction()}}});sa_edit_category.modalModule.find("#btn-no").on("click",function(){sa_edit_category.modalModule.find(".cancel-confirmation-screen").hide();sa_edit_category.modalModule.find(".update-category-screen").show();sa_edit_category.updateModalCloseLayer(sa_edit_category_ftl.content.closeModalLayer.editCategory)})}});